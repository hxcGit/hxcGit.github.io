[{"categories":["daily"],"content":"æ–‡ç« æè¿°","date":"2022-03-20","objectID":"/daily/","tags":["è®¡åˆ’","plan","æ—¥ç¨‹"],"title":"æ¯æ—¥è§„åˆ’","uri":"/daily/"},{"categories":["daily"],"content":"2022 å¹´ 3 æœˆ 24 æ—¥ å‘¨å›› å®‰æ’ raft ç®—æ³•æ•´ç† åä¸ºæ¯”èµ›ä»£ç å®ç° bisect èµ„æ–™æ£€ç´¢ ","date":"2022-03-20","objectID":"/daily/:1:0","tags":["è®¡åˆ’","plan","æ—¥ç¨‹"],"title":"æ¯æ—¥è§„åˆ’","uri":"/daily/"},{"categories":["daily"],"content":"2022 å¹´ 3 æœˆ 23 æ—¥ å‘¨ä¸‰ å®‰æ’ åŒºå—é“¾ä½œä¸šæ•´ç† commit bisect ä¼˜åŒ–èµ„æ–™æ£€ç´¢ ","date":"2022-03-20","objectID":"/daily/:2:0","tags":["è®¡åˆ’","plan","æ—¥ç¨‹"],"title":"æ¯æ—¥è§„åˆ’","uri":"/daily/"},{"categories":["daily"],"content":"2022 å¹´ 3 æœˆ 16 æ—¥ å‘¨ä¸‰ é˜…è¯»ææ–™ https://mp.weixin.qq.com/s/vTZXjq71MZPv9VGoOY6jPg https://segmentfault.com/a/1190000040263156 https://www.cnblogs.com/jo3yzhu/p/13559761.html å­¦ä¹  https://jimmysong.io/kubernetes-handbook/concepts/crd.html ã€æš‚ç¼“ã€‘ CRD å®šä¹‰ã€æš‚ç¼“ã€‘ KubeBuilder å¤§æ¦‚ä»‹ç»ã€æš‚ç¼“ã€‘ ","date":"2022-03-20","objectID":"/daily/:3:0","tags":["è®¡åˆ’","plan","æ—¥ç¨‹"],"title":"æ¯æ—¥è§„åˆ’","uri":"/daily/"},{"categories":["daily"],"content":"2022 å¹´ 3 æœˆ 15 æ—¥ å‘¨äºŒ é˜…è¯»ææ–™ https://mp.weixin.qq.com/s/_7ofuy2Wp__3B9esO_2oag https://mp.weixin.qq.com/s/rbPMG4NF1g-xsfJeK0YY5A https://mp.weixin.qq.com/s/M0vJFnXaCawdmVsU8sJf7g å­¦ä¹  Go: channelï¼šhttps://golang.iswbm.com/c04/c04_04.html option ç¼–ç¨‹æ¨¡å¼ï¼šhttps://mp.weixin.qq.com/s/_7ofuy2Wp__3B9esO_2oag Raven: é˜…è¯»ç›¸å…³æºç ï¼Œè¿›ä¸€æ­¥æ¢³ç†å¤§çº² è¿›åº¦: ç¬¬äºŒå¤© ","date":"2022-03-20","objectID":"/daily/:4:0","tags":["è®¡åˆ’","plan","æ—¥ç¨‹"],"title":"æ¯æ—¥è§„åˆ’","uri":"/daily/"},{"categories":["daily"],"content":"2022 å¹´ 3 æœˆ 14 æ—¥ å‘¨ä¸€ é˜…è¯»ææ–™ https://mp.weixin.qq.com/s/d6ur5HEUG3qeXAtFM6eE9A https://mp.weixin.qq.com/s/NjRI7gj8wBZExieWZFdYxw https://mp.weixin.qq.com/s/7uBRYNUAnfqjivKqpQFgRA https://mp.weixin.qq.com/s/yqPOlkjoDZLgfsO1XkaQvg https://mp.weixin.qq.com/s/P7B_H-0Qy7EEoaXTllULbQ è°ƒç ”å†…å®¹ åä¸ºæŠ€æœ¯æŒ‘æˆ˜å¤§èµ› - æµé‡è°ƒåº¦ç›¸å…³å†…å®¹ã€åˆæ­¥äº†è§£äº†é¢˜ç›®ã€‘ å­¦ä¹  é˜…è¯» submariner ç›¸å…³æºç  ã€å·²è½¬å‘çœ‹ Ravenï¼Œæœ‰äº†ä¸€ä¸ä¸ç‚¹è¿›å±•ã€‘ è¿›åº¦ ï¼š ç¬¬ä¸€å¤© ","date":"2022-03-20","objectID":"/daily/:5:0","tags":["è®¡åˆ’","plan","æ—¥ç¨‹"],"title":"æ¯æ—¥è§„åˆ’","uri":"/daily/"},{"categories":["native cloud"],"content":"gRPCè°ƒç ”","date":"2022-05-17","objectID":"/grpc/","tags":["RPC","HTTP2"],"title":"GRPC","uri":"/grpc/"},{"categories":["native cloud"],"content":"åˆæ¢ â€ƒæœ€è¿‘æ¥è§¦åˆ°äº†å¼€æºä¹‹å¤è¿™ä¸ªæ´»åŠ¨ï¼Œå…¶ä¸­æœ‰ä¸ªé¡¹ç›®æ˜¯æ„å»ºä¸€ä¸ªåŸºäº gRPC çš„è½»é‡åŒ–æ’ä»¶æ–¹æ¡ˆã€‚ä¹‹å‰å­¦ä¹  RPC æ—¶æ›¾ç»äº†è§£è¿‡ gRPC çš„ç›¸å…³å†…å®¹ï¼Œå¹¶å°è¯•äº†ç®€å•çš„ demo ç¨‹åºï¼Œä½†æ˜¯æ²¡æœ‰æ·±å…¥çª¥æ¢å…¶å†…åœ¨æœºç†ä¸æ ¸å¿ƒã€‚å€Ÿæ­¤æ¬¡æœºä¼šï¼Œå¯¹ gRPC è¿™ä¸ªå½“ä¸‹å¼‚å¸¸ç«çˆ†çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ç³»ç»Ÿè¿›è¡Œå†æ¢ï¼Œå¸Œæœ›èƒ½å¤Ÿç©¶å…¶æ ¹æœ¬ã€‚ä»¥ä¸‹è®°å½•äº†è¯¥æ¬¡çš„è°ƒç ”å†…å®¹ã€‚ *No silver Bullet* â€‹ æŸ¥è¯¢èµ„æ–™æ—¶ï¼Œå‘ç°äº†ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„è¯â€”â€”â€œé“¶å¼¹â€ã€‚ä¹‹å‰å¥½åƒç¡®å®å¬è¿‡è¿™ä¹ˆä¸€ä¸ªè¯´æ³•ï¼Œåˆå¿½ç„¶è§åˆ°ï¼Œåƒæ˜¯é‡é€¢å´æƒ³ä¸èµ·æ¥å¥¹çš„åå­—ã€‚åªå¥½å°´å°¬åœ°å†é—®ä¸€æ¬¡ï¼šæ‚¨æ˜¯ï¼Ÿå…¶å®â€œSilver Bulletâ€œæ˜¯ Fred Brooks åœ¨ 1987 å¹´å‘è¡¨çš„â€Essence and Accidents of Software Engineeringâ€œè®ºæ–‡æåŠäº†è¯¥è¯´æ³•ã€‚æ·±ç©¶æ¥è¯´ï¼Œè¯¥è¯´æ³•åº”è¯¥æºäºç¾å›½çš„ç‹¼äººæ•…äº‹ï¼Œå³ç‹¼äººä¼šåœ¨æœˆåœ†ä¹‹å¤œå˜èº«ï¼Œè€Œ silver bullet åˆ™æ˜¯å¯ä»¥è¿…é€Ÿ kill ç‹¼äººçš„æ­¦å™¨ã€‚è¿™é‡Œï¼Œé“¶å¼¹å°±è¢«å¼•ç”³æˆâ€œè§£å†³å¤æ‚é—®é¢˜è‰¯æ–¹â€çš„æ„æ€ï¼Œé‚£ä¹ˆä½œè€…å…¶å®æ˜¯è®¤ä¸º\"There is no silver bullet !\" å…·ä½“ä½œè€…ä¸ºå•¥å¦‚æ­¤è¯´ï¼Œä¹‹åå¯èƒ½éœ€è¦å…·ä½“çœ‹çœ‹è®ºæ–‡ä»¥åŠå…¶ã€Šäººæœˆç¥è¯ã€‹äº†ï½ ","date":"2022-05-17","objectID":"/grpc/:1:0","tags":["RPC","HTTP2"],"title":"GRPC","uri":"/grpc/"},{"categories":["native cloud"],"content":"èµ·æº â€‹â€ƒgRPC èµ·æºäºè°·æ­Œ(çœŸæœ‰é‚£ä¹ˆå¼ºå—ï¼Ÿk8s ä¹Ÿæ˜¯)ï¼Œåœ¨æ­¤ä¹‹å‰è°·æ­Œä½¿ç”¨çš„æ˜¯å¦ä¸€ä¸ªå«åš stubby çš„é€šç”¨ RPC æ¡†æ¶ï¼Œç”¨æ¥è¿æ¥å†…éƒ¨è·¨è¶Šæ•°æ®ä¸­å¿ƒçš„ä¼—å¤šå¼‚æ„å¾®æœåŠ¡ï¼Œstubby æ ¸å¿ƒ RPC å±‚æ¯ç§’èƒ½å¤„ç†æ•°ç™¾äº¿æ¬¡çš„è¯·æ±‚ï¼Œä½†æ˜¯ stubby ä¸è°·æ­Œå†…éƒ¨è€¦åˆå¤ªå¼ºï¼Œæ‰€ä»¥è°·æ­Œå¼€æºäº† gRPCâ€”â€”ä¸€ä¸ªç±»ä¼¼äº stubby çš„ RPC æ¡†æ¶ã€‚ï¼ˆä¸ºä½•è¦å¼€æºå†…éƒ¨çš„é¡¹ç›®ï¼Ÿè¿™å¯èƒ½æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—æ¢ç©¶çš„é—®é¢˜ï¼Œå¯¹äºå•†ä¸šä¼ä¸šå¼€æºç©¶ç«Ÿæœ‰ä½•å¥½å¤„ï¼Ÿå¯èƒ½è¿˜éœ€è¦æˆ‘å¤šå¤šæ¥è§¦å¼€æºã€å¤šå¤šæ—å¬æ‰æœ‰æ”¶è·ï¼‰ â€‹â€ƒæ€»ä¹‹ï¼Œ2015 å¹´ gRPC å¼€æºï¼Œè¿™ä¸ª gRPC æ¡†æ¶ç›¸æ¯” stubby æ›´åŠ é€šç”¨ï¼ŒåŒæ—¶å…¼é¡¾è·¨å¹³å°ã€å¯æ‰©å±•ä»¥åŠæ€§èƒ½é«˜æ•ˆç­‰ç­‰ç‰¹ç‚¹ã€‚æ­¤åï¼ŒgRPC å¤§å—æ¬¢è¿ï¼Œå¹¶ä¸”åŠ å…¥äº† CNCFï¼Œä¹Ÿç”±æ­¤è·å¾—äº†å·¨å¤§å‘å±•åŠ¨åŠ›ã€‚ï¼ˆå…¶å® gRPC æ¡†æ¶éå¸¸ç«çƒ­èƒŒåæ²¡å‡†é çš„ä¹Ÿæœ‰è°·æ­ŒèƒŒä¹¦çš„æˆåˆ†ï¼Œæœ€è¿‘ä¹Ÿæœ‰çœ‹åˆ°çŸ¥ä¹è´¾æ‰¬æ¸…çš„å›ç­”ï¼šå›½å†…å¼€æºé¡¹ç›®å¤§å¤šé å¼€æºé¡¹ç›®çš„æ¯å…¬å¸æ¥æ¨åŠ¨ã€è¿è¥ï¼›å›½å¤–å¼€æºé¡¹ç›®å¤§å¤šé ç¤¾åŒºæœ¬èº«ã€é¡¹ç›®è´¡çŒ®è€…ç­‰ç­‰æ¥æ¨åŠ¨å‘å±•ã€‚è¿™é‡Œçœ‹æ¥ä¹Ÿä¸å®Œå…¨è¿™æ ·ï¼Œå¤§å¤šæ•°å¯èƒ½æ›´æ˜¯äºŒè€…çš„ç»“åˆï¼‰ã€‚ Â ","date":"2022-05-17","objectID":"/grpc/:1:1","tags":["RPC","HTTP2"],"title":"GRPC","uri":"/grpc/"},{"categories":["native cloud"],"content":"ä¸€ã€ åŸºæœ¬æ¦‚å¿µ â€‹â€ƒäº†è§£äº† gRPC çš„èµ·æºä¹‹åï¼Œå°±è¯¥å­¦ä¹  gRPC çš„å…·ä½“å†…å®¹å•¦ã€‚é¦–å…ˆï¼ŒgRPC å®è´¨æ˜¯è¿›ç¨‹é—´é€šä¿¡æŠ€æœ¯ï¼Œå¯ä»¥åœ¨åˆ†å¸ƒå¼å¼‚æ„åº”ç”¨é—´è¿›è¡Œè¿œç¨‹æœåŠ¡è°ƒç”¨ï¼Œå°±åƒè°ƒç”¨æœ¬åœ°å‡½æ•°ä¸€æ ·ã€‚åœ¨å¼€å‘ gRPC åº”ç”¨æ—¶ï¼Œéœ€è¦å…ˆå®šä¹‰æœåŠ¡æ¥å£ï¼Œå…¶ä¸­åº”è¯¥åŒ…å«æ¶ˆè´¹è€…æ¶ˆè´¹æœåŠ¡çš„æ–¹å¼ã€æ¶ˆè´¹è€…å¯ä»¥è¿œç¨‹è°ƒç”¨çš„æ–¹æ³•ä»¥åŠè°ƒç”¨è¿™äº›æ–¹æ³•éœ€è¦ä½¿ç”¨çš„å‚æ•°å’Œæ¶ˆæ¯æ ¼å¼ï¼Œå®šä¹‰æœåŠ¡æ‰€ä½¿ç”¨çš„è¯­è¨€ç§°ä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼ˆInterface definition languageï¼ŒIDLï¼‰ã€‚ 1.1 æœåŠ¡å®šä¹‰ â€‹â€ƒgRPC ä½¿ç”¨protocol buffersä½œä¸º IDL æ¥å®šä¹‰æ¥å£æœåŠ¡ã€‚Protocol buffersæ˜¯ä¸€ç§è¯­è¨€ä¸­ç«‹ã€å¹³å°æ— å…³ä»¥åŠæ•°æ®ç»“æ„åŒ–çš„æ•°æ®åºåˆ—åŒ–æœºåˆ¶ï¼ˆåºåˆ—åŒ–å…¶å®å°±æ˜¯å°†å†…å­˜ä¸­çš„å˜é‡å˜ä¸ºå¯å­˜å‚¨æˆ–å¯ä¼ è¾“çš„è¿‡ç¨‹ï¼‰ã€‚å…¶å®è¿™é‡Œè¿˜å¯¹åº”äº†marshalä¸unmarshalä¸¤ä¸ªåŠ¨ä½œï¼Œmarshalæ˜¯å°† RPC çš„è¯·æ±‚è½¬æ¢æˆå¯¹åº”çš„ pb æ ¼å¼ï¼›unmarshalå°†ç›¸åº”çš„äºŒè¿›åˆ¶ pb åˆè½¬æ¢æˆè¿‡ç¨‹è°ƒç”¨ã€‚ â€‹â€ƒæœåŠ¡æ¥å£ä¸€èˆ¬å®šä¹‰åœ¨protoæ–‡ä»¶ä¸­ï¼ŒåŒæ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ gRPC ç›¸å…³çš„æ’ä»¶æ¥æ ¹æ®protoæ–‡ä»¶ç”Ÿæˆä»£ç ï¼Œgo ä¸€èˆ¬å¯ä»¥ä½¿ç”¨å·¥å…·protoc-gen-goã€‚æ­¤å¤–åœ¨æœåŠ¡å®šä¹‰æ—¶ï¼Œç”¨æˆ·å®šä¹‰çš„ç±»å‹ä¸­æ¯ä¸ªå­—æ®µéƒ½éœ€è¦å…·æœ‰å”¯ä¸€çš„ç¼–å·åï¼ˆæ¯”å¦‚ string id = 1ï¼‰ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯åœ¨äºŒè¿›åˆ¶å½¢å¼çš„æ¶ˆæ¯ä¸­ï¼Œå¯ä»¥é€šè¿‡ç¼–å·æ¥è¯†åˆ«ç›¸åº”çš„å­—æ®µã€‚ // ç»“æ„ä¸€èˆ¬å¦‚ä¸‹ syntax = \"proto3\"; // ä¸€èˆ¬é‡‡ç”¨version 3 package ... // å¯ä»¥é€šè¿‡åŒ…åæ¥é˜²æ­¢åè®®æ¶ˆæ¯ç±»å‹ä¹‹é—´å‘ç”Ÿå‘½åå†²çª service foo { rpc add(Bar) returns (BarID); rpc get(BarID) returns (Bar);}message Bar { string id = 1; string name = 2;}message BarID { string value = 1;} Â 1.2 åŸºæœ¬æµç¨‹ æœåŠ¡ç«¯ å®ç° gRPC æœåŠ¡æ¥å£ï¼Œç”ŸæˆæœåŠ¡ç«¯ skeleton çš„é€»è¾‘ã€‚ æ³¨å†ŒæœåŠ¡åˆ° gRPC æœåŠ¡å™¨ã€‚ è¿è¡Œ gRPC æœåŠ¡å™¨ï¼Œç›‘å¬æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚å¹¶è¿”å›å“åº”ã€‚ å®¢æˆ·ç«¯ å»ºç«‹ä¸è¿œç¨‹æœåŠ¡å™¨çš„è¿æ¥ å°†å®¢æˆ·ç«¯ stub ä¸ gRPC è¿æ¥å…³è” é€šè¿‡å®¢æˆ·ç«¯ stub è°ƒç”¨è¿œç¨‹æ–¹æ³• Â ","date":"2022-05-17","objectID":"/grpc/:1:2","tags":["RPC","HTTP2"],"title":"GRPC","uri":"/grpc/"},{"categories":["native cloud"],"content":"äºŒã€ å¯¹æ¯”æ–¹æ¡ˆ â€‹â€ƒgRPC è™½è¯´æ„Ÿè§‰éå¸¸é«˜å¤§ä¸Šï¼Œå…¶å®ä¹Ÿåªæ˜¯ä¼—å¤šè¿›ç¨‹é—´é€šä¿¡æ–¹å¼çš„ä¸€ç§ï¼Œå¦‚æœæƒ³æ›´å¥½çš„ç†è§£ What gRPCã€Why gRPHã€How gRPCï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯çœ‹çœ‹ç±»ä¼¼çš„è§£å†³æ–¹æ¡ˆã€‚åˆšå¥½ç½‘ä¸Šå…³äºå¯¹æ¯”è§£å†³æ–¹æ¡ˆçš„ä»‹ç»ä¹Ÿå¾ˆå¤šï¼Œå°±å¤§æ¦‚æµè§ˆä¸€ä¸‹ã€‚ 2.1 REST â€‹â€ƒæè¿°æ€§çŠ¶æ€è¿ç§»ï¼ˆRepresentational state transferï¼ŒRESTæœ€æ—©ç”± Roy Fielding çš„åšå£«è®ºæ–‡æå‡ºï¼Œæ˜¯ä¸€ç§é¢å‘èµ„æºçš„æ€æƒ³ã€‚ä½¿ç”¨ REST çš„ç³»ç»Ÿä¸­ï¼Œå°†åº”ç”¨ç¨‹åºå»ºæ¨¡æˆèµ„æºçš„é›†åˆï¼Œå®¢æˆ·ç«¯å¯ä»¥æŸ¥è¯¢ã€å˜æ›´è¿™äº›èµ„æºçš„çŠ¶æ€ã€‚ â€‹â€ƒåœ¨å¸¸è§çš„ä¸šç•Œè§£å†³æ–¹æ¡ˆä¸­ï¼ŒRESTful/HTTP + JSON æ˜¯ä¸€ç§æ ‡å‡†çš„æœåŠ¡æä¾›æ–¹å¼ã€‚èµ„æºçš„æ“ä½œå¯ä»¥é€šè¿‡ HTTP ç›¸å…³æ“ä½œï¼ˆGETã€POSTã€PUTã€DELETEã€PATCHï¼‰æä¾›ï¼Œåª’ä½“ç±»å‹ï¼ˆMIMEï¼‰å¯ä»¥æœ‰ JSONã€XMLã€YAML ç­‰ç­‰ã€‚ â€‹â€ƒè™½ç„¶ RESTful+JSON é£æ ¼çš„æœåŠ¡æ–¹å¼å·²ç»éå¸¸æˆç†Ÿä¸”å¸¸è§ï¼Œä½†æ˜¯ç¡®å®ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œè€Œè¿™ä¹Ÿæ˜¯ gRPC æˆ–è€… RPC æ¡†æ¶é€æ¸è¢«åº”ç”¨çš„åŸå› ä¹‹ä¸€ã€‚ä»¥ä¸‹è°ƒç ”äº†ä¸€äº›å¸¸è§çš„ç¼ºé™·ï¼š (1) æ¶ˆæ¯ä¼ é€’ä½æ•ˆ â€‹â€ƒRESTful é£æ ¼çš„æœåŠ¡æ˜¯åŸºäº HTTP çš„æ–‡æœ¬ä¼ è¾“åè®®ï¼Œè¿™äº›ä¼ è¾“ä¿¡æ¯è™½ç„¶é‡‡ç”¨çš„æ˜¯å¯è¯»çš„æ–‡æœ¬æ ¼å¼ï¼Œä½†æ˜¯å¯¹äºä¿¡æ¯çš„ä¼ è¾“è€Œè¨€ï¼Œå¯è¯»æ€§å´æ˜¯ä¸€é¡¹æ— ç”¨çš„åŠŸèƒ½ã€‚é‡‡ç”¨æ–‡æœ¬åŒ–çš„æ ¼å¼ï¼Œæ˜¯å¯¼è‡´æ¶ˆæ¯ä¼ é€’ä½æ•ˆçš„é‡è¦åŸå› ã€‚ (2) ç¼ºä¹å¼ºç±»å‹æ¥å£ â€‹â€ƒå¾®æœåŠ¡ä¹‹é—´å¯ä»¥é€šè¿‡ RESTful é£æ ¼çš„æ¥å£è¿›è¡Œäº¤äº’ï¼Œä½†æ˜¯ RESTful æœåŠ¡å´æ²¡æœ‰å®šä¹‰å¼ºç±»å‹çš„æœåŠ¡æ¥å£ã€‚é€šä¿—æ¥è¯´ï¼ŒæœåŠ¡çš„æä¾›è€…ä¸æœåŠ¡çš„æ¶ˆè´¹è€…éœ€è¦â€œå¯¹æ¥å£â€ï¼Œè¿™ä¸€ç‚¹æˆ‘çš„æ„Ÿå—æ˜¯éå¸¸å¼ºçƒˆçš„ï¼Œæœ€è¿‘ä¹Ÿåœ¨è¿›è¡Œä¸€ä¸ªå‰åç«¯äº¤äº’çš„ Web é¡¹ç›®ï¼Œå…¶ä¸­å°±æ¶‰åŠåˆ°å¤§é‡çš„å‰åç«¯æ¥å£å¯¹æ¥ã€‚æˆ‘ä»¬é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨ä¸€äº›æ¥å£å®šä¹‰æ–¹æ¡ˆ(OpenAPI/Swagger)ä»¥åŠæ¥å£ç®¡ç†å·¥å…·(Apifoxã€yapi)ç­‰ç­‰ï¼Œæ€»çš„ä½¿ç”¨æ„Ÿè§‰å°±æ˜¯éœ€è¦èŠ±è´¹å­¦ä¹ æ—¶é—´ã€æ’°å†™æ–‡æ¡£æ—¶é—´ä»¥åŠæ²Ÿé€šäº¤æµæ—¶é—´ã€‚ã€Šgrpc ä¸äº‘åŸç”Ÿåº”ç”¨å¼€å‘ã€‹ä¸­è¯´çš„éå¸¸å¥½ï¼Œâ€œRESTful å¹¶æ²¡æœ‰ä¸åº•å±‚çš„æ¶æ„é£æ ¼æˆ–æ¶ˆæ¯åè®®ç´§å¯†é›†æˆåœ¨ä¸€èµ·â€ã€‚å…¶å® Swagger ä»¥åŠç›¸å…³æ¥å£ç®¡ç†å·¥å…·éƒ½æ˜¯ä¸€ç§äº‹åè¡¥æ•‘çš„æªæ–½ï¼Œæ¥è§„åˆ™æ¥å£çš„ç±»å‹å®šä¹‰ã€‚ Â 2.2 Thrift â€‹â€ƒApache Thrift æ˜¯ç±»ä¼¼ gRPC çš„ RPC æ¡†æ¶ï¼Œç”± Facebook å¼€å‘ï¼ŒåæœŸæèµ ä¸ Apacheã€‚Thrift æœ‰ç›¸åº”çš„æ¥å£å®šä¹‰è¯­è¨€åŒæ—¶æä¾›äº†å¤šç¼–ç¨‹è¯­è¨€çš„æ”¯æŒã€‚å¯ä»¥åœ¨æ–‡ä»¶ä¸­å®šä¹‰æ•°æ®ç±»å‹å’ŒæœåŠ¡æ¥å£ï¼ŒåŒæ ·æ”¯æŒç”Ÿæˆå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä»£ç ï¼ˆå¯ä»¥å‘ç° Thrift ä¸ gRPC å…¶å®åœ¨æŸäº›æ–¹é¢éå¸¸ç›¸ä¼¼ï¼Œæ˜¯å¦æ„å‘³ç€ç°ä»£çš„ RPC æ¡†æ¶éƒ½éœ€è¦å…·æœ‰è¿™äº›åŠŸèƒ½æˆ–è€…ç‰¹ç‚¹ï¼‰ã€‚ â€‹â€ƒThrift ç‹¬ç‰¹çš„åœ°æ–¹åœ¨äºå…¶ä¼ è¾“å±‚ä¸ºç½‘ç»œ I/O æä¾›äº†æŠ½è±¡ï¼Œå¯ä»¥å°† Thrift ä»ç³»ç»Ÿä¸­å…¶ä»–ç»„ä»¶ä¸­è§£è—•ï¼Œå¯ä»¥åœ¨ä»»æ„çš„ä¼ è¾“å®ç°ä¸Šè¿è¡Œï¼Œå¦‚ TCPã€HTTP ç­‰ã€‚ Â 2.3 GraphQL â€‹â€ƒè¿™æ˜¯æˆ‘ç¬¬äºŒæ¬¡å¬è¯´ GraphQL è¿™ä¸ªé¡¹ç›®ï¼Œç¬¬ä¸€æ¬¡æ˜¯å¬è¯´ï¼Œç¬¬äºŒæ¬¡æ˜¯å‘ç°è¯¥é¡¹æŠ€æœ¯å¯ä»¥ç”¨åœ¨è¿›ç¨‹é—´é€šä¿¡ã€‚è€Œä¸”ï¼ä¼¼ä¹è¿™é¡¹æŠ€æœ¯çš„åº”ç”¨é€æ¸æ‰©å¤§åŒ–ï¼Œçœ‹æ¥è§è¯†è¿˜æ˜¯çŸ­æµ…äº†ã€‚è¯¥é¡¹ç›®åŒæ ·æ˜¯ Facebook å‘èµ·å¹¶å¼€æºæ ‡å‡†åŒ–çš„é¡¹ç›®ï¼Œè¿™æ˜¯ä¸€é—¨é’ˆå¯¹ API çš„æŸ¥è¯¢è¯­è¨€ã€‚ â€‹â€ƒGraphQL æä¾›äº†ä¸€ç§å…è®¸å®¢æˆ·ç«¯å®šä¹‰å¸Œæœ›è·å¾—çš„æ•°æ®ã€è·å–æ•°æ®çš„æ–¹å¼ä»¥åŠæ•°æ®æ ¼å¼çš„æ–¹æ³•ã€‚ç”±äºæ—¶é—´çš„é™åˆ¶ï¼Œä»…ä»…æ˜¯å¯¹è¯¥é¡¹ç›®å®˜ç½‘è¿›è¡Œç®€å•çš„äº†è§£ï¼ŒåæœŸå¯ä»¥è¿›è¡Œç›¸å…³å®éªŒï¼Œæ·±å…¥æŸ¥çœ‹ä¸€ç•ªã€‚ â€‹â€ƒæ ¹æ®ç›¸å…³ä»‹ç»ï¼ŒGraphQL æ›´é€‚åˆé¢å‘å¤–éƒ¨çš„æœåŠ¡æˆ–è€… APIï¼Œè¿™æ˜¯å…¶æ¯”è¾ƒç‰¹æ®Šçš„ç‰¹æ€§ã€‚ Â 2.4 gRPC ä¼˜åŠ¿ â€‹â€ƒå…¶å®ä¹Ÿæœ‰ä¸€äº›å¸¸è§çš„å…¶ä»– RPC æ¡†æ¶ï¼Œä¹Ÿæœ‰å¤§æ¦‚æµè§ˆä¸€ä¸‹ï¼Œä½†æ˜¯æ²¡æœ‰æ·±å…¥äº†è§£ï¼Œå°±æš‚æ—¶åªå¯¹æ¯”äº† REST ä¸ gRPC è¿™ä¸¤ä¸ªåŠŸèƒ½ç›¸ä¼¼å´åˆä¸å¤ªä¸€æ ·çš„æ–¹æ¡ˆã€‚ä»ä¸­å…¶å®å¯ä»¥å‘ç° gRPC å­˜åœ¨çš„ä¸€äº›éå¸¸æ˜¾è‘—çš„ä¼˜åŠ¿ã€‚ (1) é€šä¿¡æ•ˆç‡é«˜ â€‹â€ƒæ•ˆç‡é«˜æ˜¯ gRPC æ¡†æ¶çš„ä¸€ä¸ªæ˜¾è‘—ä¼˜ç‚¹ï¼Œé‡‡ç”¨protocol buffersçš„äºŒè¿›åˆ¶æ–¹æ¡ˆï¼Œå¹¶ä¸”åŸºäº HTTP/2 é€šä¿¡ã€‚ (2) æœåŠ¡æ¥å£ç®€å• â€‹â€ƒgRPC é€šè¿‡protoæ–‡ä»¶é¢„å…ˆå®šä¹‰æœåŠ¡æ¥å£ä»¥åŠæ¶ˆæ¯ç±»å‹ï¼Œä¹‹åæ‰èƒ½è¿›è¡Œå…·ä½“é€»è¾‘çš„å¼€å‘ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ gRPC æä¾›äº†ç®€å•ä¸”å¼ºç±»å‹çš„æ¥å£æ¨¡å¼ã€‚ (3) æ”¯æŒå¤šè¯­è¨€ â€‹â€ƒè¿™å¯èƒ½ä¸ç®—æ˜¯ä¸€ä¸ªç‰¹åˆ«çš„ä¼˜åŠ¿ï¼Œæ¯”å¦‚å¤§å¤šæ•°çš„ RPC æ¡†æ¶ä»¥åŠ RESTful æ¶æ„ç­‰éƒ½æ”¯æŒå¤šè¯­è¨€ã€‚å¯èƒ½æ—©æœŸçš„ java-dubbo ç­‰åªæ”¯æŒ java è¯­è¨€ã€‚ (4) æ”¯æŒåŒå·¥æµ â€‹â€ƒåŸºäº HTTP/2 çš„ä¼ è¾“åè®®ï¼ŒgRPC åœ¨æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯åŸç”Ÿæ”¯æŒæµï¼Œå¯ä»¥æ–¹ä¾¿çš„å¼€å‘æµæœåŠ¡æˆ–æµå®¢æˆ·ç«¯ã€‚ Â 2.5 gRPC åŠ£åŠ¿ (1) ä¸é€‚åˆé¢å‘å¤–éƒ¨çš„æœåŠ¡ â€‹â€ƒgRPC ç”±äºå¼ºç±»å‹çš„æ¥å£æœåŠ¡çº¦æŸï¼Œé™åˆ¶äº†æš´éœ²æœåŠ¡çš„çµæ´»æ€§ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒgRPC æ›´é€‚åˆç³»ç»Ÿå†…éƒ¨çš„æœåŠ¡äº¤äº’ï¼Œè€Œå¯¹å¤–æš´éœ²æœåŠ¡å¯èƒ½æ›´é€‚åˆé€šè¿‡ REST æˆ–è€… GraphQL çš„æ–¹å¼è¿›è¡Œã€‚ä¸¥æ ¼çš„æ¥è¯´ï¼Œè¿™å¹¶ä¸ç®—æ˜¯ gRPC çš„é—®é¢˜ï¼Œåªæ˜¯åº”ç”¨åœºæ™¯çš„é™åˆ¶ç½¢äº†ï¼Œæœ€å¤šå¯ä»¥è¯´æ˜¯å…¨é¢æ€§ä¸å¤Ÿã€‚ (2) æœåŠ¡å®šä¹‰å˜æ›´å¤æ‚ â€‹â€ƒç”±äº gRPC æœåŠ¡å®šä¹‰çš„å˜æ›´ï¼Œå¯èƒ½éœ€è¦é‡æ–°ç”ŸæˆæœåŠ¡ç«¯ä»¥åŠå®¢æˆ·ç«¯çš„ä»£ç ï¼Œè¿›è€Œå½±å“åˆ°ä¸šåŠ¡é€»è¾‘ç”šè‡³æ˜¯æ•´ä¸ªå¼€å‘ç¯å¢ƒï¼Œå› æ­¤æœåŠ¡å®šä¹‰å˜æ›´æ˜¯ä¸€ä»¶æ¯”è¾ƒæ£˜æ‰‹æˆ–è€…å¤æ‚çš„äº‹æƒ…ã€‚ä½†æ˜¯ï¼Œé€šè¿‡å‰æœŸä¸¥æ ¼è§„èŒƒã€åæœŸç¦æ­¢ç ´åæ€§å˜æ›´ä»¥åŠé€šè¿‡ç‰ˆæœ¬å‡çº§è§„é¿å˜æ›´çš„æ–¹å¼å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡è½»æœåŠ¡å®šä¹‰å˜æ›´å¸¦æ¥çš„é—®é¢˜ã€‚ Â ","date":"2022-05-17","objectID":"/grpc/:1:3","tags":["RPC","HTTP2"],"title":"GRPC","uri":"/grpc/"},{"categories":["native cloud"],"content":"ä¸‰ã€ é€šä¿¡æ¨¡å¼ (1) ä¸€å…ƒ RPC æ¨¡å¼ â€‹â€ƒè¯¥æ¨¡å¼ä¸‹ï¼Œå®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡ç«¯çš„è¿œç¨‹æ–¹æ³•æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€è¯·æ±‚è‡³æœåŠ¡ç«¯å¹¶è·å–ä¸€ä¸ªå“åº”ã€‚åŸºç¡€å†…å®¹ä¸­ä»‹ç»çš„å°±æ˜¯ä¸€å…ƒ RPC æ¨¡å¼ï¼Œä¸å†é‡å¤ã€‚ (2) æœåŠ¡ç«¯ã€å®¢æˆ·ç«¯å•å‘æµæ¨¡å¼ â€‹â€ƒè¯¥ç±»æ¨¡å¼ä¸‹ï¼ŒæœåŠ¡ç«¯æµåˆ™å¯ä»¥åœ¨æ¥å—åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚åï¼Œå‘é€å¤šä¸ªå“åº”ï¼›å®¢æˆ·ç«¯æµå¯ä»¥å‘é€å¤šä¸ªè¯·æ±‚ã€‚å•å‘æµæ¨¡å¼ä¸‹ï¼Œéœ€è¦åœ¨ rpc æœåŠ¡å®šä¹‰ä¸­å¢åŠ å…³é”®å­—stream service foo1 { rpc add(...) returns (stream ...)}// æˆ– service foo2 { rpc add(stream ...) returns (...)} å•å‘æµæ¨¡å¼ä¸­ï¼Œå¯ä»¥é€šè¿‡stream.Send()æ–¹æ³•å‘é€æµæ¶ˆæ¯ï¼Œé€šè¿‡stream.Recv()æ–¹æ³•æ¥æ¥å—æµæ¶ˆæ¯ï¼Œé€šè¿‡return nilæ¥æ ‡è®°æµç»“æŸå¹¶åœ¨æ¥å—ç«¯é€šè¿‡err == io.EOFåˆ¤æ–­æµçš„ç»“æŸ å¯¹äºæœåŠ¡ç«¯æµæ¨¡å¼ï¼Œä¸€å®šæ˜¯åœ¨æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åæ‰å¯ä»¥å‘é€æµï¼›è€Œå¯¹äºå®¢æˆ·ç«¯æµæ¨¡å¼ï¼ŒæœåŠ¡ç«¯ä¸ä¸€å®šè¦ç­‰åˆ°ä»å®¢æˆ·ç«¯æ¥å—æ‰€æœ‰çš„æµæ¶ˆæ¯åæ‰å‘é€å“åº”ï¼Œåœ¨æ”¶åˆ°ä»»æ„æ•°é‡æµæ¶ˆæ¯åå‡å¯ä»¥é€šè¿‡stream.SendAndClose()æ–¹æ³•å“åº”ã€‚ (3) åŒå‘æµ RPC æ¨¡å¼ â€‹ åœ¨åŒå‘æµ RPC æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯ä»¥æ¶ˆæ¯æµçš„å½¢å¼å‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¹Ÿä»¥æ¶ˆæ¯æµçš„å½¢å¼è¿›è¡Œå“åº”ï¼Œä½†æ˜¯è°ƒç”¨å¿…é¡»ç”±å®¢æˆ·ç«¯å‘èµ·ã€‚å› æ­¤ï¼ŒåŒå‘æµ RPC æ˜¯ä¸€ç§æ¯”è¾ƒå¤æ‚ä½†æ˜¯å¾ˆçµæ´»çš„é€šä¿¡æ–¹å¼ï¼Œå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚åï¼ŒåŒæ–¹å¯ä»¥é€šè¿‡ä»»æ„çš„äº¤äº’é¡ºåºé€šä¿¡ï¼Œè¿™ä¸»è¦å–å†³äºé€»è¾‘ä»£ç çš„å®šä¹‰ï¼Œå¹¶ä¸”åŒæ–¹ä¹Ÿéƒ½å¯ä»¥åœ¨ä»»æ„æ—¶é—´å…³é—­æµå¹¶å‘ŠçŸ¥å¯¹æ–¹ã€‚ Â ","date":"2022-05-17","objectID":"/grpc/:1:4","tags":["RPC","HTTP2"],"title":"GRPC","uri":"/grpc/"},{"categories":["native cloud"],"content":"å››ã€åº•å±‚åŸç† ","date":"2022-05-17","objectID":"/grpc/:1:5","tags":["RPC","HTTP2"],"title":"GRPC","uri":"/grpc/"},{"categories":["native cloud"],"content":"äº”ã€ ç›¸å…³é…ç½® æ‹¦æˆªå™¨ æˆªæ­¢æ—¶é—´ã€å–æ¶ˆ å¤šè·¯å¤ç”¨ å®‰å…¨æ€§ è´Ÿè½½å‡è¡¡ ","date":"2022-05-17","objectID":"/grpc/:1:6","tags":["RPC","HTTP2"],"title":"GRPC","uri":"/grpc/"},{"categories":["native cloud"],"content":"å…­ã€ å…¶ä»– https://zh.wikipedia.org/wiki/%E4%BA%BA%E6%9C%88%E7%A5%9E%E8%AF%9D https://doc.oschina.net/grpc?t=58008 https://developers.google.com/protocol-buffers https://www.ruanyifeng.com/blog/2011/09/restful.html https://cloud.tencent.com/developer/article/1845449 https://grpc.io/docs/languages/go/quickstart/ https://juejin.cn/post/6984961473378271245 https://thrift.apache.org/ https://graphql.cn/learn/ ","date":"2022-05-17","objectID":"/grpc/:1:7","tags":["RPC","HTTP2"],"title":"GRPC","uri":"/grpc/"},{"categories":["go"],"content":"go è¯»å†™é”RWMutexçš„ä¼˜å…ˆçº§ä¸ç›¸å…³é—®é¢˜ https://zhuanlan.zhihu.com/p/349590549 https://www.techclone.cn/post/tech/go/go-rwlock/#%E5%8F%82%E8%80%83 ","date":"2022-04-02","objectID":"/go%E8%AF%BB%E5%86%99%E9%94%81/:1:0","tags":["go","åŒæ­¥","é”","è¯»å†™é”"],"title":"Goè¯»å†™é”","uri":"/go%E8%AF%BB%E5%86%99%E9%94%81/"},{"categories":["go"],"content":"ä¸€ã€ å‰æƒ…æè¦ https://golang.iswbm.com/c04/c04_06.html å­¦ä¹ RWMutexé”æ—¶ï¼Œçœ‹ä¾‹å­ä»£ç ï¼Œå‘ç°å¯¹ä¼˜å…ˆçº§äº§ç”Ÿå›°æƒ‘ package main import ( \"fmt\" \"sync\" \"time\" ) func main() { lock := \u0026sync.RWMutex{} lock.Lock() for i := 0; i \u003c 4; i++ { go func(i int) { fmt.Printf(\"ç¬¬ %d ä¸ªåç¨‹å‡†å¤‡å¼€å§‹... \\n\", i) lock.RLock() fmt.Printf(\"ç¬¬ %d ä¸ªåç¨‹è·å¾—è¯»é”, sleep 1s åï¼Œé‡Šæ”¾é”\\n\", i) time.Sleep(time.Second) lock.RUnlock() }(i) } time.Sleep(time.Second * 2) fmt.Println(\"å‡†å¤‡é‡Šæ”¾å†™é”ï¼Œè¯»é”ä¸å†é˜»å¡\") // å†™é”ä¸€é‡Šæ”¾ï¼Œè¯»é”å°±è‡ªç”±äº† lock.Unlock() // ç”±äºä¼šç­‰åˆ°è¯»é”å…¨éƒ¨é‡Šæ”¾ï¼Œæ‰èƒ½è·å¾—å†™é” // å› ä¸ºè¿™é‡Œä¸€å®šä¼šåœ¨ä¸Šé¢ 4 ä¸ªåç¨‹å…¨éƒ¨å®Œæˆæ‰èƒ½å¾€ä¸‹èµ° lock.Lock() fmt.Println(\"ç¨‹åºé€€å‡º...\") lock.Unlock() } ä¸»è¦å›°æƒ‘åœ¨äºç¬¬ 16 è¡Œçš„Rlock()è¯»é”å’Œç¬¬ 31 è¡Œçš„Lock()å†™é”çš„ä¼˜å…ˆçº§ä¸åŒå‘¢ï¼Ÿ Lock()æ€»æ˜¯åœ¨Lock()ä¹‹å‰è·å¾—é” 1. åŸå› åˆ†æ è¯·æ•™äº†æŠ€æœ¯äº¤æµç¾¤ï¼Œâ€œgolang æ¢¦å·¥å‚ç¾¤â€ä¸­æœ‰ç¾¤å‹ç»™å‡ºäº†è¯»å†™é”ä¼˜å…ˆçº§é—®é¢˜çš„åšå®¢ https://www.techclone.cn/post/tech/go/go-rwlock/#%E5%8F%82%E8%80%83 è‡ªæˆ‘åˆ†æ go è®¾è®¡ä¸­è¯»é”æ—¶ä¼˜äºå†™é”çš„ go è®¾è®¡ä¸­è¯»é”å†™é”å…¬ç”¨ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œ16 è¡Œçš„è¯»é”å…ˆå…¥é˜Ÿï¼Œæ‰€ä»¥ä¼˜å…ˆè·å¾—é” 2. ä»£ç ä¿®æ”¹æµ‹è¯• æ”¹åŠ¨äº†æ ¸å¿ƒä»£ç å‘ç°å­˜åœ¨é—®é¢˜ è¯´æ˜å¹¶ä¸ä¸€å®šæ˜¯ä¸€ä¸ªç»Ÿä¸€çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œä¸ç„¶ 4 åç¨‹åº”è¯¥åœ¨â€œç¨‹åºé€€å‡ºâ€åç¨‹ä¹‹å‰è·å¾—é” æ­¤å¤„è¿˜å­˜åœ¨é—®é¢˜ï¼Œä¸ºå•¥â€œç¨‹åºé€€å‡ºâ€ä¹‹åï¼Œ4 åç¨‹è¿˜ä¼šè¿è¡Œï¼Ÿ è¯´æ˜çœŸçš„ä¸æ˜¯å­˜åœ¨ç»Ÿä¸€çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œä½†æ˜¯ä¸ºå•¥è¿™é‡Œæ˜¯ä¼šç›´æ¥è¿è¡Œâ€œç¨‹åºé€€å‡ºâ€ä¹‹åå°±é€€å‡ºäº†å‘¢ï¼Ÿè€Œä¸è¿è¡Œå…¶ä»–åç¨‹äº† ","date":"2022-04-02","objectID":"/go%E8%AF%BB%E5%86%99%E9%94%81/:1:1","tags":["go","åŒæ­¥","é”","è¯»å†™é”"],"title":"Goè¯»å†™é”","uri":"/go%E8%AF%BB%E5%86%99%E9%94%81/"},{"categories":["go"],"content":"äºŒã€ è¯»å†™é”ä¼˜å…ˆçº§é—®é¢˜ 2.1 è¯»ä¼˜å…ˆ è¯»è€…æ¥ æ— è¯»è€…ï¼Œæ— å†™è€… ï¼šæ–°è¯»è€…å¯è¯» æœ‰è¯»è€…è¯»ï¼Œæ— å†™è€… ï¼š æ–°è¯»è€…å¯è¯» æœ‰è¯»è€…è¯»ï¼Œæœ‰å†™è€…ç­‰ ï¼š æ–°è¯»è€…å¯è¯» æ— è¯»è€…ï¼Œæœ‰å†™è€…å†™ ï¼š æ–°è¯»è€…ç­‰ å†™è€…æ¥ æ— è¯»è€…ï¼Œæ— å†™è€… ï¼š æ–°å†™è€…å†™ æœ‰è¯»è€…ï¼Œæ— å†™è€… ï¼š æ–°å†™è€…ç­‰ æ— è¯»è€…ï¼Œæœ‰å†™è€… ï¼š æ–°å†™è€…ç­‰ æ ¸å¿ƒæ€æƒ³æ˜¯æœ‰è¯»è€…è¯»ï¼Œæ–°è¯»è€…å°±å¯ä»¥ä¸€ç›´è¯»ï¼Œå†™è€…å°±è¦ä¸€ç›´ç­‰å¾… 2.2 å†™ä¼˜å…ˆ è¯»è€…æ¥ æ— è¯»è€…ï¼Œæ— å†™è€… ï¼š æ–°è¯»è€…è¯» æœ‰è¯»è€…è¯»ï¼Œæ— å†™è€… ï¼š æ–°è¯»è€…è¯» æœ‰è¯»è€…è¯»ï¼Œæœ‰å†™è€…ç­‰ ï¼š æ–°è¯»è€…ç­‰ æ— è¯»è€…ï¼Œæœ‰å†™è€…å†™ ï¼š æ–°è¯»è€…ç­‰ å†™è€…æ¥ æ— è¯»è€…ï¼Œæ— å†™è€… ï¼š æ–°å†™è€…å†™ æœ‰è¯»è€…ï¼Œæ— å†™è€… ï¼š æ–°å†™è€…ç­‰ æœ‰å†™è€…æˆ–æœ‰å†™è€…ç­‰ ï¼š æ–°å†™è€…ç­‰ æ ¸å¿ƒæ€æƒ³å°±æ˜¯åœ¨æœ‰è¯»è€…è¯»ä¸”æœ‰å†™è€…ç­‰æ—¶ï¼Œå¦‚æœæœ‰æ–°çš„è¯»è€…æ¥ï¼Œè¿™æ—¶æ˜¯ä¸è®©è¯»çš„ï¼Œéœ€è¦ç­‰å¾… ","date":"2022-04-02","objectID":"/go%E8%AF%BB%E5%86%99%E9%94%81/:1:2","tags":["go","åŒæ­¥","é”","è¯»å†™é”"],"title":"Goè¯»å†™é”","uri":"/go%E8%AF%BB%E5%86%99%E9%94%81/"},{"categories":["go"],"content":"ä¸‰ã€ RWMutex æºç åˆ†æ 3.1 å­—æ®µå®šä¹‰ type RWMutex struct { w Mutex // å†™é”çš„äº’æ–¥é‡ writerSem uint32 // writerä¿¡å·é‡ï¼Œæ²¡æœ‰è¯»é”åé‡Šæ”¾è¯¥ä¿¡å·é‡ readerSem uint32 // readerä¿¡å·é‡ï¼Œæ²¡æœ‰å†™é”åé‡Šæ”¾è¯¥ä¿¡å·é‡ readerCount int32 // å½“å‰è¯»é”çš„æ•°é‡ï¼ŒåŒ…æ‹¬å·²ç»åŠ é”çš„è¯»é”æ•°é‡ä»¥åŠç­‰å¾…åŠ é”çš„è¯»é”æ•°é‡ readerWait int32 // å†™é”é˜»å¡æ—¶ï¼Œactiveçš„è¯»é”æ•°é‡ } const rwmutexMaxReaders = 1 \u003c\u003c 30 // æœ€å¤§çš„è¯»é”æ•°é‡ä¸Šé™ 3.2 Rlock() func (rw *RWMutex) RLock() { if atomic.AddInt32(\u0026rw.readerCount, 1) \u003c 0 { runtime_SemacquireMutex(\u0026rw.readerSem, false, 0) } } è¯»é”è¯·æ±‚åŠ é”æ—¶ï¼Œå…³é”®æ˜¯åˆ¤æ–­readerCountåŠ ä¸€åæ˜¯å¦è¿˜å°äº 0ï¼Œå¦‚æœè¿˜å°äº 0ï¼Œè¯´æ˜å­˜åœ¨å†™é”ï¼Œåˆ™è¯»é”è¯·æ±‚é˜»å¡ 3.3 RUlock() func (rw *RWMutex) RUnlock() { if r := atomic.AddInt32(\u0026rw.readerCount, -1); r \u003c 0 { rw.rUnlockSlow(r) } } func (rw *RWMutex) rUnlockSlow(r int32) { if atomic.AddInt32(\u0026rw.readerWait, -1) == 0 { // æœ€åä¸€ä¸ªreaderäº†ï¼Œwriterç»ˆäºæœ‰æœºä¼šè·å¾—é”äº† runtime_Semrelease(\u0026rw.writerSem, false, 1) } } è§£é”å°±æ˜¯å°† readerCount-1ï¼Œå¦‚æœå‡å®Œå‘ç°å°äº 0ï¼Œè¯´æ˜æœ‰å†™é”è¯·æ±‚åœ¨ç­‰å¾…ï¼Œå°±éœ€è¦è°ƒç”¨rUnlockSlow()æ¥é‡Šæ”¾readerWait rUnlockSlowä¸»è¦åŠŸèƒ½æ˜¯å°†readerWait-1,å¦‚æœå‘ç°readerWait==0 è¯´æ˜å·²ç»æ²¡æœ‰ active çš„è¯»é”ï¼Œåˆ™å¯ä»¥é‡Šæ”¾writerSemä¿¡å·é‡ï¼Œå”¤é†’é˜»å¡çš„å†™é”è¯·æ±‚è¿›ç¨‹ 3.4 Lock() func (rw *RWMutex) Lock() { rw.w.Lock() r := atomic.AddInt32(\u0026rw.readerCount, -rwmutexMaxReaders) + rwmutexMaxReaders if r != 0 \u0026\u0026 atomic.AddInt32(\u0026rw.readerWait, r) != 0 { runtime_SemacquireMutex(\u0026rw.writerSem, false, 0) } } å†™é”æ—¶ï¼Œå…ˆé€šè¿‡rw.w.Lock()è§£å†³ä¸å…¶ä»–å†™é”çš„äº’æ–¥é—®é¢˜ å…¶ä¸­ç»†èŠ‚è¿˜éœ€è¦å†ç ”ç©¶ å°†readerCount-rwmutexMaxReaderså³è®¾ç½®æˆè´Ÿæ•°ï¼Œä»¥æ­¤æ¥é€šçŸ¥è¯»é”è¯·æ±‚ï¼Œæœ‰å†™é”æ¥äº† ä»¤rç­‰äºåŸreaderCountçš„å€¼ï¼Œå¦‚æœä¸ä¸º 0 ä¸”æ²¡æœ‰å­˜activeè¯»é”ï¼Œåˆ™å†™é”è¯·æ±‚é˜»å¡ atomic.AddInt32(\u0026rw.readerWait, r) != 0æ—¶å°†å½“å‰activeè¯»é”èµ‹å€¼ç»™readerWait,ä¹Ÿåªæœ‰æ­¤å¤„ä¼šèµ‹å€¼ï¼ŒreaderWait--åªä¼šåœ¨è¯»é”é‡Šæ”¾æ—¶æ‰æœ‰ 3.5 Unlock() func (rw *RWMutex) Unlock() { // å‘Šè¯‰readeræ²¡æœ‰æ´»è·ƒçš„writeräº† r := atomic.AddInt32(\u0026rw.readerCount, rwmutexMaxReaders) // å”¤é†’é˜»å¡çš„readerä»¬ for i := 0; i \u003c int(r); i++ { runtime_Semrelease(\u0026rw.readerSem, false, 0) } // é‡Šæ”¾å†…éƒ¨çš„äº’æ–¥é” rw.w.Unlock() } é‡Šæ”¾å†™é”æ—¶ï¼Œå°†readerCountæ¢å¤æˆè¯»é”æ•°é‡åŸå€¼ å¾ªç¯å”¤é†’é˜»å¡çš„å†™è¿›ç¨‹ æ‰€ä»¥ï¼Œåœ¨å†™é”é‡Šæ”¾çš„è¿‡ç¨‹ä¸­ï¼Œè¯»é”è¯·æ±‚è·å¾—é”çš„ä¼˜å…ˆçº§æ˜¯å¤§äºå†™é”çš„ rw.w.Unlock()æœ€åé‡Šæ”¾å†™é”é—´äº’æ–¥çš„ä¿¡å·é‡w ","date":"2022-04-02","objectID":"/go%E8%AF%BB%E5%86%99%E9%94%81/:1:3","tags":["go","åŒæ­¥","é”","è¯»å†™é”"],"title":"Goè¯»å†™é”","uri":"/go%E8%AF%BB%E5%86%99%E9%94%81/"},{"categories":["go"],"content":"å››ã€ æ€»ç»“ æ²¡æœ‰è¯»å†™è¿›ç¨‹çš„å‰æä¸‹ï¼Œè¯»å†™é”æ˜¯åŒç­‰åœ°ä½ç«äº‰çš„ å†™é”é‡Šæ”¾è¿‡ç¨‹ä¸­ï¼Œè¯»é”çš„ä¼˜å…ˆçº§æ˜¯é«˜äºå†™é”çš„ è¯»é”å ç”¨æ—¶ï¼Œå†™é”è¯·æ±‚åˆ°è¾¾åï¼Œåç»­çš„è¯»é”è¯·æ±‚éƒ½ä¼šè¢«é˜»å¡ ","date":"2022-04-02","objectID":"/go%E8%AF%BB%E5%86%99%E9%94%81/:1:4","tags":["go","åŒæ­¥","é”","è¯»å†™é”"],"title":"Goè¯»å†™é”","uri":"/go%E8%AF%BB%E5%86%99%E9%94%81/"},{"categories":["go"],"content":"äº”ã€ é¿å‘ ä¸å¯å¤åˆ¶ å¤åˆ¶çš„ RWMutex å®ä¾‹é‡Œé¢ä¼šå¸¦æœ‰å„ç§è®¡æ•°å™¨ï¼Œä¿¡å·é‡ï¼Œç›´æ¥å¤åˆ¶çš„è¯è¿™äº›çŠ¶æ€ä¼šè¢«ä¿ç•™ ä¸å¯é‡å…¥ ä¸æ™®é€šMutexç›¸åŒï¼Œå³ä¸èƒ½é”ä¸¤æ¬¡ åœºæ™¯ä¸€ ä¸€ä¸ªè¿›ç¨‹Lock()ååˆLock(),æœ¬è´¨ä¸Šæ˜¯å‰ä¸€ä¸ªLock()ç”±äºåä¸€ä¸ªLock()é˜»å¡æ— æ³•å¾€ä¸‹æ¨è¿›ï¼Œä¹Ÿå°±æ— æ³•é‡Šæ”¾é”ï¼Œè€Œç¬¬äºŒä¸ªLock()ç”±äºé”è¢«å‰ä¸€ä¸ªLock()å ç”¨å¯¼è‡´é˜»å¡ åœºæ™¯äºŒ ä¸åœºæ™¯ä¸€ç±»ä¼¼ï¼Œå…ˆRLock(),å†Lock() åœºæ™¯ä¸‰ ä¸€é“é¢è¯•é¢˜çš„åœºæ™¯ï¼Œè¯»è¿›ç¨‹ A ä¼šé€’å½’è°ƒç”¨è¯»è¿›ç¨‹ A1ï¼Œå†™è¿›ç¨‹ Bï¼Œå…ˆæ‰§è¡Œ A åŠ è¯»é”ï¼Œè¿™æ—¶å¦‚æœå¹¶å‘æ‰§è¡Œåˆ° Bï¼Œåˆ™ç”±äºå†™é”è¯·æ±‚åˆ°è¾¾ï¼Œåˆ™ A1 æ— æ³•åŠ è¯»é”ï¼Œéœ€è¦ç­‰å¾…ï¼Œå°±å˜æˆ A ç­‰å¾… A1ï¼ˆA1 è¢« B é˜»å¡ï¼‰ï¼ŒB ç­‰å¾… A é‡Šæ”¾ ","date":"2022-04-02","objectID":"/go%E8%AF%BB%E5%86%99%E9%94%81/:1:5","tags":["go","åŒæ­¥","é”","è¯»å†™é”"],"title":"Goè¯»å†™é”","uri":"/go%E8%AF%BB%E5%86%99%E9%94%81/"},{"categories":["git"],"content":"gitä¿¡æ¯æ¯”è¾ƒ","date":"2022-04-01","objectID":"/git%E4%BF%A1%E6%81%AF%E6%AF%94%E8%BE%83/","tags":["git"],"title":"gitä¿¡æ¯æ¯”è¾ƒ","uri":"/git%E4%BF%A1%E6%81%AF%E6%AF%94%E8%BE%83/"},{"categories":["git"],"content":"git ä¿¡æ¯æ¯”è¾ƒ ","date":"2022-04-01","objectID":"/git%E4%BF%A1%E6%81%AF%E6%AF%94%E8%BE%83/:1:0","tags":["git"],"title":"gitä¿¡æ¯æ¯”è¾ƒ","uri":"/git%E4%BF%A1%E6%81%AF%E6%AF%94%E8%BE%83/"},{"categories":["git"],"content":"ä¸€ã€ diff æ¯”è¾ƒ git æ–‡ä»¶å˜åŠ¨å­˜åœ¨ä¸‰ç§æ¯”è¾ƒ è§ git ä¸‰ç§å­˜å‚¨åŒºåŸŸ å·¥ä½œåŒºå’Œæš‚å­˜åŒºæ¯”è¾ƒ git diff æš‚å­˜åŒºä¸ä»“åº“æ¯”è¾ƒ git diff --cached å·¥ä½œåŒºä¸ä»“åº“æ¯”è¾ƒ git diff HEAD # HEADæ­¤å¤„ç›¸å½“äºæ˜¯commitè®°å½•ï¼Œå¯ä»¥æ¢æˆå…¶ä»–commitè®°å½• ","date":"2022-04-01","objectID":"/git%E4%BF%A1%E6%81%AF%E6%AF%94%E8%BE%83/:1:1","tags":["git"],"title":"gitä¿¡æ¯æ¯”è¾ƒ","uri":"/git%E4%BF%A1%E6%81%AF%E6%AF%94%E8%BE%83/"},{"categories":["git"],"content":"äºŒã€ status æ˜¾ç¤ºä¿¡æ¯ æ™®é€šgit status æ˜¾ç¤ºæ²¡æœ‰ track çš„æ–‡ä»¶ æ˜¾ç¤ºæš‚å­˜åŒºä¸ä»“åº“å·®å¼‚ æ˜¾ç¤ºå·¥ä½œåŒºä¸æš‚å­˜åŒºå·®å¼‚ git status -sæˆ–git status --short è¾“å‡ºç´§å‡‘ä¿¡æ¯ $ git status -s M README MM Rakefile A lib/git.rb M lib/simplegit.rb ?? LICENSE.txt ??è¡¨ç¤ºæœªè·Ÿè¸ªçš„ä¿¡æ¯ ","date":"2022-04-01","objectID":"/git%E4%BF%A1%E6%81%AF%E6%AF%94%E8%BE%83/:1:2","tags":["git"],"title":"gitä¿¡æ¯æ¯”è¾ƒ","uri":"/git%E4%BF%A1%E6%81%AF%E6%AF%94%E8%BE%83/"},{"categories":["git"],"content":"gité¦–é¡µ","date":"2022-04-01","objectID":"/git/","tags":["git"],"title":"git","uri":"/git/"},{"categories":["git"],"content":"1ã€git ä¿¡æ¯æ¯”è¾ƒ 2ã€git å¿½ç•¥æ–‡ä»¶ 3ã€git æ’¤é”€ 4ã€git æ ‡ç­¾","date":"2022-04-01","objectID":"/git/:0:0","tags":["git"],"title":"git","uri":"/git/"},{"categories":["git"],"content":"git ignoreç›¸å…³å†…å®¹","date":"2022-04-01","objectID":"/git%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6/","tags":["git"],"title":"gitå¿½ç•¥æ–‡ä»¶","uri":"/git%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6/"},{"categories":["git"],"content":"å¿½ç•¥æ–‡ä»¶ .gitignore *.[oa] *~ ","date":"2022-04-01","objectID":"/git%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6/:1:0","tags":["git"],"title":"gitå¿½ç•¥æ–‡ä»¶","uri":"/git%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6/"},{"categories":["git"],"content":"ä¸€ã€ è§„èŒƒ æ‰€æœ‰ç©ºè¡Œæˆ–è€…ä»¥ # å¼€å¤´çš„è¡Œéƒ½ä¼šè¢« Git å¿½ç•¥ã€‚ å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ glob æ¨¡å¼åŒ¹é… åŒ¹é…æ¨¡å¼å¯ä»¥ä»¥(/)å¼€å¤´é˜²æ­¢é€’å½’ åŒ¹é…æ¨¡å¼å¯ä»¥ä»¥(/)ç»“å°¾æŒ‡å®šç›®å½• è¦å¿½ç•¥æŒ‡å®šæ¨¡å¼ä»¥å¤–çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¯ä»¥åœ¨æ¨¡å¼å‰åŠ ä¸ŠæƒŠå¹å·(!)å–å ","date":"2022-04-01","objectID":"/git%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6/:1:1","tags":["git"],"title":"gitå¿½ç•¥æ–‡ä»¶","uri":"/git%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6/"},{"categories":["git"],"content":"äºŒã€ glob æ¨¡å¼åŒ¹é…ï¼ˆshell ä¸­ç®€åŒ–çš„æ­£åˆ™è¡¨è¾¾å¼ï¼‰ æ˜Ÿå·(*)åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªä»»æ„å­—ç¬¦ [abc] åŒ¹é…ä»»ä½•ä¸€ä¸ªåˆ—åœ¨æ–¹æ‹¬å·ä¸­çš„å­—ç¬¦(è¿™ä¸ªä¾‹å­è¦ä¹ˆåŒ¹é…ä¸€ä¸ª aï¼Œè¦ä¹ˆåŒ¹é…ä¸€ä¸ª bï¼Œè¦ä¹ˆåŒ¹é…ä¸€ä¸ª c) é—®å·(?)åªåŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦ å¦‚æœåœ¨æ–¹æ‹¬å·ä¸­ä½¿ç”¨çŸ­åˆ’çº¿åˆ†éš”ä¸¤ä¸ªå­—ç¬¦ï¼Œè¡¨ç¤ºæ‰€æœ‰åœ¨è¿™ä¸¤ä¸ªå­—ç¬¦èŒƒå›´å†…çš„éƒ½å¯ä»¥åŒ¹é…(æ¯”å¦‚ [0-9] è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ 0 åˆ° 9 çš„æ•°å­—) ä½¿ç”¨ä¸¤ä¸ªæ˜Ÿå·(*) è¡¨ç¤ºåŒ¹é…ä»»æ„ä¸­é—´ç›®å½•ï¼Œæ¯”å¦‚a/**/z å¯ä»¥åŒ¹é… a/z, a/b/z æˆ– a/b/c/zç­‰ é™„å½• github ä¸Šé’ˆå¯¹é¡¹ç›®å’Œè¯­è¨€çš„.gitignore æ–‡ä»¶åˆ—è¡¨ https://github.com/github/gitignore ","date":"2022-04-01","objectID":"/git%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6/:1:2","tags":["git"],"title":"gitå¿½ç•¥æ–‡ä»¶","uri":"/git%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6/"},{"categories":["git"],"content":"gitæ’¤é”€","date":"2022-04-01","objectID":"/git%E6%92%A4%E9%94%80/","tags":["git"],"title":"gitæ’¤é”€","uri":"/git%E6%92%A4%E9%94%80/"},{"categories":["git"],"content":"git æ’¤é”€æ“ä½œ ","date":"2022-04-01","objectID":"/git%E6%92%A4%E9%94%80/:1:0","tags":["git"],"title":"gitæ’¤é”€","uri":"/git%E6%92%A4%E9%94%80/"},{"categories":["git"],"content":"ä¸€ã€ ä¸¢å¼ƒå·¥ä½œä¿®æ”¹ # æ³¨æ„ \"--\"\" ä¸€å®šä¸è¦å¿˜è®°ï¼Œä¸ç„¶å°±å˜æˆåˆ‡æ¢åˆ†æ”¯ # å½“ä¿®æ”¹äº†æ–‡ä»¶ï¼Œæ²¡æœ‰addæ—¶ï¼Œcheckoutæ˜¯ä¸¢å¼ƒå·¥ä½œåŒºä¿®æ”¹ # å½“ä¿®æ”¹äº†æ–‡ä»¶ï¼Œaddåï¼Œåˆä¿®æ”¹äº†æ–‡ä»¶ï¼Œcheckoutæ˜¯ä¸¢å¼ƒå·¥ä½œåŒºä¿®æ”¹ï¼Œå›åˆ°ä¸Šä¸€æ¬¡addæ—¶çš„çŠ¶æ€ git checkout -- file-name ","date":"2022-04-01","objectID":"/git%E6%92%A4%E9%94%80/:1:1","tags":["git"],"title":"gitæ’¤é”€","uri":"/git%E6%92%A4%E9%94%80/"},{"categories":["git"],"content":"äºŒã€ æ’¤é”€add git restore --staged file-name git reset file-name git resetä¸åŠ å‚æ•°æ—¶æ—¶å®‰å…¨çš„ ä¸Šè¿°ä¸¤ä¸ªå‘½ä»¤åŠŸèƒ½ä¸€è‡´ ","date":"2022-04-01","objectID":"/git%E6%92%A4%E9%94%80/:1:2","tags":["git"],"title":"gitæ’¤é”€","uri":"/git%E6%92%A4%E9%94%80/"},{"categories":["git"],"content":"ä¸‰ã€ æ’¤é”€commit 3.1 ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤ git commit --amend # ä¸Šæ¬¡commitå†…å®¹åï¼Œå‘ç°æœ‰æ”¹åŠ¨éœ€è¦ä¸€èµ·æäº¤ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡--amendé‡æ–°å‘èµ·è¿™æ¬¡commit 3.2 å›é€€ commit # å›é€€åˆ°å½“å‰ç‰ˆæœ¬çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬ git reset --hard HEAD^ git å†…éƒ¨æœ‰ä¸ªæŒ‡å‘å½“å‰ç‰ˆæœ¬çš„ HEAD æŒ‡é’ˆï¼Œç‰ˆæœ¬å›é€€æˆ–è€…å‰è¿›æ—¶ï¼Œgit ä»…ä»…æ˜¯å°† HEAD æŒ‡å‘ä½ç½®æ”¹å˜ ä¸Šè¿°HEAD^ä¹Ÿå¯ä»¥æ”¹æˆæŸæ¬¡æäº¤çš„ commit ID ","date":"2022-04-01","objectID":"/git%E6%92%A4%E9%94%80/:1:3","tags":["git"],"title":"gitæ’¤é”€","uri":"/git%E6%92%A4%E9%94%80/"},{"categories":["git"],"content":"gitæ ‡ç­¾ç›¸å…³å†…å®¹","date":"2022-04-01","objectID":"/git%E6%A0%87%E7%AD%BE/","tags":["git"],"title":"gitæ ‡ç­¾","uri":"/git%E6%A0%87%E7%AD%BE/"},{"categories":["git"],"content":"git æ ‡ç­¾ ","date":"2022-04-01","objectID":"/git%E6%A0%87%E7%AD%BE/:1:0","tags":["git"],"title":"gitæ ‡ç­¾","uri":"/git%E6%A0%87%E7%AD%BE/"},{"categories":["git"],"content":"ä¸€ã€ åˆ—å‡ºæ ‡ç­¾ git tag # ä»¥å­—æ¯é¡ºåºåˆ—å‡ºæ ‡ç­¾ git tag -l 'v1.8.5*' # åˆ—å‡ºæ‰€æœ‰1.8.5ç³»åˆ—çš„æ ‡ç­¾ ","date":"2022-04-01","objectID":"/git%E6%A0%87%E7%AD%BE/:1:1","tags":["git"],"title":"gitæ ‡ç­¾","uri":"/git%E6%A0%87%E7%AD%BE/"},{"categories":["git"],"content":"äºŒã€ åˆ›å»ºæ ‡ç­¾ ä¸¤ç§ç±»å‹çš„æ ‡ç­¾ï¼šè½»é‡æ ‡ç­¾ï¼ˆlightweightï¼‰å’Œé™„æ³¨æ ‡ç­¾ï¼ˆannotatedï¼‰ lightweight æ ‡ç­¾åªæ˜¯ä¸€ä¸ªæäº¤çš„å¼•ç”¨ï¼Œä¸åŒ…å«ä¸€äº›ä¿¡æ¯ï¼Œannotated æ ‡ç­¾å«æœ‰ä¿¡æ¯åŒ…æ‹¬â€œæ‰“æ ‡ç­¾è€…åå­—â€ï¼Œâ€œç”µå­é‚®ä»¶åœ°å€â€ï¼Œâ€œæ—¥æœŸä¸æ—¶é—´â€ï¼Œâ€œGPG ç­¾åä¸éªŒè¯â€ç­‰ï¼› ","date":"2022-04-01","objectID":"/git%E6%A0%87%E7%AD%BE/:1:2","tags":["git"],"title":"gitæ ‡ç­¾","uri":"/git%E6%A0%87%E7%AD%BE/"},{"categories":["git"],"content":"ä¸‰ã€ annotated æ ‡ç­¾ git tag -a v1.4 -m \"my version 1.4\" # ä½¿ç”¨-aé€‰é¡¹å¯ä»¥åˆ›å»ºannotatedæ ‡ç­¾ # ä½¿ç”¨-mé€‰é¡¹è¾“å…¥è¯´æ˜ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™gitä¼šè¿è¡Œç¼–è¾‘å™¨è¦æ±‚è¾“å…¥ä¿¡æ¯ $ git show v1.4 tag v1.4 Tagger: Ben Straub \u003cben@straub.cc\u003e Date: Sat May 3 20:19:12 2014 -0700 my version 1.4 commit ca82a6dff817ec66f44342007202690a93763949 Author: Scott Chacon \u003cschacon@gee-mail.com\u003e Date: Mon Mar 17 21:52:11 2008 -0700 changed the version number ","date":"2022-04-01","objectID":"/git%E6%A0%87%E7%AD%BE/:1:3","tags":["git"],"title":"gitæ ‡ç­¾","uri":"/git%E6%A0%87%E7%AD%BE/"},{"categories":["git"],"content":"å››ã€ lightweight æ ‡ç­¾ lw æ ‡ç­¾å®é™…ä¸Šåªæ˜¯å°†æäº¤æ ¡éªŒå’Œå­˜å‚¨åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ²¡æœ‰ä¿å­˜å…¶ä»–ä¿¡æ¯ åˆ›å»ºæ—¶ä¸è¦ä½¿ç”¨-aé€‰é¡¹ï¼Œç›´æ¥æä¾›æ ‡ç­¾åç§°å³å¯åˆ›å»º lw æ ‡ç­¾ # è¿™é‡Œç”¨çš„åº”è¯¥å°±æ˜¯lwæ ‡ç­¾ git show v0.6.0 #openyurt # ä½¿ç”¨git showå¯ä»¥æŸ¥çœ‹æŸä¸ªtagçš„ç›¸å…³ä¿¡æ¯ commit 7df5fd6a019e28ee4147a4b271f7ada91e6372a9 (tag: v0.6.0, origin/release-v0.6) Author: rambohe \u003clinbo.hlb@alibaba-inc.com\u003e Date: Wed Jan 12 10:39:06 2022 +0800 [docs] revise readme and changelog for OpenYurt v0.6.0 (#709) ","date":"2022-04-01","objectID":"/git%E6%A0%87%E7%AD%BE/:1:4","tags":["git"],"title":"gitæ ‡ç­¾","uri":"/git%E6%A0%87%E7%AD%BE/"},{"categories":["git"],"content":"äº”ã€ æ¨é€æ ‡ç­¾ é»˜è®¤æƒ…å†µä¸‹ï¼Œgit pushå‘½ä»¤ä¸ä¼šæ¨é€ tag è‡³æœåŠ¡å™¨ æ–¹å¼ä¸€ git push origin [tagname]ç±»ä¼¼æ¨é€åˆ†æ”¯çš„æ–¹å¼ git push --tags ä¼šå°†æ‰€æœ‰ä¸åœ¨è¿œç¨‹ä»“åº“çš„æ ‡ç­¾å…¨éƒ¨æ¨é€ ","date":"2022-04-01","objectID":"/git%E6%A0%87%E7%AD%BE/:1:5","tags":["git"],"title":"gitæ ‡ç­¾","uri":"/git%E6%A0%87%E7%AD%BE/"},{"categories":["git"],"content":"å…­ã€ æ£€å‡ºæ ‡ç­¾ git ä¸­æ ‡ç­¾ä¸èƒ½åƒåˆ†æ”¯ä¸€æ ·æ¥å›ç§»åŠ¨ git checkout -b [branchname] [tagname]å¯ä»¥åœ¨ç‰¹å®šçš„æ ‡ç­¾ä¸Šåˆ›å»ºæ–°åˆ†æ”¯ å®è´¨ä¸Šç›¸å½“äºæ˜¯ä½¿ç”¨ tag æ ‡ç­¾è¿™ä¸ªç‰ˆæœ¬åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ ã€æ³¨æ„ã€‘å¦‚æœè¯¥ branchname åˆ†æ”¯æœ‰äº†æ–°çš„æ”¹åŠ¨çš„è¯ï¼Œé‚£ä¹ˆå…¶å®ä»£ç å’Œå¯¹åº”çš„ tagname å°±ä¸ä¸€æ ·äº† ","date":"2022-04-01","objectID":"/git%E6%A0%87%E7%AD%BE/:1:6","tags":["git"],"title":"gitæ ‡ç­¾","uri":"/git%E6%A0%87%E7%AD%BE/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"Paxosåˆ†å¸ƒå¼ç®—æ³•å­¦ä¹ ","date":"2022-03-22","objectID":"/paxos/","tags":["åˆ†å¸ƒå¼","paxos","å…±è¯†"],"title":"Paxos","uri":"/paxos/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"Paxos èµ„æ–™é“¾æ¥ https://zhuanlan.zhihu.com/p/31780743 https://www.cnblogs.com/linbingdong/p/6253479.html https://blog.openacid.com/algo/paxos/ chrome-extension://cdonnmffkdaoajfknoeeecmchibpmkmg/assets/pdf/web/viewer.html?file=https%3A%2F%2Fongardie.net%2Fstatic%2Fraft%2Fuserstudy%2Fpaxos.pdf ","date":"2022-03-22","objectID":"/paxos/:1:0","tags":["åˆ†å¸ƒå¼","paxos","å…±è¯†"],"title":"Paxos","uri":"/paxos/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"ä¸€ã€ èƒŒæ™¯é—®é¢˜ ç»´åŸºç™¾ç§‘ Paxos æ˜¯è±æ–¯åˆ©Â·å…°ä¼¯ç‰¹ï¼ˆLeslie Lamportï¼‰ï¼Œ1990 å¹´æå‡ºçš„ä¸€ç§åŸºäºæ¶ˆæ¯ä¼ é€’ä¸”å…·æœ‰é«˜åº¦å®¹é”™ç‰¹æ€§çš„å…±è¯†ç®—æ³• Paxos å¸¸è¢«è¯¯ç§°ä¸ºä¸€è‡´æ€§ï¼ˆconsistencyï¼‰ç®—æ³•ï¼Œä½†æ˜¯ consistency å’Œ consensus å¹¶ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚Paxos æ˜¯ä¸€ä¸ªå…±è¯†ç®—æ³• é—®é¢˜èƒŒæ™¯ åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¼šå‘ç”Ÿå„ç§å¼‚å¸¸é”™è¯¯æƒ…å†µï¼Œå¦‚ä½•åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¿«é€Ÿæ­£ç¡®åœ°å¯¹æŸä¸ªæ•°æ®è¾¾æˆå…±è¯†ï¼ŸPaxos ç®—æ³•è¿è¡Œåœ¨ç³»ç»Ÿä¸­å‡ºç°å®•æœºæ•…éšœï¼Œå¯ä»¥å®¹å¿æ¶ˆæ¯çš„ä¸¢å¤±ã€å»¶è¿Ÿã€ä¹±åºä»¥åŠé‡å¤ï¼Œä½†æ˜¯ä¸è€ƒè™‘ Assume a collection of processes that can propose values. A consensus algorithm ensures that a single one among the proposed values is chosen. If no value is proposed, then no value should be chosen. ","date":"2022-03-22","objectID":"/paxos/:1:1","tags":["åˆ†å¸ƒå¼","paxos","å…±è¯†"],"title":"Paxos","uri":"/paxos/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"äºŒã€ è§’è‰² Proposer ï¼š æå‡ºææ¡ˆï¼ˆProposalï¼‰ã€‚Proposal ä¿¡æ¯åŒ…æ‹¬ææ¡ˆç¼–å·ï¼ˆProposal IDï¼‰å’Œæè®®çš„å€¼ï¼ˆValueï¼‰ Acceptor ï¼šå‚ä¸å†³ç­–ï¼Œå›åº” Proposers çš„ææ¡ˆã€‚æ”¶åˆ°ææ¡ˆåå¯ä»¥æ¥å—ææ¡ˆï¼Œè‹¥ææ¡ˆè·å¾—å¤§å¤šæ•°æ¥å—ï¼Œåˆ™ç§°è¯¥ææ¡ˆè¢«æ‰¹å‡† Learner ï¼š ä¸å‚ä¸å†³ç­–ï¼Œä» Proposers/Acceptors å­¦ä¹ è¾¾æˆä¸€è‡´çš„ææ¡ˆ ","date":"2022-03-22","objectID":"/paxos/:1:2","tags":["åˆ†å¸ƒå¼","paxos","å…±è¯†"],"title":"Paxos","uri":"/paxos/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"ä¸‰ã€ ç®—æ³•æµç¨‹ Phase 1. â€‹ (a) A proposer selects a proposal number n and sends a prepare request with number n to a majority of acceptors â€‹ (b) If an acceptor receives a prepare request with number n greater than that of any prepare request to which it has already responded, then it responds to the request with a promise not to accept any more proposals numbered less than n and with the highest-numbered proposal (if any) that it has accepted. Prepareé˜¶æ®µç”Ÿæˆçš„ number ID å¯ä½¿ç”¨æ—¶é—´æˆ³ â•Server ID Acceptorè¿›è¡ŒPromiseçš„æ‰¿è¯º ï¼ˆ1ï¼‰ä¸¤ä¸ª Promise Acceptor ä¸æ¥å— Proposal ID å°äºç­‰äºå½“å‰è¯·æ±‚çš„Prepareè¯·æ±‚ Acceptor ä¸æ¥å— Proposal ID å°äºå½“å‰è¯·æ±‚çš„Proposeè¯·æ±‚ æ³¨æ„ä¸Šé¢åŒºåˆ« ï¼ˆ2ï¼‰ä¸€ä¸ª Accept å›å¤å·²ç»æ¥å—è¿‡çš„ææ¡ˆä¸­ Proposal ID æœ€å¤§çš„é‚£ä¸ªææ¡ˆçš„ Valueï¼ˆè¿™ä¸ª Value ä¼šè¢« Proposer æ¥æ”¶åˆ°åå¹¶å­¦ä¹ ï¼‰ Phase 2. â€‹ (a) If the proposer receives a response to its prepare requests (numbered n) from a majority of acceptors, then it sends an accept request to each of those acceptors for a proposal numbered n with a value v, where v is the value of the highest-numbered proposal among the reponses, or is any value if the responses reported no proposals. â€‹ (b) If an acceptor receives an accept request for a proposal numbered n, it accepts the proposal unless it has already responded to a prepare request having a number greater than n. ","date":"2022-03-22","objectID":"/paxos/:1:3","tags":["åˆ†å¸ƒå¼","paxos","å…±è¯†"],"title":"Paxos","uri":"/paxos/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"å››ã€ Safety Only a value that has been proposed may be chosen Only a single value is chosen, and a process never learns that a value has been chosen unless it actually has been Requirement P1. An acceptor must accept the first proposal that it receives. ï¼ˆacceptor å¿…é¡»æ¥å—å®ƒæ”¶åˆ°çš„ç¬¬ä¸€ä¸ª proposalï¼‰ But this requirement raises a problem. Several values could be proposed by different proposers at about the same time, leading to a situation in which every acceptor has accepted a value, but no single value is accepted by a majority of them. Even with just two proposed values, if each is accepted by about half the acceptors, failure of a single acceptor could make it impossibleto learn which of the values was chosen. P1a. An acceptor can accept a proposal numbered n iff it has not responded to a prepare request having a number greater than n P2. If a proposal with value v is chosen, then every higher-numbered proposal that is chosen has value v.ï¼ˆå¦‚æœå€¼ä¸º v çš„ proposal è¢«é€‰å®šï¼Œåˆ™ä»»ä½•è¢«é€‰å®šçš„å…·æœ‰æ›´é«˜ç¼–å·çš„ proposal å€¼ä¹Ÿä¸€å®šæ˜¯ vï¼‰ Chosen ï¼š A value is chosen when a single proposal with that value has been accepted by a majority of the acceptors. Since numbers are totally ordered, condition P2 guarantees the crucial safetyproperty that only a single value is chosen. (ä¿è¯åªæœ‰ä¸€ä¸ªå€¼è¢«é€‰ä¸­) P2a. If a proposal with value v is chosen, then every higher-numbered proposal accepted by any acceptor has value v. ï¼ˆå¦‚æœå€¼ä¸º v çš„ proposal è¢«é€‰å®šï¼Œåˆ™å¯¹æ‰€æœ‰çš„ acceptorï¼Œä»–ä»¬æ¥å—çš„ä»»ä½•å…·æœ‰æ›´é«˜ç¼–å·çš„ proposal çš„å€¼ä¹Ÿä¸€å®šæ˜¯ vï¼‰ P2b. If a proposal with value v is chosen, then every higher-numbered proposal issued by any proposer has value v. ï¼ˆå¦‚æœå€¼ä¸º v çš„ proposal è¢«é€‰å®šï¼Œåˆ™å¯¹æ‰€æœ‰çš„ proposerï¼Œä»–ä»¬æå‡ºçš„ä»»ä½•å…·æœ‰æ›´é«˜ç¼–å·çš„ proposal å€¼ä¹Ÿä¸€å®šä¸º vï¼‰ P2c. For any v and n, if a proposal with value v and number n is issued, then there is a set S consisting of a majority of acceptors such that either (a) no acceptor in S has accepted any proposal numbered less than n, or (b) v is the value of the highest-numbered proposal among all proposals numbered less than n accepted by the acceptors in S ","date":"2022-03-22","objectID":"/paxos/:1:4","tags":["åˆ†å¸ƒå¼","paxos","å…±è¯†"],"title":"Paxos","uri":"/paxos/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"äº”ã€ æ´»é” Liveness å¤šä¸ª proposer åŒæ—¶è¿è¡Œæ—¶ï¼Œå„ä¸ª proposal çš„ç¼–å·äº¤æ›¿å¢åŠ ï¼Œæ²¡æœ‰ä»»ä½•çš„ proposal å¯ä»¥è¢«æˆåŠŸæ¥å— è§£å†³ éšæœºå»¶è¿Ÿï¼Œåœç­‰ï¼ˆæœ‰ç‚¹ç±»ä¼¼äº CSMA è§£å†³å†²çªçš„æ€è·¯ï¼‰ é€šè¿‡é€‰ä¸»ï¼Œåªæœ‰ä¸» Proposer æ‰èƒ½æå‡ºææ¡ˆ ","date":"2022-03-22","objectID":"/paxos/:1:5","tags":["åˆ†å¸ƒå¼","paxos","å…±è¯†"],"title":"Paxos","uri":"/paxos/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"æ‹“å±•èµ„æ–™ ","date":"2022-03-22","objectID":"/paxos/:2:0","tags":["åˆ†å¸ƒå¼","paxos","å…±è¯†"],"title":"Paxos","uri":"/paxos/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"B ç«™è§†é¢‘ 1. CAP Theorem ä¸€è‡´æ€§ consistency å¯ç”¨æ€§ availability åˆ†åŒºå®¹é”™æ€§ partition tolerance 2. ä¸€è‡´æ€§æ¨¡å‹ å¼±ä¸€è‡´æ€§ æœ€ç»ˆä¸€è‡´æ€§ ï¼š ç«‹é©¬è¯»å–å¯èƒ½ç»“æœä¸å¯¹ DNSï¼ˆDomain Name Systemï¼‰ Gossipï¼ˆCassandra çš„é€šä¿¡åè®®ï¼‰ å¼ºä¸€è‡´æ€§ Paxos Raftï¼ˆmulti-paxosï¼‰ ZABï¼ˆmulti-paxosï¼‰ åˆ†å¸ƒå¼ç³»ç»Ÿå¯¹ fault tolorence çš„ä¸€èˆ¬è§£å†³æ–¹æ¡ˆæ˜¯ state machine replication è®¨è®ºçš„ä¸»é¢˜ä¹Ÿå°±æ˜¯ state machine replication çš„å…±è¯†ï¼ˆconsensusï¼‰ç®—æ³• ","date":"2022-03-22","objectID":"/paxos/:2:1","tags":["åˆ†å¸ƒå¼","paxos","å…±è¯†"],"title":"Paxos","uri":"/paxos/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"OpenACID Blog å­¦ä¹  1. æ ¸å¿ƒæ€æƒ³ åœ¨å»‰ä»·çš„æ˜“æŸè®¾å¤‡ä¸Šï¼Œé€šè¿‡å¤šå‰¯æœ¬çš„å†—ä½™ç­–ç•¥å®ç°å¯é æ€§ æ³¨æ„æ­¤å¤„ä¸ Paxos çš„åŒºåˆ«ï¼Œæ­¤å¤„åœ¨æ•°æ®åº“æ„Ÿè§‰æ›´å¤šçš„æ˜¯ä¸ºäº†è®©ä¿®æ”¹è®°å½•è½ç›˜ï¼Œå®ç°ä¸€è‡´æ€§ï¼Œè€Œä¸æ˜¯åœ¨å¤šä¸ªå€¼ä¸­é€‰ä¸€ä¸ªè¿›è¡Œå…±è¯† ç»™å‡ºäº†ä¸€ä¸ªæ•°æ®ã€‚ å¤šå‰¯æœ¬çš„æ•°æ®ä¸¢å¤±é£é™© 1 å‰¯æœ¬ ï½ 0.63% 2 å‰¯æœ¬ ï½ 0.00395% 3 å‰¯æœ¬ ï½ 0.000001% n å‰¯æœ¬ ï½ x^n ï¼ˆx=å•å‰¯æœ¬æŸåç‡ï¼‰ 2. å¸¸è§æ–¹æ¡ˆ ä¸€ã€ ä¸»ä»å¼‚æ­¥å¤åˆ¶ï¼ˆMysql çš„ binlog å¤åˆ¶ï¼‰ æ€è·¯ï¼šåº”è¯¥åªæœ‰ä¸»èƒ½å¤Ÿå†™ï¼Œä¸»æ”¶åˆ°å†™è¯·æ±‚åï¼Œå†™å…¥æœ¬åœ°ç£ç›˜ï¼Œç„¶åè¿”å›å“åº”ï¼Œå†åŒæ­¥ç»™å…¶ä»–ä»èŠ‚ç‚¹ é—®é¢˜ï¼šåœ¨è¿”å›å“åº”ä¸åŒæ­¥è‡³ä»èŠ‚ç‚¹ä¹‹é—´å­˜åœ¨å¼‚æ­¥ï¼Œå¦‚æœæ­¤æ—¶æ–­ç”µæˆ–è€…ä¸»æŸåï¼Œåˆ™æ•°æ®ä¸¢å¤± äºŒã€ä¸»ä»åŒæ­¥å¤åˆ¶ æ€è·¯ï¼šåº”è¯¥åªæœ‰ä¸»èƒ½å¤Ÿå†™ï¼Œä¸»æ”¶åˆ°å†™è¯·æ±‚åï¼Œå†™å…¥æœ¬åœ°ç£ç›˜ï¼Œç„¶ååŒæ­¥ç»™å…¶ä»–ä»èŠ‚ç‚¹ï¼Œå†è¿”å›å“åº” é—®é¢˜ï¼šä¸»è¿”å›å“åº”ä¹‹å‰éœ€è¦ç¡®ä¿åŒæ­¥åˆ°æ‰€æœ‰çš„ä»èŠ‚ç‚¹ï¼Œè¿™æ ·æ•ˆç‡å¾ˆä½ï¼Œé€Ÿåº¦å¾ˆæ…¢ï¼ŒåŒæ—¶å¦‚æœæœ‰ä»èŠ‚ç‚¹å‡ºç°é—®é¢˜ï¼Œåˆ™æ•´ä¸ªå®Œæˆå°±å®Œå…¨é˜»å¡ ä¸‰ã€ ä¸»ä»åŠåŒæ­¥å¤åˆ¶ æ€è·¯ï¼šåº”è¯¥åªæœ‰ä¸»èƒ½å¤Ÿå†™ï¼Œä¸»æ”¶åˆ°å†™è¯·æ±‚åï¼Œå†™å…¥æœ¬åœ°ç£ç›˜ï¼Œç„¶ååŒæ­¥ç»™ä¸€äº›ä»èŠ‚ç‚¹ï¼ˆä¸æ˜¯å…¨éƒ¨ï¼‰ï¼Œå†è¿”å›å“åº” é—®é¢˜ï¼šå¦‚æœæ•°æ® a å¤åˆ¶ç»™ä» 1 èŠ‚ç‚¹ï¼Œæ•°æ® b å¤åˆ¶ç»™ä» 2 èŠ‚ç‚¹ï¼Œç»“æœ master å®•æœºï¼Œåˆ™ä» slave1 å’Œ slave2 æ¢å¤å‡ºçš„æ•°æ®æ˜¯ä¸ä¸€æ ·çš„ï¼Œå°±æ˜¯è¯´åŠåŒæ­¥å¤åˆ¶è¿˜æ˜¯ä¼šå­˜åœ¨æ•°æ®ä¸ä¸€è‡´é—®é¢˜ å››ã€å¤šæ•°æ´¾å†™ï¼ˆè¯»ï¼‰ æ€è·¯ï¼šæ¯æ¡æ•°æ®å¿…é¡»å†™å…¥åˆ°åŠæ•°ä»¥ä¸Šæœºå™¨ä¸Šï¼Œæ¯æ¬¡è¯»å–æ•°æ®éƒ½å¿…é¡»æ£€æŸ¥åŠæ•°ä»¥ä¸Šæœºå™¨æ˜¯å¦å­˜åœ¨è¯¥æ¡æ•°æ® é—®é¢˜ 1ï¼šnode1 å’Œ node2 éƒ½å†™å…¥äº† a=xï¼Œä¸‹ä¸€æ¬¡æ›´æ–°æ—¶ node2 å’Œ node3 å†™å…¥äº† a=yï¼Œè¿™æ—¶å¦‚æœå®¢æˆ·è¯»å– node1 å’Œ node2 ä¼šå‘ç°ä¸ä¸€è‡´ï¼Œ è§£å†³ 1ï¼šé€šè¿‡æ¯”è¾ƒè®°å½•æ—¶é—´æˆ³ï¼Œæ¥é€‰æ‹©æœ€æ–°çš„çŠ¶æ€ï¼Œä¿è¯ä¸äº§ç”Ÿæ­§ä¹‰ é—®é¢˜ 2ï¼šå¦‚æœå®¢æˆ·åœ¨å†™å…¥ a=y æ—¶ï¼Œåªå†™äº† node3 çš„ï¼Œnode2 è¿˜æ²¡å†™è¿›å»å°±æŒ‚äº†ï¼Œæ­¤æ—¶ä¸ªèŠ‚ç‚¹ä¸­æœ€æ–°çš„çŠ¶æ€ node1-xï¼›node2-xï¼›node3-yï¼Œåˆ™å¦‚æœå®¢æˆ·è¯»å– node1 å’Œ node2 ä¼šå¾—åˆ° xï¼›è¯»å– node2 å’Œ node3 æˆ–è€… node1 å’Œ node3 ä¼šå¾—åˆ° yï¼›å› ä¸º node3 ä¸­ y çš„æ—¶é—´æˆ³æ˜¯æœ€æ–°çš„ äº”ã€ Paxos ä¸Šå›¾å­˜åœ¨çš„é—®é¢˜ï¼š åœ¨ x è®¾ç½® i å€¼çš„åŒæ—¶ï¼Œè¿™ä¸ªè¿‡ç¨‹è¿˜æ²¡åšå®Œï¼Œy å°±å‡†å¤‡æ’ä¸€æ‰‹æ¥è®¾ç½® i å€¼äº†ã€‚ ä¸ªäººè®¤ä¸ºï¼šæ ¸å¿ƒé—®é¢˜å‘ç”Ÿåœ¨æ²¡æœ‰åŠ é” æ–‡ç« åŸè¯æ˜¯è¯´ï¼šâ€œåœ¨ X æˆ– Y å†™ä¹‹å‰å…ˆåšä¸€æ¬¡å¤šæ•°æ´¾è¯»ï¼Œä»¥ä¾¿ç¡®è®¤æ˜¯å¦æœ‰å…¶ä»–å®¢æˆ·ç«¯è¿›ç¨‹å·²ç»åœ¨å†™äº†ï¼Œå¦‚æœæœ‰ï¼Œåˆ™æ”¾å¼ƒâ€ è§£è¯» ä¸ªäººè§‰å¾—è¿™é‡Œçš„å…ˆåšä¸€æ¬¡å¤šæ•°æ´¾è¯»å°±æ˜¯ Prepare çš„è¿‡ç¨‹ Paxos ä¹Ÿå¹¶ä¸æ˜¯å‘ç°æœ‰äººåœ¨å†™å°±æ”¾å¼ƒçš„ï¼Œè€Œæ˜¯åœ¨ Prepare çš„æ—¶å€™å°±æŠŠè‡ªå·±çš„é”ç»™åŠ ä¸Šäº†ï¼Œç„¶åæŠ¢å ï¼Œæ‰€ä»¥æ‰ä¼šå¯¼è‡´æ´»æ€§çš„é—®é¢˜ è¿™é‡Œå¦‚æœå•çº¯åªæ˜¯åˆ†å¸ƒå¼åŠ é”ï¼Œä¹Ÿä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åŒæ–¹éƒ½åªæ˜¯åŠ äº†é”ï¼Œä¹Ÿéƒ½æ˜¯ç®€å•çš„é”ï¼Œå› ä¸ºè¯·æ±‚å¯ä»¥åŒæ­¥è¿‡æ¥ï¼Œé‚£ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å°±æ˜¯ä½¿ç”¨æ—¶é—´æˆ³ï¼Œåªæœ‰æœ€åä¸€ä¸ªé”ï¼Œæ‰æ˜¯æœ‰æ•ˆçš„ å°šå¾…å®Œå–„â€¦ ","date":"2022-03-22","objectID":"/paxos/:2:2","tags":["åˆ†å¸ƒå¼","paxos","å…±è¯†"],"title":"Paxos","uri":"/paxos/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"ç½‘ç»œåŸºç¡€å­¦ä¹ æ•´ç†","date":"2022-03-20","objectID":"/%E7%BD%91%E7%BB%9C/","tags":["ç½‘ç»œ","network","åŸºç¡€çŸ¥è¯†"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/%E7%BD%91%E7%BB%9C/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"ç½‘ç»œ ","date":"2022-03-20","objectID":"/%E7%BD%91%E7%BB%9C/:0:0","tags":["ç½‘ç»œ","network","åŸºç¡€çŸ¥è¯†"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/%E7%BD%91%E7%BB%9C/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"ä¸€ã€CIDR CIDRï¼ˆClassless Inter-Domain Routingï¼Œæ— ç±»åŸŸé—´è·¯ç”±é€‰æ‹©ï¼‰å®ƒæ¶ˆé™¤äº†ä¼ ç»Ÿçš„ A ç±»ã€B ç±»å’Œ C ç±»åœ°å€ä»¥åŠåˆ’åˆ†å­ç½‘çš„æ¦‚å¿µï¼Œå› è€Œå¯ä»¥æ›´åŠ æœ‰æ•ˆåœ°åˆ†é… IPv4 çš„åœ°å€ç©ºé—´ã€‚å®ƒå¯ä»¥å°†å¥½å‡ ä¸ª IP ç½‘ç»œç»“åˆåœ¨ä¸€èµ·ï¼Œä½¿ç”¨ä¸€ç§æ— ç±»åˆ«çš„åŸŸé™…è·¯ç”±é€‰æ‹©ç®—æ³•ï¼Œä½¿å®ƒä»¬åˆå¹¶æˆä¸€æ¡è·¯ç”±ä»è€Œè¾ƒå°‘è·¯ç”±è¡¨ä¸­çš„è·¯ç”±æ¡ç›®å‡è½» Internet è·¯ç”±å™¨çš„è´Ÿæ‹…ã€‚ CIDR è®°æ³• CIDR è¿˜ä½¿ç”¨â€œæ–œçº¿è®°æ³•â€ï¼Œå®ƒåˆç§°ä¸º CIDR è®°æ³•ï¼Œå³åœ¨ IP åœ°å€åé¢åŠ ä¸Šä¸€ä¸ªæ–œçº¿â€œ/â€ï¼Œç„¶åå†™ä¸Šç½‘ç»œå‰ç¼€æ‰€å çš„æ¯”ç‰¹æ•°ï¼ˆè¿™ä¸ªæ•°å€¼å¯¹åº”äºä¸‰çº§ç¼–å€ä¸­å­ç½‘æ©ç ä¸­æ¯”ç‰¹ 1 çš„ä¸ªæ•°ï¼‰ã€‚ IP åœ°å€::={\u003cç½‘ç»œå‰ç¼€*\u003e,\u003c*ä¸»æœºå·\u003e} ","date":"2022-03-20","objectID":"/%E7%BD%91%E7%BB%9C/:1:0","tags":["ç½‘ç»œ","network","åŸºç¡€çŸ¥è¯†"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/%E7%BD%91%E7%BB%9C/"},{"categories":["ä¸“ä¸šåŸºç¡€"],"content":"äºŒã€ IPSec ï¼ˆInternet Protocol Securityï¼‰ å­¦ä¹ é“¾æ¥ https://support.huawei.com/enterprise/zh/doc/EDOC1100008291/370abd69 https://support.huawei.com/enterprise/zh/doc/EDOC1100041456/f2298f86 https://cshihong.github.io/2019/04/09/IPSec-VPN%E4%B9%8BIKEv2%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/ ike2 2.1 æ¦‚è¿° æ˜¯ä¸€ç³»åˆ—ç½‘ç»œåè®®çš„é›†åˆ AHï¼ˆAuthentication Headerï¼‰ éªŒè¯å¤´ æŠ¥æ–‡å¤´éªŒè¯åè®®ï¼Œæä¾›æ•°æ®æ ¡éªŒåŠŸèƒ½ã€‚ ESPï¼ˆEncapsulating Security Payloadï¼‰å°è£…å®‰å…¨è½½è· æä¾›æ•°æ®åŠ å¯†åŠŸèƒ½ æ¯”è¾ƒ AH å’Œ ESP éƒ½èƒ½æä¾›éªŒè¯åŠŸèƒ½ï¼Œä¸»è¦é‡‡ç”¨ç®—æ³• MD5ã€SHA1ã€SHA2-256**ï¼ˆå»ºè®®ï¼‰**ã€SHA2-384ã€SHA2-512 ESP å¯ä»¥æä¾›åŠ å¯†åŠŸèƒ½ DESã€3DESã€AES**ï¼ˆå»ºè®®ï¼‰** 2.2 IKEï¼ˆInternet Key Exchangeï¼‰å› ç‰¹ç½‘å¯†é’¥äº¤æ¢ å¯ä»¥åŠ¨æ€åå•†å¯†é’¥ IKE å»ºç«‹åœ¨ ISAKMP æ¡†æ¶ä¹‹ä¸Šï¼Œé‡‡ç”¨ DHï¼ˆDiffie-Hellmanï¼‰ç®—æ³•ï¼Œå¯ä»¥æå‡å¯†é’¥çš„å®‰å…¨æ€§ï¼Œå¹¶é™ä½ IPSec ç®¡ç†å¤æ‚åº¦ 2.3 IPSec åŸç†ä»‹ç» ipsec åœ¨å¯¹ç­‰ä½“ä¹‹é—´å»ºç«‹å®‰å…¨è”ç›Ÿ SAï¼ˆsecurity associationï¼‰ SA ç”±ä¸‰å…ƒç»„æ ‡è¯† SPIï¼ˆsecurity parameter indexï¼‰å®‰å…¨å‚æ•°ç´¢å¼•ï¼š 32 ä½çš„å”¯ä¸€æ ‡è¯† SA çš„æ•°å€¼ ç›®çš„ IP åœ°å€ ä½¿ç”¨çš„å®‰å…¨åè®®ï¼ˆAH æˆ– ESPï¼‰ SA æ˜¯å•å‘é€»è¾‘ï¼Œä¸ºäº†å»ºç«‹åŒå‘è¿æ¥ï¼Œéœ€è¦æœ‰ä¸¤ä¸ªå®‰å…¨è”ç›Ÿ å¦å¤–ï¼ŒSA çš„ä¸ªæ•°è¿˜ä¸å®‰å…¨åè®®ç›¸å…³ã€‚å¦‚æœåªä½¿ç”¨ AH æˆ– ESP æ¥ä¿æŠ¤ä¸¤ä¸ªå¯¹ç­‰ä½“ä¹‹é—´çš„æµé‡ï¼Œåˆ™å¯¹ç­‰ä½“ä¹‹é—´å°±æœ‰ä¸¤ä¸ª SAï¼Œæ¯ä¸ªæ–¹å‘ä¸Šä¸€ä¸ªã€‚å¦‚æœå¯¹ç­‰ä½“åŒæ—¶ä½¿ç”¨äº† AH å’Œ ESPï¼Œé‚£ä¹ˆå¯¹ç­‰ä½“ä¹‹é—´å°±éœ€è¦å››ä¸ª SAï¼Œæ¯ä¸ªæ–¹å‘ä¸Šä¸¤ä¸ªï¼Œåˆ†åˆ«å¯¹åº” AH å’Œ ESPã€‚ å°è£…æ¨¡å¼ ä¼ è¾“æ¨¡å¼ éš§é“æ¨¡å¼ï¼š IKE ä¸ IPSec å…³ç³» å¯¹ç­‰ä½“ä¹‹é—´å»ºç«‹ä¸€ä¸ª IKE SA å®Œæˆèº«ä»½éªŒè¯å’Œå¯†é’¥ä¿¡æ¯äº¤æ¢åï¼Œåœ¨ IKE SA çš„ä¿æŠ¤ä¸‹ï¼Œæ ¹æ®é…ç½®çš„ AH/ESP å®‰å…¨åè®®ç­‰å‚æ•°åå•†å‡ºä¸€å¯¹ IPSec SAã€‚æ­¤åï¼Œå¯¹ç­‰ä½“é—´çš„æ•°æ®å°†åœ¨ IPSec éš§é“ä¸­åŠ å¯†ä¼ è¾“ ","date":"2022-03-20","objectID":"/%E7%BD%91%E7%BB%9C/:1:1","tags":["ç½‘ç»œ","network","åŸºç¡€çŸ¥è¯†"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/%E7%BD%91%E7%BB%9C/"},{"categories":["å·¥å…·"],"content":"npm åŒ…ç®¡ç†å·¥å…·çš„ä½¿ç”¨å­¦ä¹ ","date":"2022-03-20","objectID":"/npm/","tags":["npm","åŒ…ç®¡ç†","å®ç”¨å·¥å…·"],"title":"Npm ä½¿ç”¨","uri":"/npm/"},{"categories":["å·¥å…·"],"content":"ä¸€ã€ npm install å‚æ•° 1.1 npm install å®‰è£…å•ä¸ª packageName åŒ… æ— å‚æ•° é»˜è®¤æƒ…å†µ npm install packageName é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸åŠ å‚æ•°ã€‚ä¼šå®‰è£…åŒ…ï¼Œå¹¶å°†ä¾èµ–åŒ…çš„åç§°æ·»åŠ  package.json ä¸­çš„ dependencies å­—æ®µã€‚ â€“save å‚æ•° npm install --save packageName æ·»åŠ --saveå‚æ•°ï¼Œä¸é»˜è®¤æƒ…å†µæ•ˆæœç›¸åŒã€‚ä¼šå®‰è£…åŒ…ï¼Œå¹¶å°†ä¾èµ–åŒ…çš„åç§°æ·»åŠ åˆ° package.json ä¸­çš„ dependencies å­—æ®µã€‚ â€“save-dev å‚æ•° npm install --save-dev packageName æ·»åŠ --save-devå‚æ•°ï¼Œä¼šå®‰è£…åŒ…ï¼Œå¹¶å°†ä¾èµ–åŒ…çš„åç§°æ·»åŠ åˆ° package.json ä¸­çš„ devDependencies å­—æ®µã€‚ å®‰è£…æŸä¸ªåŒ…æ—¶ï¼Œè¿™ä¸ªåŒ…ä¸­ package.json çš„ dependencies å­—æ®µä¸­çš„ä¾èµ–ä¼šè¢«è‡ªåŠ¨å®‰è£…ï¼Œè€Œ devDependencies å­—æ®µä¸­çš„ä¾èµ–ä¸ä¼šè¢«å®‰è£…ã€‚ 1.2 npm install åˆå§‹åŒ–é¡¹ç›® æ— å‚æ•° ç›´æ¥åˆå§‹åŒ– npm install æˆ‘ä»¬å¸¸ç”¨ npm install åˆå§‹åŒ–é¡¹ç›®ï¼Œå®‰è£…é¡¹ç›®æ‰€éœ€çš„ä¾èµ–ã€‚ä½†æ›´æ·±å…¥çš„ç»†èŠ‚æ˜¯ï¼šç›´æ¥ä½¿ç”¨ npm install æ—¶ï¼Œé¡¹ç›® package.json ä¸­ dependencies å­—æ®µå’Œ devDependencies å­—æ®µä¸­çš„ä¾èµ–åŒ…éƒ½ä¼šè¢«å®‰è£…ã€‚ â€“production å‚æ•° npm install --production æ·»åŠ --productionå®‰è£…é¡¹ç›®æ‰€éœ€çš„ä¾èµ–æ—¶ï¼Œåªæœ‰ dependencies å­—æ®µä¸­çš„ä¾èµ–åŒ…ä¼šè¢«å®‰è£…ï¼ŒdevDependencies ä¸­çš„ä¾èµ–åŒ…ä¸ä¼šè¢«å®‰è£…ã€‚ â€“only=dev å‚æ•° npm install --only=dev æ·»åŠ --only=devå®‰è£…é¡¹ç›®æ‰€éœ€ä¾èµ–æ—¶ï¼Œåªæœ‰ devDependencies å­—æ®µä¸­çš„ä¾èµ–åŒ…ä¼šè¢«å®‰è£…ï¼Œdependencies å­—æ®µä¸­çš„ä¾èµ–åŒ…ä¸ä¼šè¢«å®‰è£…ã€‚ä¸æ·»åŠ â€“production çš„æ•ˆæœåˆšå¥½ç›¸åã€‚ è¿˜æœ‰ä¸€ä¸ªå‚æ•°ï¼šâ€“devï¼Œå®ƒçš„æ•ˆæœä¸â€“only=dev ç›¸åŒï¼Œä½†å·²ç»è¢«åºŸå¼ƒï¼Œè¯·ä½¿ç”¨â€“only=dev ä»£æ›¿ã€‚ ","date":"2022-03-20","objectID":"/npm/:0:1","tags":["npm","åŒ…ç®¡ç†","å®ç”¨å·¥å…·"],"title":"Npm ä½¿ç”¨","uri":"/npm/"},{"categories":["å·¥å…·"],"content":"markdownå†™ä½œå­¦ä¹ ","date":"2022-03-20","objectID":"/markdown/","tags":["markdown","å†™ä½œ","å®ç”¨å·¥å…·"],"title":"Markdown","uri":"/markdown/"},{"categories":["å·¥å…·"],"content":"ä¸€ã€é”šç‚¹-ä¸šå†…è·³è½¬ éœ€è¦é“¾æ¥çš„åœ°æ–¹ \u003cspan id = \"xxx\"\u003e å†…å®¹ \u003c/span\u003e é“¾æ¥æŒ‰é’® [é“¾æ¥æ ‡é¢˜](#xxx) ","date":"2022-03-20","objectID":"/markdown/:0:0","tags":["markdown","å†™ä½œ","å®ç”¨å·¥å…·"],"title":"Markdown","uri":"/markdown/"},{"categories":["å·¥å…·"],"content":"æ–‡ç« æè¿°","date":"2022-03-20","objectID":"/ssh/","tags":["è¿ç»´","SSH","è¿œç¨‹è¿æ¥","å®ç”¨å·¥å…·"],"title":"SSHé…ç½®","uri":"/ssh/"},{"categories":["å·¥å…·"],"content":"ä¸€ã€ è¿œç¨‹ç”¨æˆ·ï¼šå…å¯†ç™»é™†+IP é‡å‘½å ç”¨æˆ·ç›®å½•ä¸‹çš„.sshç›®å½•å†…ï¼Œæ·»åŠ é…ç½®æ–‡ä»¶config Host 47.103.81.142 HostName cloudHost User root ServerAliveInterval 20 C:\\Windows\\System32\\drivers\\etc\\hostséœ€è¦æ·»åŠ å†…å®¹ 47.103.81.142 cloudHost cat ~/.ssh/id_rsa.pub \u003e\u003e ~/.ssh/authorized_keys ","date":"2022-03-20","objectID":"/ssh/:0:1","tags":["è¿ç»´","SSH","è¿œç¨‹è¿æ¥","å®ç”¨å·¥å…·"],"title":"SSHé…ç½®","uri":"/ssh/"},{"categories":["å·¥å…·"],"content":"äºŒã€ è¿æ¥ä¸ä¸­æ–­ ä¿®æ”¹é…ç½®æ–‡ä»¶~/.ssh/config æ·»åŠ é…ç½®é¡¹ServerAliveInterval=30 ","date":"2022-03-20","objectID":"/ssh/:0:2","tags":["è¿ç»´","SSH","è¿œç¨‹è¿æ¥","å®ç”¨å·¥å…·"],"title":"SSHé…ç½®","uri":"/ssh/"},{"categories":["ç†è´¢"],"content":"æŠ•èµ„ç†è´¢çš„ç®€è¦ç†è§£","date":"2022-03-20","objectID":"/%E7%90%86%E8%B4%A2%E6%A6%82%E8%BF%B0/","tags":["æŠ•èµ„","ç†è´¢"],"title":"æŠ•èµ„æ¦‚è¿°","uri":"/%E7%90%86%E8%B4%A2%E6%A6%82%E8%BF%B0/"},{"categories":["ç†è´¢"],"content":"ğŸ”— https://www.zhihu.com/question/24435403/answer/276767603?utm_source=wechat_session\u0026utm_medium=social\u0026utm_oi=924545603512471552\u0026utm_content=group1_Answer\u0026utm_campaign=shareopn ","date":"2022-03-20","objectID":"/%E7%90%86%E8%B4%A2%E6%A6%82%E8%BF%B0/:0:0","tags":["æŠ•èµ„","ç†è´¢"],"title":"æŠ•èµ„æ¦‚è¿°","uri":"/%E7%90%86%E8%B4%A2%E6%A6%82%E8%BF%B0/"},{"categories":["ç†è´¢"],"content":"ä¸€ã€ é’±çš„å‡ ç§æŠ•èµ„æ–¹å¼ 1. ç°é‡‘ç±»èµ„äº§ å¦‚ï¼šç°é‡‘ã€é“¶è¡Œå­˜æ¬¾ã€è´§å¸åŸºé‡‘ï¼ˆè¿™ä¸ªå’Œä¹°çš„åŸºé‡‘æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Ÿï¼‰ å¹³å‡æ”¶ç›Š 3%-4%ï¼Œå‡ ä¹æ²¡æœ‰äºæŸã€‚ ä¸€èˆ¬é“¶è¡Œæ•´å­˜æ•´å–ä¸€å¹´ï¼Œä¹Ÿå°± 1.7%å·¦å³ï¼Œå³æ•´å­˜10wï¼Œä¸€å¹´è·åˆ©1750 æŒ‰ç…§ 3%è®¡ç®—ï¼Œ10w ä¸€å¹´è·åˆ© 3000 2. å›ºå®šæ”¶ç›Šç±»èµ„äº§ å¦‚ï¼šå›½å€ºã€é‡‘èå€ºã€ä¼ä¸šå€ºã€å¤®è¡Œç¥¨æ®å’Œå€ºåˆ¸å‹åŸºé‡‘ç­‰ å¹³å‡æ”¶ç›Š 5%-7%ï¼ŒäºæŸæ¦‚ç‡ä½ï¼Œä¹Ÿä¸æ˜¯ä¸ä¼šäºæŸ æŒ‰ 5%è®¡ç®—ï¼Œæ•´å­˜10wï¼Œä¸€å¹´è·åˆ©5000 3. æƒç›Šç±»èµ„äº§ å¦‚ï¼šè‚¡ç¥¨ã€æ··åˆå‹åŸºé‡‘ã€æƒè¯ç­‰ å¹³å‡æ”¶ç›Š 10%-20%ï¼Œä½†æ˜¯é‡åˆ°éå¸¸ä¸å¥½çš„è¡Œæƒ…ï¼Œäº 50%ä¹Ÿæ˜¯æœ‰å¯èƒ½ ","date":"2022-03-20","objectID":"/%E7%90%86%E8%B4%A2%E6%A6%82%E8%BF%B0/:0:1","tags":["æŠ•èµ„","ç†è´¢"],"title":"æŠ•èµ„æ¦‚è¿°","uri":"/%E7%90%86%E8%B4%A2%E6%A6%82%E8%BF%B0/"},{"categories":["ç†è´¢"],"content":"äºŒã€ç†è´¢è¦å»ºç«‹ä¸åŒçš„â€œè´¦æˆ·â€ï¼Œä¸“æ¬¾ä¸“ç”¨ ï¼ˆ1ï¼‰ æ˜ç¡®éœ€æ±‚ é•¿æœŸ-ä½æ³¢åŠ¨-ä½æ”¶ç›Šã€æ‰“æ­»ä¸èƒ½åŠ¨çš„é’±ã€‘ï¼š å…»è€ã€ä¹°æˆ¿ï¼ˆè¿˜æ¬¾ï¼‰ é•¿æœŸ-ä¸­ç­‰æ³¢åŠ¨-ä¸­ç­‰æ”¶ç›Šï¼š ä¹°è½¦ã€ç”Ÿå¨ƒå…»å¨ƒã€çˆ¶æ¯èµ¡å…»ã€ç»“å©š çŸ­æœŸ-é«˜æ³¢åŠ¨-é«˜æ”¶ç›Šã€å°å°æŠ•èµ„ï¼Œäºäº†ä¸ä¼šå“­çš„é’±ã€‘ï¼šåˆ¨é™¤é•¿æœŸéœ€æ±‚åå¤šå‡ºçš„é’± å æ¯”ç›®å‰ç°é‡‘æµçš„ 5%ï¼Œä¸è¦è¶…è¿‡ 10% ï¼ˆ2ï¼‰ å»ºç«‹â€œè´¦æˆ·â€ é’ˆå¯¹ä¸Šè¿°ä¸åŒçš„éœ€æ±‚ï¼ŒåŸºäºæ”¶å…¥æ¥æºä¸åŒçš„åˆ†é…æ¯”ä¾‹åˆ’åˆ†åˆ°å¯¹åº”çš„éœ€æ±‚ï¼Œä¸“æ¬¾ä¸“ç”¨ æŒ‰ç…§æœˆåº¦/å¹´åº¦è§„åˆ’åˆ¶å®š excel è¡¨æ ¼ è¿™å¼ è¡¨å¤§æ¦‚æ¥è¯´ç²‰è‰²éƒ¨åˆ†å°±æ˜¯é¢„è®¡ç®—çš„èµ„é‡‘ç¼ºå£ å¦‚æœç²‰ä¸éƒ¨åˆ†ä¸èƒ½å¡«è¡¥ï¼Œä¸¤ç§æ€è·¯ï¼Œå¢åŠ é£é™©æŠ•èµ„ã€é™ä½é¢„æœŸè·åˆ©å€¼ ","date":"2022-03-20","objectID":"/%E7%90%86%E8%B4%A2%E6%A6%82%E8%BF%B0/:0:2","tags":["æŠ•èµ„","ç†è´¢"],"title":"æŠ•èµ„æ¦‚è¿°","uri":"/%E7%90%86%E8%B4%A2%E6%A6%82%E8%BF%B0/"},{"categories":["ç†è´¢"],"content":"ä¸‰ã€ æŒ‡æ•°åŸºé‡‘ï¼ˆæ˜¯ä¸æ˜¯å¸¸è¯´çš„åŸºé‡‘ï¼Ÿï¼‰ æŒ‡æ•°åŸºé‡‘æ˜¯æ¯”è¾ƒè¢«æ¨èçš„ ï¼ˆ1ï¼‰ æŠ•èµ„æ­¥éª¤ 1ï¼‰æŒ‘é€‰å¤„äºä½ä¼°å€¼çš„æŒ‡æ•° 2ï¼‰ç¡®å®šæŠ•èµ„çš„é‡‘é¢ 3ï¼‰ç¡®å®šæŠ•èµ„çš„é¢‘ç‡ 4ï¼‰åšæŒä¸æ‡ˆåœ°å®šæœŸä¸å®šé¢æŠ•å…¥åŸºé‡‘ 5ï¼‰é«˜ä¼°å€¼æ—¶å–å‡ºæ¢ä»“å…¶ä»–ä½ä¼°å€¼çš„åŸºé‡‘ ï¼ˆ2ï¼‰å¦‚ä½•ä¼°å€¼ æ¯è‚¡ç›ˆåˆ©/æ¯è‚¡ä»·æ ¼-10 å¹´æœŸå›½å€ºæ”¶ç›Šç‡ï¼Œå€¼é«˜åˆ™æ˜¯ä½ä½ï¼Œå€¼ä½åˆ™æ˜¯é«˜ä½ï¼ˆå¤šå°‘æ˜¯é«˜ç‚¹ï¼Œå¤šå°‘æ˜¯ä½ç‚¹ï¼Œå¦‚æœè¯„ä¼°ï¼Œå¯èƒ½éœ€è¦å€Ÿé‰´è‚¡ç¥¨ï¼Ÿï¼‰ å¸‚ç›ˆç‡ï¼š ä¸€èˆ¬å¸‚ç›ˆç‡ 15 ä»¥ä¸‹ä½ä¼°ï¼Œ15-20 æŒæœ‰ï¼Œ30 ä»¥ä¸Šé«˜ä¼° é’¢é“ï¼ŒçŸ³åŒ–ï¼Œçººç»‡è¿™ç§å¼ºå‘¨æœŸçš„è¡Œä¸šï¼Œå¸‚ç›ˆç‡ä¸è¯¥å¤ªé«˜ é£Ÿå“ï¼Œæ¶ˆè´¹ï¼Œåˆ¶è¯çš„æŠ—å‘¨æœŸæ€§æ¯”è¾ƒå¼ºï¼Œä¸€èˆ¬å¸‚ç›ˆç‡ 20-30 å€æ˜¯æ­£å¸¸ä¼°å€¼ è¿˜è¦ç»“åˆå†å²ä½ä½åˆ†æ•°çº¿çœ‹ï¼Œä¸€èˆ¬å†å²ä½ä½ 10%åˆ†æ•°çº¿å°±æ˜¯éå¸¸éš¾å¾—çš„å®šæŠ•æœºä¼šäº†ï¼ˆä»€ä¹ˆæ˜¯å†å²ä½ä½åˆ†æ•°çº¿ï¼Ÿï¼‰ æ‰€ä»¥ä½ å¯ä»¥å‚è€ƒ**â€œä¸”æ…¢â€æˆ–â€œå¤©å¤©â€æˆ–â€œè›‹å·â€**è¿™äº›åŸºé‡‘å¹³å°æä¾›çš„ä¼°å€¼ç™¾åˆ†ä½ï¼Œä¸€èˆ¬æ¥è®²ï¼Œè·Œå€’ä¼°å€¼ç™¾åˆ†ä½ 50%ä»¥ä¸‹å°±å¯ä»¥è¿›åœºäº† ","date":"2022-03-20","objectID":"/%E7%90%86%E8%B4%A2%E6%A6%82%E8%BF%B0/:0:3","tags":["æŠ•èµ„","ç†è´¢"],"title":"æŠ•èµ„æ¦‚è¿°","uri":"/%E7%90%86%E8%B4%A2%E6%A6%82%E8%BF%B0/"},{"categories":["native cloud"],"content":"Kubernetes åŸºç¡€ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:0:0","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"ä¸€ã€æ¶æ„ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:1:0","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"1.1 ç»„ä»¶ Master ï¼š schedulerã€API-Serverã€rcï¼ˆå‰¯æœ¬æ§åˆ¶å™¨ï¼‰ Etcd ï¼š å­˜å‚¨ï¼ˆé”®å€¼å¯¹ï¼‰ï¼ˆåˆ†å¸ƒå¼ï¼‰ï¼ˆæŒä¹…åŒ–ï¼‰ v2:å†…å­˜ v3: DB Node ï¼š kubeletï¼ˆä¸å®¹å™¨è¿è¡Œæ—¶è¿›è¡Œäº¤äº’ï¼‰ã€kube proxyï¼ˆè´Ÿè½½å‡è¡¡ï¼Œå†™å…¥è§„åˆ™è‡³ iptablesï¼‰ CoreDNS ï¼š ä¸ºé›†ç¾¤ä¸­ svc åˆ›å»ºâ€œåŸŸå-IPâ€çš„å¯¹åº”è§£æ Ingress Controller ï¼š å®ç°ä¸ƒå±‚çš„ä»£ç† ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:1:1","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"äºŒã€Pod çŠ¶æ€ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç† ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:2:0","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"2.3 Init å®¹å™¨ (1) æ¢é’ˆ init C å¯ä»¥åšæœåŠ¡æ¢é’ˆï¼Œä½†æ˜¯ init C æ‰§è¡Œå®Œä¹‹åå°±æ— æ³•æŒç»­åœ¨çº¿äº† æ¢é’ˆæ˜¯ç”± kubelet å¯¹å®¹å™¨æ‰§è¡Œçš„å®šæœŸè¯Šæ–­ï¼Œè¦æ‰§è¡Œçš„è¯ï¼Œkubelet éœ€è¦è°ƒç”¨å®¹å™¨å®ç°çš„ handler execAction ï¼šåœ¨å®¹å™¨ä¸­æ‰§è¡ŒæŒ‡å®šå‘½ä»¤ï¼ŒæˆåŠŸåˆ™è¯Šæ–­æˆåŠŸ TCPSocketActionï¼šå¯¹å®¹å™¨å¯¹åº” IP çš„ tcp ç«¯å£è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœç«¯å£æ‰“å¼€ï¼Œåˆ™è¯Šæ–­æˆåŠŸ HTTPGetActionï¼šæ‰§è¡Œä¸ƒå±‚ HTTP è¯·æ±‚ï¼ŒçŠ¶æ€ç æ»¡è¶³è¦æ±‚åˆ™è¯Šæ–­æˆåŠŸ ä¸¤ç§æ¢æµ‹æ–¹æ¡ˆ livenessProbe : å­˜æ´»æ¢æµ‹ livenessProbe-exec ï¼šæ‰§è¡Œå‘½ä»¤ readinessProbe ï¼šå°±ç»ªæ¢æµ‹ readinessProbe-httpget ï¼š http è¯·æ±‚ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:2:1","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"ä¸‰ã€é›†ç¾¤èµ„æºç®¡ç† èµ„æºæ¸…å•ç±»åˆ« åç§°ç©ºé—´çº§åˆ« å·¥ä½œè´Ÿè½½å‹ï¼šPodã€RSã€Deploymentã€Statefulsetã€DeamonSetã€Jobâ€¦ æœåŠ¡å‘ç°åŠè´Ÿè½½å‡è¡¡ï¼š Serviceã€Ingress é›†ç¾¤çº§åˆ«ï¼ˆå…¨å±€å¯è§èµ„æºï¼‰ namespaceã€nodeã€roleã€clusterRole å…ƒæ•°æ®å‹èµ„æº HPA ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:3:0","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"3.1 Node (1) ä¿¡æ¯ (2) Lease å†…å®¹â€”â€”èŠ‚ç‚¹å¿ƒè·³ Kubernetes èŠ‚ç‚¹å‘é€çš„å¿ƒè·³å¸®åŠ©ä½ çš„é›†ç¾¤ç¡®å®šæ¯ä¸ªèŠ‚ç‚¹çš„å¯ç”¨æ€§ï¼Œå¹¶åœ¨æ£€æµ‹åˆ°æ•…éšœæ—¶é‡‡å–è¡ŒåŠ¨ã€‚ å¯¹äºèŠ‚ç‚¹ï¼Œæœ‰ä¸¤ç§å½¢å¼çš„å¿ƒè·³: æ›´æ–°èŠ‚ç‚¹çš„ .status Lease å¯¹è±¡ åœ¨ kube-node-lease å‘½åç©ºé—´ä¸­ã€‚ æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå…³è”çš„ Lease å¯¹è±¡ã€‚ ä¸ Node çš„ .status æ›´æ–°ç›¸æ¯”ï¼ŒLease æ˜¯ä¸€ç§è½»é‡çº§èµ„æºã€‚ ä½¿ç”¨ Leases å¿ƒè·³åœ¨å¤§å‹é›†ç¾¤ä¸­å¯ä»¥å‡å°‘è¿™äº›æ›´æ–°å¯¹æ€§èƒ½çš„å½±å“ã€‚ kubelet è´Ÿè´£åˆ›å»ºå’Œæ›´æ–°èŠ‚ç‚¹çš„ .statusï¼Œä»¥åŠæ›´æ–°å®ƒä»¬å¯¹åº”çš„ Leaseã€‚ å½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ–è€…åœ¨é…ç½®çš„æ—¶é—´é—´éš”å†…æ²¡æœ‰æ›´æ–°äº‹ä»¶æ—¶ï¼Œkubelet ä¼šæ›´æ–° .statusã€‚ .status æ›´æ–°çš„é»˜è®¤é—´éš”ä¸º 5 åˆ†é’Ÿï¼ˆæ¯”ä¸å¯è¾¾èŠ‚ç‚¹çš„ 40 ç§’é»˜è®¤è¶…æ—¶æ—¶é—´é•¿å¾ˆå¤šï¼‰ã€‚ kubelet ä¼šæ¯ 10 ç§’ï¼ˆé»˜è®¤æ›´æ–°é—´éš”æ—¶é—´ï¼‰åˆ›å»ºå¹¶æ›´æ–°å…¶ Lease å¯¹è±¡ã€‚ Lease æ›´æ–°ç‹¬ç«‹äº NodeStatus æ›´æ–°è€Œå‘ç”Ÿã€‚ å¦‚æœ Lease çš„æ›´æ–°æ“ä½œå¤±è´¥ï¼Œkubelet ä¼šé‡‡ç”¨æŒ‡æ•°å›é€€æœºåˆ¶ï¼Œä» 200 æ¯«ç§’å¼€å§‹ é‡è¯•ï¼Œæœ€é•¿é‡è¯•é—´éš”ä¸º 7 ç§’é’Ÿã€‚ lease èµ„æºå…¨ç§° leases.coordination.k8s.io # è·å–leaseèµ„æº kubectl get leases.coordination.k8s.io --all-namespaces (3) Condition conditions å­—æ®µæè¿°æ‰€æœ‰ Running èŠ‚ç‚¹çš„çŠ¶æ€ã€‚ èŠ‚ç‚¹çŠ¶å†µ æè¿° Ready å¦‚èŠ‚ç‚¹æ˜¯å¥åº·çš„å¹¶å·²ç»å‡†å¤‡å¥½æ¥æ”¶ Pod åˆ™ä¸º Trueï¼›False è¡¨ç¤ºèŠ‚ç‚¹ä¸å¥åº·è€Œä¸”ä¸èƒ½æ¥æ”¶ Podï¼›Unknown è¡¨ç¤ºèŠ‚ç‚¹æ§åˆ¶å™¨åœ¨æœ€è¿‘ node-monitor-grace-period æœŸé—´ï¼ˆé»˜è®¤ 40 ç§’ï¼‰æ²¡æœ‰æ”¶åˆ°èŠ‚ç‚¹çš„æ¶ˆæ¯ DiskPressure True è¡¨ç¤ºèŠ‚ç‚¹å­˜åœ¨ç£ç›˜ç©ºé—´å‹åŠ›ï¼Œå³ç£ç›˜å¯ç”¨é‡ä½, å¦åˆ™ä¸º False MemoryPressure True è¡¨ç¤ºèŠ‚ç‚¹å­˜åœ¨å†…å­˜å‹åŠ›ï¼Œå³èŠ‚ç‚¹å†…å­˜å¯ç”¨é‡ä½ï¼Œå¦åˆ™ä¸º False PIDPressure True è¡¨ç¤ºèŠ‚ç‚¹å­˜åœ¨è¿›ç¨‹å‹åŠ›ï¼Œå³èŠ‚ç‚¹ä¸Šè¿›ç¨‹è¿‡å¤šï¼›å¦åˆ™ä¸º False NetworkUnavailable True è¡¨ç¤ºèŠ‚ç‚¹ç½‘ç»œé…ç½®ä¸æ­£ç¡®ï¼›å¦åˆ™ä¸º False (4) PodCIDR PodCIDR ä¸ PodCIDRs åŒºåˆ«ï¼Ÿ (5) ProviderID å½“èŠ‚ç‚¹æ˜¯å…¬æœ‰äº‘å‚å•†æä¾›çš„äº‘ä¸»æœºæ—¶ï¼Œè¿™ä¸ªå±æ€§è¡¨ç¤ºå…¬æœ‰äº‘ç³»ç»Ÿä¸­å¯¹äº‘ä¸»æœºçš„å”¯ä¸€æ ‡è¯†ï¼Œæ ¼å¼ä¸ºï¼š\u003cProviderName\u003e://\u003cProviderSpecificNodeID\u003e (6) Node ç®¡ç† ä¸€ã€node è°ƒåº¦ä¹‹ç¦æ­¢è°ƒåº¦ï¼ˆå¹³æ»‘ç»´æŠ¤ï¼‰-cordonã€drainã€delete cordonã€drain å’Œ delete ä¸‰ä¸ªå‘½ä»¤éƒ½ä¼šä½¿ node åœæ­¢è¢«è°ƒåº¦ï¼ŒåæœŸåˆ›å»ºçš„ pod ä¸ä¼šç»§ç»­è¢«è°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹ä¸Šï¼Œä½†æ“ä½œçš„æš´åŠ›ç¨‹åº¦å´ä¸ä¸€æ ·ã€‚ 1. cordon åœæ­¢è°ƒåº¦ï¼ˆä¹‹åä¸å¯è°ƒåº¦ï¼Œä¸´æ—¶ä» K8S é›†ç¾¤éš”ç¦»ï¼‰ å½±å“æœ€å°ï¼Œåªä¼šå°† node æ ‡è¯†ä¸º SchedulingDisabled ä¸å¯è°ƒåº¦çŠ¶æ€ã€‚ ä¹‹å K8S å†åˆ›å»ºçš„ pod èµ„æºï¼Œä¸ä¼šè¢«è°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹ã€‚ æ—§æœ‰çš„ pod ä¸ä¼šå—åˆ°å½±å“ï¼Œä»æ­£å¸¸å¯¹å¤–æä¾›æœåŠ¡ã€‚ ç¦æ­¢è°ƒåº¦å‘½ä»¤\"kubectl cordon node_name\"ã€‚ æ¢å¤è°ƒåº¦å‘½ä»¤\"kubectl uncordon node_name\"ã€‚ï¼ˆæ¢å¤åˆ° K8S é›†ç¾¤ä¸­ï¼Œå˜å›å¯è°ƒåº¦çŠ¶æ€ï¼‰ 2. drain é©±é€èŠ‚ç‚¹ï¼ˆå…ˆä¸å¯è°ƒåº¦ï¼Œç„¶åæ’å¹²ï¼‰ é¦–å…ˆï¼Œé©±é€ Node ä¸Šçš„ pod èµ„æºåˆ°å…¶ä»–èŠ‚ç‚¹é‡æ–°åˆ›å»ºã€‚ æ¥ç€ï¼Œå°†èŠ‚ç‚¹è°ƒä¸º SchedulingDisabled ä¸å¯è°ƒåº¦çŠ¶æ€ã€‚ ç¦æ­¢è°ƒåº¦å‘½ä»¤\"kubectl drain node_name â€“force â€“ignore-daemonsets â€“delete-local-data\" æ¢å¤è°ƒåº¦å‘½ä»¤\"kubectl uncordon node_name\"ã€‚ï¼ˆæ¢å¤åˆ° K8S é›†ç¾¤ä¸­ï¼Œå˜å›å¯è°ƒåº¦çŠ¶æ€ï¼‰ drain æ–¹å¼æ˜¯å®‰å…¨é©±é€ podï¼Œä¼šç­‰åˆ° pod å®¹å™¨åº”ç”¨ç¨‹åºä¼˜é›…åœæ­¢åå†åˆ é™¤è¯¥ podã€‚ drain é©±é€æµç¨‹ï¼šå…ˆåœ¨ Node èŠ‚ç‚¹åˆ é™¤ podï¼Œç„¶åå†åœ¨å…¶ä»– Node èŠ‚ç‚¹åˆ›å»ºè¯¥ podã€‚æ‰€ä»¥ä¸ºäº†ç¡®ä¿ drain é©±é€ pod è¿‡ç¨‹ä¸­ä¸ä¸­æ–­æœåŠ¡ï¼ˆå³åšåˆ°\"æ— æ„ŸçŸ¥\"åœ°å¹³æ»‘é©±é€ï¼‰ï¼Œå¿…é¡»ä¿è¯è¦é©±é€çš„ pod å‰¯æœ¬æ•°å¤§äº 1ï¼Œå¹¶ä¸”é‡‡ç”¨äº†â€œåäº²å’Œç­–ç•¥â€å°†è¿™äº› pod è°ƒåº¦åˆ°ä¸åŒçš„ Node èŠ‚ç‚¹ä¸Šäº†ï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨\"å¤šä¸ª pod å‰¯æœ¬+åäº²å’Œç­–ç•¥\"çš„åœºæ™¯ä¸‹ï¼Œdrain é©±é€è¿‡ç¨‹å¯¹å®¹å™¨æœåŠ¡æ˜¯æ²¡æœ‰å½±å“çš„ã€‚ éœ€è¦æ³¨æ„ï¼š å¯¹èŠ‚ç‚¹æ‰§è¡Œç»´æŠ¤æ“ä½œä¹‹å‰ï¼ˆä¾‹å¦‚ï¼šå†…æ ¸å‡çº§ï¼Œç¡¬ä»¶ç»´æŠ¤ç­‰ï¼‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ kubectl drain å®‰å…¨é©±é€èŠ‚ç‚¹ä¸Šé¢æ‰€æœ‰çš„ podã€‚ drain å®‰å…¨é©±é€æ–¹å¼å°†ä¼šå…è®¸ pod é‡Œé¢çš„å®¹å™¨éµå¾ªæŒ‡å®šçš„ PodDisruptionBudgets æ‰§è¡Œä¼˜é›…ä¸­æ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œdrain å®‰å…¨é©±é€å¯ä»¥åšåˆ°ï¼šä¼˜é›…åœ°ç»ˆæ­¢ pod é‡Œçš„å®¹å™¨è¿›ç¨‹ã€‚ kubectl drain è¿”å›æˆåŠŸè¡¨æ˜æ‰€æœ‰çš„ pod ï¼ˆé™¤äº†æ’é™¤çš„é‚£äº›ï¼‰å·²ç»è¢«å®‰å…¨é©±é€ï¼ˆéµå¾ªæœŸæœ›ä¼˜é›…çš„ä¸­æ­¢æœŸï¼Œå¹¶ä¸”æ²¡æœ‰è¿åä»»ä½•åº”ç”¨ç¨‹åºçº§åˆ«çš„ä¸­æ–­é¢„ç®—ï¼‰ã€‚ ç„¶åï¼Œé€šè¿‡å¯¹ç‰©ç†æœºæ–­ç”µæˆ–è€…åœ¨äº‘å¹³å°ä¸Šåˆ é™¤èŠ‚ç‚¹æ‰€åœ¨çš„è™šæ‹Ÿæœºï¼Œéƒ½èƒ½å®‰å…¨çš„å°†èŠ‚ç‚¹ç§»é™¤ã€‚ å¦‚ä¸‹å°šæœªå­¦ä¹  ä¸€èˆ¬çº¿ä¸Š K8S çš„ PDBï¼ˆPodDisruptionBudgetsï¼‰é…ç½®çš„ä¹Ÿæ˜¯ç¬¦åˆ Pod é©±é€çš„ç†æƒ³æƒ…å†µçš„ï¼Œå³ maxUnavailable è®¾ç½®ä¸º 0ï¼ŒmaxSurge è®¾ç½®ä¸º 1ï¼š replicas:3strategy:rollingUpdate:maxSurge:1maxUnavailable:0type:RollingUpdate é»˜è®¤æƒ…å†µä¸‹ï¼Œkubectl drain ä¼šå¿½ç•¥é‚£äº›ä¸èƒ½æ€æ­»çš„ç³»ç»Ÿç±»å‹çš„ podã€‚drain å‘½ä»¤ä¸­éœ€è¦æ·»åŠ ä¸‰ä¸ªå‚æ•°ï¼šâ€“forceã€â€“ignore-daemonsetsã€â€“delete-local-data â€“force å½“ä¸€äº› pod ä¸æ˜¯ç» ReplicationController, ReplicaSet, Job, DaemonSet æˆ–è€… StatefulSet ç®¡ç†çš„æ—¶å€™å°±éœ€è¦ç”¨â€“force æ¥å¼ºåˆ¶æ‰§è¡Œ (ä¾‹å¦‚:kube-proxy) â€“ignore-daemonsets æ— è§† DaemonSet ç®¡ç†ä¸‹çš„ Podã€‚å³â€“ignore-daemonsets å¾€å¾€éœ€è¦æŒ‡å®šçš„,è¿™æ˜¯å› ä¸º deamonset ä¼šå¿½ç•¥ unschedulable æ ‡ç­¾(ä½¿ç”¨ kubectl drain æ—¶ä¼šè‡ªåŠ¨ç»™èŠ‚ç‚¹æ‰“ä¸Šä¸å¯è°ƒåº¦æ ‡ç­¾),å› æ­¤ deamonset æ§åˆ¶å™¨æ§åˆ¶çš„ pod è¢«åˆ é™¤åå¯èƒ½é©¬ä¸Šåˆåœ¨æ­¤èŠ‚ç‚¹ä¸Šå¯åŠ¨èµ·æ¥,è¿™æ ·å°±ä¼šæˆä¸ºæ­»å¾ªç¯.å› æ­¤è¿™é‡Œå¿½ç•¥ daemonsetã€‚ â€“delete-local-data å¦‚æœæœ‰ mount local volumn çš„ podï¼Œä¼šå¼ºåˆ¶æ€æ‰è¯¥ podã€‚ ä¸ºä»€ä¹ˆèƒ½ä¼˜é›…çš„é©±é€ï¼Ÿå’Œå…ˆé©±é€å†æ–°å»ºçš„é¡ºåºæœ‰å…³è¿˜æ˜¯å’Œ PodDisruptionBudgets ç­–ç•¥æœ‰å…³ 3. delete åˆ é™¤èŠ‚ç‚¹ é¦–å…ˆï¼Œé©±é€ Node èŠ‚ç‚¹ä¸Šçš„ pod èµ„æºåˆ°å…¶ä»–èŠ‚ç‚¹é‡æ–°åˆ›å»ºã€‚ é©±é€æµç¨‹ï¼šå…ˆåœ¨ Node èŠ‚ç‚¹åˆ é™¤ podï¼Œç„¶åå†åœ¨å…¶ä»– Node èŠ‚ç‚¹ä¸Šåˆ›å»ºè¿™äº› podã€‚ node èŠ‚ç‚¹åˆ é™¤ï¼Œmaster å¤±å»å¯¹å…¶æ§åˆ¶ï¼Œè¯¥èŠ‚ç‚¹ä» k8s é›†ç¾¤æ‘˜é™¤ã€‚ delete æ˜¯ä¸€ç§æš´åŠ›åˆ é™¤ node çš„æ–¹å¼ã€‚åœ¨é©±é€ pod æ—¶æ˜¯å¼ºåˆ¶å¹²æ‰å®¹å™¨è¿›ç¨‹ï¼Œåšä¸åˆ°ä¼˜é›…ç»ˆæ­¢ Podã€‚ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œæ˜¾ç„¶ drain æ›´å®‰å…¨ã€‚ æ¢å¤è°ƒåº¦ï¼ˆå³é‡æ–°åŠ å…¥åˆ° K8S é›†ç¾¤ä¸­ï¼‰ delete åˆ é™¤åï¼Œåç»­å¦‚æœéœ€é‡æ–°åŠ å…¥ K8S é›†ç¾¤ã€‚åˆ™éœ€è¦é‡å¯ node èŠ‚ç‚¹çš„ kubelet æœåŠ¡ï¼Œé‡å¯åï¼ŒåŸºäº node çš„è‡ªæ³¨å†ŒåŠŸèƒ½ï¼Œè¯¥èŠ‚ç‚¹æ‰èƒ½é‡æ–°åŠ å…¥åˆ° K8S é›†ç¾¤ï¼Œå¹¶ä¸”æ¢å¤ä½¿ç”¨ï¼ˆå³æ¢å¤å¯è°ƒåº¦çš„èº«ä»½ï¼‰ã€‚ å¦å¤–ï¼šå¦‚æœ kubelet æœåŠ¡é‡å¯åï¼Œnode èŠ‚ç‚¹ç³»ç»Ÿæ—¶é—´è·Ÿå…¶ä»–èŠ‚ç‚¹ä¸ä¸€è‡´ï¼Œåˆ™å¯¼è‡´è¯¥èŠ‚ç‚¹è¯ä¹¦ä¼šå¤±æ•ˆï¼kubelet æ³¨å†Œåï¼Œè¿˜éœ€è¦æ‰‹åŠ¨ approve ç­¾å‘ TLS è®¤è¯æ“ä½œäº†ã€‚å¦‚ä¸‹ç¤ºä¾‹ï¼š äºŒã€ node æ·»åŠ ï¼ˆå‘ API server æ·»åŠ ï¼‰ 1. èŠ‚ç‚¹çš„ kubelet å‘æ§åˆ¶é¢è‡ªæ³¨å†Œ å½“ kubelet æ ‡å¿— --register-node ä¸º trueï¼ˆé»˜è®¤ï¼‰æ—¶ï¼Œå®ƒä¼šå°è¯•å‘ API æœåŠ¡æ³¨å†Œè‡ªå·±ã€‚ è¿™æ˜¯é¦–é€‰æ¨¡å¼ï¼Œè¢«ç»å¤§å¤šæ•°å‘è¡Œç‰ˆé€‰ç”¨ã€‚ 2. æ‰‹åŠ¨æ·»åŠ  node å¯¹è±¡ { \"kind\": \"Node\", \"apiVersion\": \"v1\", \"metadata\": { \"name\": \"10.240.79.157\", \"labels\": { \"name\": \"my-first-k8s-node\" } } } è¯´æ˜ï¼š Kubernetes ä¼šä¸€ç›´ä¿å­˜ç€éæ³•èŠ‚ç‚¹å¯¹åº”çš„å¯¹è±¡ï¼Œå¹¶æŒç»­æ£€æŸ¥è¯¥èŠ‚ç‚¹æ˜¯å¦å·²ç» å˜å¾—å¥åº·ã€‚ ä½ ï¼Œæˆ–è€…æŸä¸ªæ§åˆ¶å™¨å¿…éœ€æ˜¾å¼åœ°åˆ é™¤è¯¥ Node å¯¹è±¡ä»¥åœæ­¢å¥åº·æ£€æŸ¥æ“ä½œã€‚ Node å¯¹è±¡çš„åç§°å¿…é¡»æ˜¯åˆæ³•çš„ DNS å­åŸŸåã€‚ (7) èŠ‚ç‚¹æ§åˆ¶å™¨ èŠ‚ç‚¹æ§åˆ¶å™¨æ˜¯ Kubernetes æ§åˆ¶é¢ç»„ä»¶ï¼Œç®¡ç†èŠ‚ç‚¹çš„æ–¹æ–¹é¢é¢ã€‚ èŠ‚ç‚¹æ§åˆ¶å™¨åœ¨èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸä¸­æ‰®æ¼”å¤šä¸ªè§’è‰²ã€‚ ç¬¬ä¸€ä¸ªæ˜¯å½“èŠ‚ç‚¹æ³¨å†Œæ—¶ä¸ºå®ƒåˆ†é…ä¸€ä¸ª CIDR åŒºæ®µï¼ˆå¦‚æœå¯ç”¨äº† CIDR åˆ†é…ï¼‰ã€‚ ç¬¬äºŒä¸ªæ˜¯ä¿æŒèŠ‚ç‚¹æ§åˆ¶å™¨å†…çš„èŠ‚ç‚¹åˆ—è¡¨ä¸äº‘æœåŠ¡å•†æ‰€æä¾›çš„å¯ç”¨æœºå™¨åˆ—è¡¨åŒæ­¥ã€‚ å¦‚æœåœ¨äº‘ç¯å¢ƒä¸‹è¿è¡Œï¼Œåªè¦æŸèŠ‚ç‚¹ä¸å¥åº·ï¼ŒèŠ‚ç‚¹æ§åˆ¶å™¨å°±ä¼šè¯¢é—®äº‘æœåŠ¡æ˜¯å¦èŠ‚ç‚¹çš„è™šæ‹Ÿæœºä»å¯ç”¨ã€‚ å¦‚æœä¸å¯ç”¨ï¼ŒèŠ‚ç‚¹æ§åˆ¶å™¨ä¼šå°†è¯¥èŠ‚","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:3:1","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"3.2 Namespaces åœ¨ä¸€ä¸ª Kubernetes é›†ç¾¤ä¸­å¯ä»¥ä½¿ç”¨ namespace åˆ›å»ºå¤šä¸ª â€œè™šæ‹Ÿé›†ç¾¤â€ï¼Œå®ç°é›†ç¾¤é—´èµ„æºçš„éš”ç¦» (1) ä¸€äº›ç»†èŠ‚ç‚¹ åˆ é™¤ä¸€ä¸ª namespace ä¼šè‡ªåŠ¨åˆ é™¤æ‰€æœ‰å±äºè¯¥ namespace çš„èµ„æºã€‚ default å’Œ kube-system å‘½åç©ºé—´ä¸å¯åˆ é™¤ï¼›defaultã€kube-system ä»¥åŠ kube-public éƒ½æ˜¯é»˜è®¤å‘½åç©ºé—´ ç”¨æˆ·çš„æ™®é€šåº”ç”¨åœ¨ defalut ä¸‹é¢ ä¸é›†ç¾¤ç®¡ç†ç›¸å…³çš„ä¸ºæ•´ä¸ªé›†ç¾¤æä¾›æœåŠ¡çš„åº”ç”¨ä¸€èˆ¬éƒ¨ç½²åœ¨ kube-system PersistentVolume æ˜¯ä¸å±äºä»»ä½• namespace çš„ï¼Œä½† PersistentVolumeClaim æ˜¯å±äºæŸä¸ªç‰¹å®š namespace çš„ã€‚ Event æ˜¯å¦å±äº namespace å–å†³äºäº§ç”Ÿ event çš„å¯¹è±¡ã€‚ v1.7 ç‰ˆæœ¬å¢åŠ äº† kube-public å‘½åç©ºé—´ï¼Œè¯¥å‘½åç©ºé—´ç”¨æ¥å­˜æ”¾å…¬å…±çš„ä¿¡æ¯ï¼Œä¸€èˆ¬ä»¥ ConfigMap çš„å½¢å¼å­˜æ”¾ã€‚ namespaces ä¸åŒ…æ‹¬ node å’Œ persistentVolumeï¼Œé‚£ä¸ºå•¥ dashboard å¯ä»¥å®ç° node éš”ç¦»å‘¢ï¼Ÿ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:3:2","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"3.3 Label Label æ˜¯é™„ç€åˆ° object ä¸Šï¼ˆä¾‹å¦‚ Podï¼‰çš„é”®å€¼å¯¹ã€‚ \"labels\": { \"key1\" : \"value1\", \"key2\" : \"value2\" } k8s å°† lables æœ€ç»ˆç´¢å¼•å’Œåå‘ç´¢å¼•ç”¨æ¥ä¼˜åŒ–æŸ¥è¯¢å’Œ watchï¼Œä¸è¦åœ¨ label ä¸­ä½¿ç”¨å¤§å‹ã€éæ ‡è¯†çš„ç»“æ„åŒ–æ•°æ®ï¼Œè®°å½•è¿™æ ·çš„æ•°æ®åº”è¯¥ç”¨ annotation (1) ä½¿ç”¨ label æƒ…å½¢ å¯ä»¥å°è¯•å¦‚ä¸‹æ ‡ç­¾ \"release\" : \"stable\", \"release\" : \"canary\" \"environment\" : \"dev\", \"environment\" : \"qa\", \"environment\" : \"production\" \"tier\" : \"frontend\", \"tier\" : \"backend\", \"tier\" : \"cache\" \"partition\" : \"customerA\", \"partition\" : \"customerB\" \"track\" : \"daily\", \"track\" : \"weekly\" \"team\" : \"teamA\",\"team:\" : \"teamB\" (2) è¯­æ³•è§„åˆ™ Key ä¸èƒ½è¶…è¿‡ 63 ä¸ªå­—ç¬¦ å¯ä»¥ä½¿ç”¨å‰ç¼€ï¼Œå‰ç¼€ä½¿ç”¨/åˆ†éš”ï¼Œå‰ç¼€éœ€è¦æ˜¯ DNS å­åŸŸï¼Œä¸å¾—è¶…è¿‡ 253 ä¸ªå­—ç¬¦ï¼Œç³»ç»Ÿä¸­è‡ªåŠ¨åŒ–ç»„ä»¶åˆ›å»ºçš„ lable å¿…é¡»æŒ‡å®šå‰ç¼€ èµ·å§‹å¿…é¡»æ˜¯å­—æ¯ï¼ˆå¤§å°å†™éƒ½å¯ä»¥ï¼‰æˆ–æ•°å­—ï¼Œä¸­é—´å¯ä»¥æœ‰è¿å­—ç¬¦ã€ä¸‹åˆ’çº¿å’Œç‚¹ Value ä¸å¾—è¶…è¿‡ 63 ä¸ªå­—ç¬¦ èµ·å§‹å¿…é¡»æ˜¯å­—æ¯ï¼ˆå¤§å°å†™éƒ½å¯ä»¥ï¼‰æˆ–æ•°å­—ï¼Œä¸­é—´å¯ä»¥æœ‰è¿å­—ç¬¦ã€ä¸‹åˆ’çº¿å’Œç‚¹ (3) Selector é€‰æ‹©å™¨ label ä¸æ˜¯å”¯ä¸€çš„ï¼Œå¤šä¸ªå¯¹è±¡å¯èƒ½æœ‰ç›¸åŒçš„ label é€šè¿‡ selector å¯ä»¥é€‰æ‹©ä¸€ä¸ª obj é›†åˆï¼Œå¯¹è¿™ä¸ªé›†åˆè¿›è¡Œæ•´ä½“çš„æ“ä½œ 1. æ–¹å¼ä¸€ï¼š equality-based åŸºäºç­‰å€¼ å¯ä»¥ä½¿ç”¨æ“ä½œç¬¦=ã€==ã€!= = å’Œ == æ˜¯ä¸€ä¸ªæ„æ€ å¯ä½¿ç”¨é€—å·åˆ†éš”å¤šä¸ªè¡¨è¾¾å¼ 2. æ–¹å¼äºŒï¼šset-based åŸºäºé›†åˆ å¯ä»¥ä½¿ç”¨ inã€notionã€!æ“ä½œç¬¦ å¯ä»¥ç›´æ¥å†™å‡ºæŸä¸ª label-keyï¼Œè¡¨ç¤ºç›´æ¥é€‰ä¸­ï¼Œè€Œä¸ç®¡å¯¹åº”çš„ value æ˜¯ä½•å€¼ ï¼è¡¨ç¤ºæ²¡æœ‰è¯¥ label çš„é‚£äº› obj environment in (production, qa) # env ç­‰äºproductæˆ–è€…qa tier notin (frontend, backend) # tier ä¸ç­‰äºfrontendæˆ–è€…backendçš„èµ„æº partition # é”®ä¸ºpartition !partition # é”®ä¸ä¸ºpartitionçš„å…¨éƒ¨ 3. èµ„æºä¸­ç¤ºä¾‹ä½¿ç”¨ selector pod apiVersion:v1kind:Podmetadata:name:cuda-testspec:containers:- name:cuda-testimage:\"k8s.gcr.io/cuda-vector-add:v0.1\"resources:limits:nvidia.com/gpu:1nodeSelector:accelerator:nvidia-tesla-p100 service å’Œ ReplicationController \"selector\": { \"component\": \"redis\", } selector:component:redis ç­‰ä»·äº component=redis æˆ–è€… component inï¼ˆredisï¼‰ jobã€Deploymentã€Replica Set å’Œ DemonSet æ”¯æŒåŸºäºé›†åˆçš„éœ€æ±‚ selector:matchLabels:component:redismatchExpressions:- {key: tier, operator: In, values:[cache] }- {key: environment, operator: NotIn, values:[dev] } matchLabels æ˜¯ç”± {key,value} å¯¹ç»„æˆçš„æ˜ å°„ æœ‰æ•ˆçš„è¿ç®—ç¬¦åŒ…æ‹¬ Inã€NotInã€Exists å’Œ DoesNotExist æ¥è‡ª matchLabels å’Œ matchExpressions çš„æ‰€æœ‰è¦æ±‚éƒ½æŒ‰é€»è¾‘ä¸çš„å…³ç³»ç»„åˆåˆ°ä¸€èµ·,å®ƒä»¬å¿…é¡»éƒ½æ»¡è¶³æ‰èƒ½åŒ¹é… 4. é€šè¿‡æ ‡ç­¾/selector å°† pod åˆ†é…ç»™èŠ‚ç‚¹ åœºæ™¯ï¼šä¾‹å¦‚ï¼Œç¡®ä¿ Pod æœ€ç»ˆè½åœ¨è¿æ¥äº† SSD çš„æœºå™¨ä¸Šï¼Œæˆ–è€…å°†æ¥è‡ªä¸¤ä¸ªä¸åŒçš„æœåŠ¡ ä¸”æœ‰å¤§é‡é€šä¿¡çš„ Pods æ”¾ç½®åœ¨åŒä¸€ä¸ªå¯ç”¨åŒºã€‚ ä¸€ä¸ªç®€å•çš„ nginx é…ç½®æ–‡ä»¶ apiVerions:v1kind:Podmetadata:name:nginx-hxclabels:env:testspec:containers:- name:nginximage:nginximagePullPolicy:IfNotPresentnodeSelector:test/role:houWorker (4) äº²å’Œæ€§ä¸åäº²å’Œæ€§ ç›¸æ¯”äº selector ä¼˜ç‚¹ è¯­è¨€æ›´å…·è¡¨ç°åŠ›ï¼Œï¼ˆä¸å±€é™äºåªèƒ½ä½¿ç”¨å®Œå…¨åŒ¹é…ä¸” AND è¿æ¥çš„è§„åˆ™ï¼‰ å¯ä»¥è®¾ç½®â€œè½¯éœ€æ±‚â€ï¼Œå³å¦‚æœå®åœ¨æ— æ³•æ»¡è¶³è¦æ±‚ï¼Œä»ç„¶æ˜¯å¯è°ƒåº¦çš„ å¯ä»¥ä½¿ç”¨èŠ‚ç‚¹ä¸Šçš„ pod çš„æ ‡ç­¾æ¥çº¦æŸï¼Œè€Œä¸ä»…ä»…æ˜¯èŠ‚ç‚¹çš„æ ‡ç­¾ ä¸€ã€èŠ‚ç‚¹äº²å’Œæ€§ requiredDuringSchedulingIgnoredDuringExecution â€œç¡¬éœ€æ±‚â€ å¿…é¡»æ»¡è¶³ preferredDuringScheduingIgnoredDuringExecution â€œè½¯éœ€æ±‚â€ å°½é‡æ»¡è¶³ IgnoredDuringExecution æ„å‘³ç€ï¼Œåœ¨ pod è¿è¡Œæ—¶ï¼Œå¦‚æœæ ‡ç­¾ä¸å†æ»¡è¶³è¦æ±‚ä¹Ÿä¸ä¼šè¢«é©±é€ èŠ‚ç‚¹äº²å’Œæ€§ affinity éƒ¨ç½²ç¤ºä¾‹ apiVersion:v1kind:Podmetadata:name:with-node-affinityspec:containers:- name:with-node-affinityimage:k8s.gcr.io/pause:2.0imagePullPolicy:IfNotPresentaffinity:nodeAffinity:requiredDuringSchedulingIgnoredDuringExecution:nodeSelectorTerms:- matchExpressions:- key:test.com/roleoperator:Invalues:- hxcWorker- hxcWorker2preferredDuringSchedulingIgnoredDuringExecution:- weight:1preference:matchExpressions:- key:another/roleoperator:Invalues:- anotherWorker äº²å’Œæ€§æ”¯æŒçš„æ“ä½œç¬¦ Inã€NotInã€Existsã€DoesNotExistã€Gtã€Lt åäº²å’Œæ€§æ“ä½œç¬¦ NotInã€DoesNotExist å¦‚æœåŒæ—¶æŒ‡å®šnodeSelectorå’ŒnodeAffinityï¼Œåˆ™ä¸¤è€…éƒ½è¦æ»¡è¶³ï¼Œæ‰èƒ½å°† pod è°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Š ä¸€ä¸ªnodeSelectorTermsä¸­çš„ä»»æ„ä¸€ä¸ªmatchExpressionsæ»¡è¶³å°±å¯ä»¥è°ƒåº¦ nodeAffinity:requiredDuringSchedulingIgnoredDuringExecution:nodeSelectorTerms:# array- matchExpressions:- key:test.com/roleoperator:Invalues:- hxcWorker- hxcWorker2- key:matchoperator:Invalues:- yep- matchExpressions:- key:match2operator:Invalues:- hxcWorker- hxcWorker2# ä¸¤ä¸ªmatchExpressionsæ»¡è¶³ä¸€ä¸ªå³å¯ ä¸€ä¸ªmatchExpressionå†…çš„å…¨éƒ¨è§„åˆ™éƒ½åŒ¹é…æ‰èƒ½è°ƒåº¦ nodeAffinity:requiredDuringSchedulingIgnoredDuringExecution:nodeSelectorTerms:# array- matchExpressions:- key:test.com/roleoperator:Invalues:- hxcWorker- hxcWorker2- key:matchoperator:Invalues:- yep# test.com/roleå’Œmatchä¸¤æ¡æ ‡ç­¾å‡è¦æ»¡è¶³æ‰èƒ½è°ƒåº¦ äº²å’Œæ€§ä¹Ÿæ˜¯åªåœ¨èŠ‚ç‚¹è°ƒåº¦æ—¶æœ‰æ•ˆï¼Œå³å¦‚æœè¿è¡Œæ—¶ï¼Œæ ‡ç­¾ä¿®æ”¹ï¼Œä¹Ÿä¸ä¼šé©±é€èŠ‚ç‚¹ preferredDuringSchedulingIgnoredDuringExecutionä¸­çš„weightå­—æ®µèŒƒå›´æ—¶ 1-100ï¼Œæœ€ç»ˆé€šè¿‡æ€»åˆ†ä¸å…¶ä»–èŠ‚ç‚¹ pk äºŒã€Pod é—´äº²å’Œæ€§/åäº²å’Œæ€§ï¼ˆçº¦æŸ pod æ ‡ç­¾è€Œä¸æ˜¯èŠ‚ç‚¹æ ‡ç­¾ï¼‰ pod é—´äº²å’Œæ€§éœ€è¦å¤§é‡çš„å¤„ç†ï¼Œä¼šå½±å“é›†ç¾¤è°ƒåº¦çš„é€Ÿåº¦ï¼Œå¦‚æœé›†ç¾¤è§„æ¨¡è¿‡å¤§ï¼Œä¸å»ºè®®ä½¿ç”¨ # ç¤ºä¾‹apiVersion:v1kind:Podmetadata:name:with-pod-affinityspec:affinity:podAffinity:# å…³é”®ç»“æ„ä¸€ï¼špodAffinityrequiredDuringSchedulingIgnoredDuringExecution:- labelSelector:matchExpressions:- key:securityoperator:Invalues:- S1topologyKe","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:3:3","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"3.4 Annotation Annotation-æ³¨è§£ã€‚å¯ä»¥ä¸º K8S èµ„æºå¯¹è±¡æ·»åŠ ä»»æ„çš„éæ ‡è¯†æ€§å…ƒæ•°æ®ã€‚ è¿™äº›å…ƒæ•°æ®å¯ä»¥ç†è§£ä¸ºè®°å½•äº†ä¸€äº›å¤‡æ³¨ä¿¡æ¯ï¼Œä¸ label ä¸åŒç‚¹åœ¨äºï¼Œlabel ä¸»è¦ç”¨äºæ ‡è¯†ä¸”é€‰æ‹©å¯¹è±¡ã€‚ å¸¸ç”¨è®°å½•ä¿¡æ¯ ç”±å£°æ˜æ€§é…ç½®æ‰€ç®¡ç†çš„å­—æ®µã€‚ å°†è¿™äº›å­—æ®µé™„åŠ ä¸ºæ³¨è§£ï¼Œèƒ½å¤Ÿå°†å®ƒä»¬ä¸å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯è®¾ç½®çš„é»˜è®¤å€¼ã€ è‡ªåŠ¨ç”Ÿæˆçš„å­—æ®µä»¥åŠé€šè¿‡è‡ªåŠ¨è°ƒæ•´å¤§å°æˆ–è‡ªåŠ¨ä¼¸ç¼©ç³»ç»Ÿè®¾ç½®çš„å­—æ®µåŒºåˆ†å¼€æ¥ã€‚ æ„å»ºã€å‘å¸ƒæˆ–é•œåƒä¿¡æ¯ï¼ˆå¦‚æ—¶é—´æˆ³ã€å‘å¸ƒ IDã€Git åˆ†æ”¯ã€PR æ•°é‡ã€é•œåƒå“ˆå¸Œã€ä»“åº“åœ°å€ï¼‰ã€‚ æŒ‡å‘æ—¥å¿—è®°å½•ã€ç›‘æ§ã€åˆ†ææˆ–å®¡è®¡ä»“åº“çš„æŒ‡é’ˆã€‚ å¯ç”¨äºè°ƒè¯•ç›®çš„çš„å®¢æˆ·ç«¯åº“æˆ–å·¥å…·ä¿¡æ¯ï¼šä¾‹å¦‚ï¼Œåç§°ã€ç‰ˆæœ¬å’Œæ„å»ºä¿¡æ¯ã€‚ ç”¨æˆ·æˆ–è€…å·¥å…·/ç³»ç»Ÿçš„æ¥æºä¿¡æ¯ï¼Œä¾‹å¦‚æ¥è‡ªå…¶ä»–ç”Ÿæ€ç³»ç»Ÿç»„ä»¶çš„ç›¸å…³å¯¹è±¡çš„ URLã€‚ è½»é‡çº§ä¸Šçº¿å·¥å…·çš„å…ƒæ•°æ®ä¿¡æ¯ï¼šä¾‹å¦‚ï¼Œé…ç½®æˆ–æ£€æŸ¥ç‚¹ã€‚ è´Ÿè´£äººå‘˜çš„ç”µè¯æˆ–å‘¼æœºå·ç ï¼Œæˆ–æŒ‡å®šåœ¨ä½•å¤„å¯ä»¥æ‰¾åˆ°è¯¥ä¿¡æ¯çš„ç›®å½•æ¡ç›®ï¼Œå¦‚å›¢é˜Ÿç½‘ç«™ã€‚ ä»ç”¨æˆ·åˆ°æœ€ç»ˆè¿è¡Œçš„æŒ‡ä»¤ï¼Œä»¥ä¿®æ”¹è¡Œä¸ºæˆ–ä½¿ç”¨éæ ‡å‡†åŠŸèƒ½ã€‚ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:3:4","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"3.5 Taint and Toleration å…·æœ‰taintçš„ node å’Œ pod æ˜¯äº’æ–¥å…³ç³»ï¼›å…·æœ‰èŠ‚ç‚¹äº²å’Œæ€§å…³ç³»çš„ node å’Œ pod æ˜¯ç›¸å¸å…³ç³» æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥åº”ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªtaint å¦‚æœè®¾ç½®äº† taintï¼Œé‚£äº›ä¸èƒ½å®¹å¿è¯¥ taint çš„ podï¼Œä¸ä¼šè¢«è¯¥èŠ‚ç‚¹æ¥å—ï¼›å¦‚æœå°† toleration åº”ç”¨åœ¨ pod ä¸Šï¼Œåˆ™è¡¨ç¤ºè¿™äº› pod å¯ä»¥è¢«è°ƒåº¦åˆ°å…·æœ‰ç›¸åº” taint çš„èŠ‚ç‚¹ä¸Š (1) Node è®¾ç½® taint è§å‘½ä»¤ç« èŠ‚ (2) Pod è®¾ç½® toleration # spec ä¸­ è®¾ç½®tolerationå­—æ®µtoleration:- key:\"key1\"operator:\"Equal\"value:\"value1\"effect:\"NoSchedule\"- key:\"node.alpha.kubernetes.io/unreachable\"operator:\"Exists\"effect:\"NoExecute\"tolerationSeconds:6000 operator taint å’Œ toleration ç›¸åŒ¹é…æ˜¯æŒ‡å…·æœ‰ä¸€æ ·çš„ key å’Œ effect å¦‚æœoperatoræ˜¯Existsï¼Œåˆ™keyå’Œeffectç›¸åŒå³å¯ å¦‚æœoperatoræ˜¯Equalï¼Œåˆ™key,effectå’Œvalueéƒ½éœ€è¦ä¸€æ · ç‰¹æ®Šæƒ…å†µ å¦‚æœkeyä¸ºç©ºï¼Œä¸”operatorä¸ºExistsï¼Œè¡¨ç¤ºè¯¥ toleration èƒ½å®¹å¿ä»»æ„çš„ taint å¦‚æœeffectä¸ºç©ºï¼Œåˆ™è¯¥ toleration å¯ä»¥ä¸ä»»æ„çš„é”®åç›¸åŒçš„effectç›¸åŒ¹é… æ•ˆæœ NoSchedule: ä¸ä¼šå°† Pod åˆ†é…åˆ°è¯¥èŠ‚ç‚¹ PreferNoScheduleï¼šå°è¯•å°½é‡ä¸å°† Pod åˆ†é…åˆ°è¯¥èŠ‚ç‚¹ NoExecute: ä¸ä¼šå°† Pod åˆ†é…åˆ°è¯¥èŠ‚ç‚¹ï¼Œæˆ–è€…å°† Pod ä»è¯¥èŠ‚ç‚¹é©±é€ æ­¤æ—¶ï¼ŒtolerationSecondsè¡¨æ˜äº†è¯¥ Pod è¿˜èƒ½ç»§ç»­åœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œçš„æ—¶é—´ (3) åº”ç”¨åœºæ™¯ ä¸“ç”¨èŠ‚ç‚¹ å°†æŸäº›èŠ‚ç‚¹ä¸“é—¨åˆ†é…ç»™ç‰¹å®šçš„ä¸€ç»„ç”¨æˆ·ä½¿ç”¨ kubectl taint nodes nodename dedicated=groupName:NoSchedule è¯¥æ–¹æ¡ˆåªèƒ½ä½¿å¾—ä¸æ˜¯è¯¥ group çš„ pod ä¸è¢«åˆ†é…åˆ°è¿™äº›ä¸“ç”¨èŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œå¦‚æœæƒ³è®©è¯¥ group çš„ pod åªåœ¨è¿™äº›ä¸“ç”¨èŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œå¯ä»¥é…åˆ lable ä¸€èµ·ä½¿ç”¨ é…ç½®ç‰¹æ®Šç¡¬ä»¶çš„èŠ‚ç‚¹ æ¯”å¦‚ GPU èµ„æº kubecl taint nodes nodename special=true:NoSchedule åŸºäºæ±¡ç‚¹çš„é©±é€ æ¯ä¸ª Pod ä¸­é…ç½®çš„å½“èŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶çš„é©±é€è¡Œä¸º ä¸Šè¿°çš„ä¸“ç”¨èŠ‚ç‚¹å’Œé…ç½®ç‰¹æ®Šç¡¬ä»¶çš„èŠ‚ç‚¹ç­‰åº”ç”¨åœºæ™¯ä¸­å¯ä»¥ç”¨åˆ°å‡†å…¥æ§åˆ¶å™¨ (4) åŸºäºæ±¡ç‚¹çš„é©±é€ æŸç§æ¡ä»¶ä¸ºçœŸæ—¶ï¼ŒèŠ‚ç‚¹æ§åˆ¶å™¨ä¼šè‡ªåŠ¨ç»™èŠ‚ç‚¹æ·»åŠ æ±¡ç‚¹ï¼Œè¿™äº›å†…ç½®çš„æ±¡ç‚¹åŒ…æ‹¬ node.kubernetes.io/not-ready : èŠ‚ç‚¹æœªå‡†å¤‡å¥½ï¼Œç›¸å½“äºèŠ‚ç‚¹çš„ReadyçŠ¶æ€æ—¶False node.kubernetes.io/unreachable: èŠ‚ç‚¹æ§åˆ¶å™¨è®¿é—®ä¸åˆ°èŠ‚ç‚¹ï¼Œç›¸å½“äºèŠ‚ç‚¹çš„ReadyçŠ¶æ€ä¸ºUnkonwn node.kubernetes.io/memory-pressure: èŠ‚ç‚¹å­˜åœ¨å†…å­˜å‹åŠ› node.kubernetes.io/disk-pressure: èŠ‚ç‚¹å­˜åœ¨ç£ç›˜å‹åŠ› node.kubernetes.io/pid-pressure: èŠ‚ç‚¹å­˜åœ¨ PID å‹åŠ› node.kubernetes.io/network-unavilable: èŠ‚ç‚¹ç½‘ç»œä¸å¯ç”¨ node.kubernetes.io/unschedulable: èŠ‚ç‚¹ä¸å¯è°ƒåº¦ node.cloudprovider.kubernetes.io/uninitialized: å¤–éƒ¨äº‘å¹³å°é©±åŠ¨ï¼Œç»™èŠ‚ç‚¹æ·»åŠ äº†ä¸€ä¸ªæ±¡ç‚¹æ ‡å¿—ä¸ºä¸å¯ç”¨ K8S ä¼šè‡ªåŠ¨ç»™ Pod æ·»åŠ ä¸€ä¸ª key ä¸ºnode.kubernetes.io/not-readyçš„å®¹å¿åº¦ï¼Œå¹¶é…ç½®toleration=300,é™¤éç”¨æˆ·çš„ Pod é…ç½®ä¸­å·²ç»è®¾ç½®äº†è¯¥é¡¹ åŒæ ·ï¼ŒK8S ä¹Ÿä¼šè®¾ç½®unreachableä¸­toleration=300,å³ç›¸å…³é—®é¢˜è¢«æ£€æµ‹å‡ºåï¼ŒPod èƒ½å¤Ÿç»§ç»­åœ¨å½“å‰èŠ‚ç‚¹è¿è¡Œ 5 åˆ†é’Ÿ (5) åŸºäºèŠ‚ç‚¹çŠ¶æ€æ·»åŠ æ±¡ç‚¹ æ§åˆ¶å¹³é¢ä½¿ç”¨èŠ‚ç‚¹æ§åˆ¶å™¨è‡ªåŠ¨åˆ›å»ºäºèŠ‚ç‚¹çŠ¶å†µå¯¹åº”çš„å¸¦æœ‰NoScheduleçš„æ±¡ç‚¹ è°ƒåº¦å™¨åœ¨è¿›è¡Œè°ƒåº¦æ—¶æ£€æŸ¥æ±¡ç‚¹ï¼Œè€Œä¸æ˜¯æ£€æŸ¥èŠ‚ç‚¹çŠ¶å†µã€‚ DemonSet æ§åˆ¶å™¨ä¸º Pod æ·»åŠ çš„å®¹å¿åº¦åŒ…æ‹¬memory-pressure,disk-pressure,pid-pressure,unschedulable,network-navailable ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:3:5","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"3.6 åƒåœ¾æ”¶é›† (1) åƒåœ¾æ”¶é›†çš„èµ„æºç±»å‹ å¤±è´¥çš„ Pod å·²å®Œæˆçš„ Job ä¸å†å­˜åœ¨å±ä¸»å¼•ç”¨çš„å¯¹è±¡ æœªä½¿ç”¨çš„å®¹å™¨å’Œå®¹å™¨é•œåƒ åŠ¨æ€åˆ¶å¤‡çš„ã€StorageClass å›æ”¶ç­–ç•¥ä¸º Delete çš„ PV å· é˜»æ»æˆ–è€…è¿‡æœŸçš„ CertificateSigningRequest (CSRs) åœ¨ä»¥ä¸‹æƒ…å½¢ä¸­åˆ é™¤äº†çš„ èŠ‚ç‚¹ å¯¹è±¡ï¼š å½“é›†ç¾¤ä½¿ç”¨äº‘æ§åˆ¶å™¨ç®¡ç†å™¨è¿è¡Œäºäº‘ç«¯æ—¶ï¼› å½“é›†ç¾¤ä½¿ç”¨ç±»ä¼¼äºäº‘æ§åˆ¶å™¨ç®¡ç†å™¨çš„æ’ä»¶è¿è¡Œåœ¨æœ¬åœ°ç¯å¢ƒä¸­æ—¶ã€‚ èŠ‚ç‚¹ç§Ÿçº¦å¯¹è±¡ (2) Owner å’Œ Dependentï¼ˆæ”¶ä¾›å…»è€…ï¼Œä¾èµ–è€…ï¼‰ å…·æœ‰ Owner çš„å¯¹è±¡è¢«ç§°ä¸ºæ˜¯ Owner çš„ Dependentï¼Œä¾‹å¦‚ä¸€ä¸ª ReplicaSet æ˜¯ä¸€ç»„ Pod çš„ Owner æ¯ä¸ª Dependent å¯¹è±¡å…·æœ‰ä¸€ä¸ªæŒ‡å‘å…¶æ‰€å±å¯¹è±¡çš„metadata.ownerReferenceså­—æ®µ é€šè¿‡kubectl get pods coredns-558bd4d5db-45f7v -n kube-system --output=yamlæŸ¥çœ‹ metadata ä¸­çš„ownerReferenceä¿¡æ¯ apiVersion:v1kind:Podmetadata:creationTimestamp:'2022-03-14T07:51:26Z'generateName:coredns-558bd4d5db-labels:k8s-app:kube-dnspod-template-hash:558bd4d5dbname:coredns-558bd4d5db-45f7vnamespace:kube-systemownerReferences:- apiVersion:apps/v1blockOwnerDeletion:truecontroller:truekind:ReplicaSetname:coredns-558bd4d5dbuid:2dc8bfca-ac8f-4e24-a64b-f5c79860e862resourceVersion:'724'uid:db321d22-df72-40da-a667-64b2183ecac5 (3) æ§åˆ¶åƒåœ¾æ”¶é›†å™¨åˆ é™¤ Dependent å½“åˆ é™¤å¯¹è±¡æ—¶ï¼Œå¯ä»¥æŒ‡å®šæ˜¯å¦è¯¥å¯¹è±¡çš„ Dependent ä¹Ÿè‡ªåŠ¨åˆ é™¤æ‰ã€‚è‡ªåŠ¨åˆ é™¤ Dependent ä¹Ÿç§°ä¸ºçº§è”åˆ é™¤ã€‚ K8S æœ‰ä¸¤ç§çº§è”åˆ é™¤æ¨¡å¼ï¼šbackground æ¨¡å¼å’Œforeground æ¨¡å¼ å¦‚æœåˆ é™¤å¯¹è±¡æ—¶ï¼Œä¸è‡ªåŠ¨åˆ é™¤å®ƒçš„ Dependentï¼Œè¿™äº› Dependent è¢«ç§°ä½œæ˜¯åŸå¯¹è±¡çš„å­¤å„¿(Orphaned) 1. Background çº§è”åˆ é™¤ é»˜è®¤æƒ…å†µä¸‹ï¼ŒK8S ä½¿ç”¨backgroundçš„çº§è”åˆ é™¤æ–¹æ¡ˆï¼Œé™¤éæ‰‹åŠ¨è®¾ç½®äº†ä½¿ç”¨foregroundæˆ–è€…é€‰æ‹©é—å¼ƒ dependent å¯¹è±¡ K8S ä¼šç«‹å³åˆ é™¤ Owner å¯¹è±¡ï¼Œç„¶ååƒåœ¾æ”¶é›†å™¨ä¼šåœ¨åå°åˆ é™¤è¿™äº› Dependent 2. Foreground çº§è”åˆ é™¤ è¢«åˆ é™¤çš„ Owner é¦–å…ˆè¿›å…¥deletion in progressçŠ¶æ€ï¼ŒOwer å¯¹è±¡å°†ä¼š K8S å°† Owner çš„metadata.deletionTimestampå­—æ®µè®¾ç½®ä¸ºå¯¹è±¡è¢«æ ‡è®°ä¸ºè¦åˆ é™¤çš„æ—¶é—´ç‚¹ K8S å°† Owner çš„metadata.finalizerså­—æ®µè®¾ç½®ä¸ºforegroundDeletion åœ¨deletion in progressåˆ é™¤è¿‡ç¨‹å®Œæˆä¹‹å‰ï¼ŒK8S API è¿˜æ˜¯å¯ä»¥çœ‹åˆ°è¯¥å¯¹è±¡çš„ å½“ Owner è¿›å…¥deletion in progressçŠ¶æ€ä¹‹åï¼Œæ§åˆ¶å™¨å¼€å§‹åˆ é™¤ Owner çš„ Dependentï¼Œåˆ é™¤å®Œä¾èµ–å¯¹è±¡ä¹‹åï¼Œåˆ é™¤ Owner å¯¹è±¡ï¼Œè¿™æ—¶ï¼Œå°±æ— æ³•é€šè¿‡ K8S API æŸ¥çœ‹åˆ°è¯¥å¯¹è±¡ Dependent å¯¹è±¡å¦‚æœå¸¦æœ‰ownerReference.blockOwnerDeletion=trueå­—æ®µï¼Œåˆ™å¯èƒ½ä¼šé˜»å¡ Owner å¯¹è±¡è¢«åˆ é™¤ã€‚[https://kubernetes.io/zh/docs/tasks/administer-cluster/use-cascading-deletion/#use-foreground-cascading-deletion] (4) å¯¹æœªä½¿ç”¨å®¹å™¨å’Œé•œåƒçš„åƒåœ¾æ”¶é›† kubeletä¼šæ¯äº”åˆ†é’Ÿå¯¹æœªä½¿ç”¨çš„é•œåƒæ‰§è¡Œä¸€æ¬¡åƒåœ¾æ”¶é›†ï¼›æ¯ä¸€åˆ†é’Ÿå¯¹æœªä½¿ç”¨çš„å®¹å™¨æ‰§è¡Œä¸€æ¬¡åƒåœ¾æ”¶é›† å¦‚æœæƒ³è¦è‡ªå®šä¹‰å¯¹å®¹å™¨å’Œé•œåƒçš„åƒåœ¾æ”¶é›†é€‰é¡¹ï¼Œå¯ä»¥é…ç½®ä¸€ä¸ªé…ç½®æ–‡ä»¶,åŸºäºKubeletConfigurationèµ„æºç±»å‹æ¥è°ƒæ•´ä¸åƒåœ¾æ”¶é›†ç›¸å…³çš„ kubelet è¡Œä¸ºï¼›ç”±äº kubelet å¯¹å®¹å™¨å’Œé•œåƒä¼šæœ‰åƒåœ¾å›æ”¶ç›¸å…³çš„ç®¡ç†ï¼Œæ‰€ä»¥ä¸æ¨èä½¿ç”¨å¤–éƒ¨çš„ç¬¬ä¸‰æ–¹åƒåœ¾æ”¶é›†å·¥å…·ã€‚ å®¹å™¨é•œåƒç”Ÿå‘½å‘¨æœŸ K8S é€šè¿‡é•œåƒç®¡ç†å™¨ï¼ˆImage Managerï¼‰æ¥ç®¡ç†æ‰€æœ‰é•œåƒçš„ç”Ÿå‘½å‘¨æœŸï¼ŒImage Manager æ˜¯ Kubelet çš„ä¸€éƒ¨åˆ†ï¼Œå·¥ä½œæ—¶éœ€è¦ä¸cadvisoråä½œ kubelet åƒåœ¾æ”¶é›†æ—¶çš„è€ƒè™‘å› ç´ åŒ…æ‹¬HighThresholdPercent,LowThresholdPercent å¦‚æœç£ç›˜ç”¨é‡è¶…å‡ºé…ç½®ç­‰Highæ—¶ä¼šè§¦å‘åƒåœ¾æ”¶é›†ï¼Œåƒåœ¾æ”¶é›†å™¨ä¼šåŸºäºé•œåƒä¸Šæ¬¡ä½¿ç”¨çš„æ—¶é—´æ¥æŒ‰é¡ºåºåˆ é™¤é•œåƒï¼Œkubelet ä¼šæŒç»­åˆ é™¤é•œåƒï¼Œç›´åˆ°ç£ç›˜ç”¨é‡è¾¾åˆ°low å®¹å™¨åƒåœ¾æ”¶é›† kubelet ä¼šåŸºäºå¦‚ä¸‹å˜é‡å¯¹å®¹å™¨æ‰§è¡Œåƒåœ¾æ”¶é›†ï¼Œè¿™äº›å˜é‡å¯ä»¥æ‰‹åŠ¨å®šä¹‰ MinAge: å½“å®¹å™¨å¹´é¾„å¤§äºè¯¥å€¼æ—¶ kubelet æ‰å¯ä»¥åƒåœ¾å›æ”¶è¯¥å®¹å™¨ MaxPerPodContainer ï¼š æ¯ä¸ª Pod å¯ä»¥åŒ…å«çš„å·²æ­»äº¡çš„å®¹å™¨æ•°é‡ä¸Šé™ MaxContainers ï¼š é›†ç¾¤ä¸­å¯ä»¥å­˜åœ¨çš„å·²æ­»äº¡çš„å®¹å™¨æ•°é‡ä¸Šé™ MaxPerPodContainerå’ŒMaxContainerså¯èƒ½å†²çªï¼Œå†²çªæ—¶é€šè¿‡è°ƒæ•´MaxPerPodContaineræ¥è§£å†³ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:3:6","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"å››ã€æ§åˆ¶å™¨ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:4:0","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"4.1 Deployment deployment ä¼šå»åˆ›å»ºå¯¹åº”çš„ rsï¼Œrs å†å»åˆ›å»ºå¯¹åº”çš„ pod dp æ”¯æŒæ»šåŠ¨å‡çº§å’Œå›æ»šåº”ç”¨ï¼ˆé€šè¿‡æ§åˆ¶ rs çš„ç‰ˆæœ¬ï¼‰ æ¯”å¦‚æ»šåŠ¨æ›´æ–°ä¼šåˆ›å»ºæ–°çš„ rsï¼Œä½†æ˜¯æ—§çš„ rs ä¸åˆ é™¤ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å›æ»š dp æ”¯æŒæš‚åœå’Œç»§ç»­ï¼ˆé€šè¿‡æ§åˆ¶ rs å­˜åœ¨çš„æ•°é‡ï¼Ÿï¼Ÿï¼Ÿï¼‰ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:4:1","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"4.2 StateFulSet æœ‰çŠ¶æ€æœåŠ¡ä¸å¤ªå¥½å¤„ç†ï¼Œdocker æ˜¯é€šè¿‡æŒä¹…åŒ–å­˜å‚¨å·çš„æ–¹å¼æ¥å®ç°ï¼Œk8s æä¾›äº† statefule æ¥æ”¯æŒ ä½†æ˜¯å¯¹äº mysqlï¼Œå¯èƒ½ç°åœ¨çš„æ”¯æŒè¿˜ä¸æ˜¯ç‰¹åˆ«çš„å®Œå–„ é€šè¿‡ç¨³å®šçš„æŒä¹…åŒ–å­˜å‚¨ï¼Œpod é‡æ–°è°ƒåº¦åèƒ½å¤Ÿè®¿é—®åˆ°ç›¸åŒçš„æŒä¹…åŒ–æ•°æ®ï¼ŒåŸºäº PVC æ¥å®ç° ç¨³å®šçš„ç½‘ç»œæ ‡è¯†ï¼šPodName å’Œ HostName ä¸å˜ï¼ŒåŸºäº headless service(å³æ²¡æœ‰ cluster ip çš„ service)æ¥å®ç° æœ‰åºéƒ¨ç½²ï¼Œpod çš„éƒ¨ç½²æ˜¯æœ‰å‰åé¡ºåºçš„ï¼ŒåŸºäº init C æ¥å®ç° æœ‰åºæ”¶ç¼©ï¼Œæœ‰åºåˆ é™¤ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:4:2","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"4.3 DaemonSet(è¿˜ä¸æ˜¯ç‰¹åˆ«ç†è§£) DaemonSet ç¡®ä¿å…¨éƒ¨ï¼ˆæˆ–è€…ä¸€äº›ï¼‰Node ä¸Šè¿è¡Œä¸€ä¸ª Pod çš„å‰¯æœ¬ã€‚å½“æœ‰ Node åŠ å…¥é›†ç¾¤æ—¶ï¼Œä¹Ÿä¼šä¸ºä»–ä»¬æ–°å¢ä¸€ä¸ª Pod ã€‚å½“æœ‰ Node ä»é›†ç¾¤ç§»é™¤æ—¶ï¼Œè¿™äº› Pod ä¹Ÿä¼šè¢«å›æ”¶ã€‚åˆ é™¤ DaemonSet å°†ä¼šåˆ é™¤å®ƒåˆ›å»ºçš„æ‰€æœ‰ Podã€‚ ä½¿ç”¨ DaemonSet çš„ä¸€äº›å…¸å‹ç”¨æ³•ï¼š è¿è¡Œé›†ç¾¤å­˜å‚¨ daemonï¼Œä¾‹å¦‚åœ¨æ¯ä¸ª Node ä¸Šè¿è¡Œ glusterdã€cephã€‚ åœ¨æ¯ä¸ª Node ä¸Šè¿è¡Œæ—¥å¿—æ”¶é›† daemonï¼Œä¾‹å¦‚fluentdã€logstashã€‚ åœ¨æ¯ä¸ª Node ä¸Šè¿è¡Œç›‘æ§ daemonï¼Œä¾‹å¦‚ Prometheus Node Exporterã€collectdã€Datadog ä»£ç†ã€New Relic ä»£ç†ï¼Œæˆ– Ganglia gmondã€‚ ä¸€ä¸ªç®€å•çš„ç”¨æ³•æ˜¯ï¼Œåœ¨æ‰€æœ‰çš„ Node ä¸Šéƒ½å­˜åœ¨ä¸€ä¸ª DaemonSetï¼Œå°†è¢«ä½œä¸ºæ¯ç§ç±»å‹çš„ daemon ä½¿ç”¨ã€‚ ä¸€ä¸ªç¨å¾®å¤æ‚çš„ç”¨æ³•å¯èƒ½æ˜¯ï¼Œå¯¹å•ç‹¬çš„æ¯ç§ç±»å‹çš„ daemon ä½¿ç”¨å¤šä¸ª DaemonSetï¼Œä½†å…·æœ‰ä¸åŒçš„æ ‡å¿—ï¼Œå’Œ/æˆ–å¯¹ä¸åŒç¡¬ä»¶ç±»å‹å…·æœ‰ä¸åŒçš„å†…å­˜ã€CPU è¦æ±‚ã€‚ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:4:3","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"4.4 ReplicationController ï¼ˆå·²ç»æ˜¯è¿‡å»æ—¶äº†ï¼‰ï¼Œ ReplicaSet RC å°±æ˜¯æœ€åŸºæœ¬ï¼Œç»´æŒ pod å‰¯æœ¬æ•°ä¸å¤šä¹Ÿä¸å°‘ RS ä¸ RC æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œæ”¯æŒé›†åˆå¼çš„ selector RS å…·æœ‰æ‰©å®¹ã€ç¼©å®¹åŠŸèƒ½ kubectl explain rs ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:4:4","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"4.5 Jobã€ CronJob å¤„ç†è„šæœ¬æ‰§è¡Œçš„é—®é¢˜ job å¦‚æœè¿è¡Œè„šæœ¬æ²¡æœ‰ 0 æˆåŠŸé€€å‡ºï¼Œä¼šå†æ¬¡é‡æ–°è¿è¡Œ cronjon åªæ˜¯åœ¨ job çš„åŸºç¡€ä¸Šå®ç°å‘¨æœŸæ€§è¿è¡Œï¼ˆé€šè¿‡åœ¨ç‰¹å®šçš„æ—¶é—´å¾ªç¯åˆ›å»º job æ¥å®ç°ï¼‰ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:4:5","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"4.6 Horizontal Pod Autoscaling ï¼ˆæ°´å¹³è‡ªåŠ¨æ‰©å±•ï¼‰ å¯ä»¥ç†è§£ä¸ºä¸æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œè€Œæ˜¯ä¸€ä¸ªæ§åˆ¶å™¨çš„é™„å±å“ åˆ›å»ºäº†ä¸€ä¸ª dp ä¹‹åï¼Œå¯ä»¥å†åˆ›å»ºä¸€ä¸ª hpa æ¥ç®¡ç†æ§åˆ¶ dp å¯ä»¥é€šè¿‡ä¸€äº›èµ„æºæŒ‡æ ‡ï¼ˆCPUï¼Œmemï¼‰ç­‰æ¥å®ç° pod ç¼©æ”¾ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:4:6","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"äº”ã€æœåŠ¡å‘ç°ä¸è·¯ç”± ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:5:0","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"5.1 service æ¯ä¸ª svc å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¾®æœåŠ¡ (1) svc è´Ÿè½½å‡è¡¡ åªèƒ½å®ç° 4 å±‚è´Ÿè½½å‡è¡¡ï¼Œæ²¡æœ‰ 7 å±‚è´Ÿè½½å‡è¡¡èƒ½åŠ› (2) svc ç±»å‹ clusterIP ï¼š è‡ªåŠ¨åˆ†é…ä¸€ä¸ª cluster å†…éƒ¨ï¼ˆèŠ‚ç‚¹å†…éƒ¨ï¼‰å¯ä»¥è®¿é—®çš„ IPï¼Œå³èŠ‚ç‚¹å†…å…¶ä»– pod å¯ä»¥é€šè¿‡è¿™ä¸ª ip è®¿é—®åˆ° svc å³è®¿é—®åˆ° svc å¯¹åº”çš„ pod NodePort ï¼š åœ¨ clusterIp çš„åŸºç¡€ä¸Šï¼Œåˆ†é…äº†ä¸€ä¸ªç«¯å£ï¼Œå¯ä»¥é€šè¿‡ IPï¼šport æ–¹å¼æ¥è®¿é—®æœåŠ¡ï¼Œè¿™ç§æ–¹å¼å°±å°†æœåŠ¡æš´éœ²åˆ°å¤–éƒ¨å»äº†ï¼Œä¸€èˆ¬ç«¯å£æ˜¯ä¼šåšä¸€ä¸ªæ˜ å°„çš„ 80-\u003e30001 è¿™ç§ LoadBalancer ï¼šåœ¨ nodeport çš„åŸºç¡€ä¸Šï¼Œå€ŸåŠ© cloud provider åˆ›å»ºä¸€ä¸ªå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨ï¼Œå°†è¯·æ±‚è½¬å‘åˆ° nodeIPï¼šnodeportï¼Œç›¸å½“äº svc å¯èƒ½ä¼šåœ¨å¥½å‡ ä¸ª node èŠ‚ç‚¹ä¸Šéƒ½åˆ›å»ºå¤šä¸ª podï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è¿™äº› node ä¹‹å‰åŠ ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨æ¥å®ç°å¯¹äº nodeIPï¼šport è¿™ç§æ–¹å¼çš„ svc çš„è®¿é—®ï¼Œå‡è¡¡å™¨å¯ä»¥æ˜¯è‡ªå·±æ•´çš„ nginxï¼Œè¿™é‡Œåˆ™æ˜¯æŒ‡äº‘æœåŠ¡æä¾›å•†æä¾›çš„æœåŠ¡ ExternalName ï¼š åªæ˜¯ä¸ºäº†åœ¨é›†ç¾¤å†…éƒ¨å®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„å¯¹å¤–é¢çš„æŸä¸ªè®¿é—®çš„ svcï¼Œå› ä¸ºå¯èƒ½é›†ç¾¤å†…éƒ¨å¤šä¸ª pod éƒ½ä¼šè¦è®¿é—®è¿™ä¸ªå¤–éƒ¨æœåŠ¡ï¼Œä½†æ˜¯å¦‚æœå¤–éƒ¨ IP å˜äº†çš„è¯ï¼Œå°±è¦æ”¹åŠ¨å¾ˆå¤§ï¼Œè€Œä½¿ç”¨ ExternalName è¿™ç§ svc çš„è¯ï¼Œåˆ™åªç”¨æ”¹è¿™ä¸ª svc ä¸­çš„é…ç½® (3) svc åŸç† client è®¿é—® svcï¼Œè½¬å‘åˆ°å¯¹åº”çš„ pod æ˜¯é€šè¿‡ iptables æ¥å®ç°çš„ iptables è§„åˆ™çš„ç”Ÿæˆæ˜¯é€šè¿‡ kube-proxyï¼ˆæœåŠ¡å‘ç°ï¼‰æ¥å®ç°çš„ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:5:1","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"å…­ã€ èº«ä»½ä¸æƒé™æ§åˆ¶ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:6:0","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"6.1 kubeconfig kubeconfig æ˜¯ kubernetes é›†ç¾¤ä¸­å„ä¸ªç»„ä»¶(api-server å®¢æˆ·ç«¯)è¿å…¥ api-server çš„æ—¶å€™ , ä½¿ç”¨çš„è®¤è¯æ ¼å¼çš„å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ æŸ¥çœ‹ kubeconfig é…ç½®æ–‡ä»¶ kubectl config view kubeconfig è¯ä¹¦ å’Œ token ä¸¤ç§è®¤è¯æ–¹å¼æ˜¯ K8S ä¸­æœ€ç®€å•é€šç”¨çš„ä¸¤ç§è®¤è¯æ–¹å¼ ç”Ÿæˆ kubeconfig çš„é…ç½®æ­¥éª¤ 1ã€å®šä¹‰å˜é‡ export KUBE_APISERVER=â€œhttps://172.20.0.2:6443â€ 2ã€è®¾ç½®é›†ç¾¤å‚æ•° kubectl config set-cluster kubernetes â€“certificate-authority=/etc/kubernetes/ssl/ca.pem â€“embed-certs=true â€“server=${KUBE_APISERVER} #å¯ä»¥æŒ‡å®šè·¯å¾„ kubeconfig=/root/config.conf è¯´æ˜ï¼šé›†ç¾¤å‚æ•°ä¸»è¦è®¾ç½®äº†æ‰€éœ€è¦è®¿é—®çš„é›†ç¾¤çš„ä¿¡æ¯ã€‚ä½¿ç”¨ set-cluster è®¾ç½®äº†éœ€è¦è®¿é—®çš„é›†ç¾¤ï¼Œå¦‚ä¸Šä¸º kubernetesï¼›â€“certificate-authority è®¾ç½®äº†è¯¥é›†ç¾¤çš„å…¬é’¥ï¼›â€“embed-certs ä¸º true è¡¨ç¤ºå°† â€“certificate-authority è¯ä¹¦å†™å…¥åˆ° kubeconfig ä¸­ï¼›â€“server åˆ™è¡¨ç¤ºè¯¥é›†ç¾¤çš„ kube-apiserver åœ°å€ã€‚ 3ã€è®¾ç½®å®¢æˆ·ç«¯è®¤è¯å‚æ•° kubectl config set-credentials admin â€“client-certificate=/etc/kubernetes/ssl/admin.pem â€“embed-certs=true â€“client-key=/etc/kubernetes/ssl/admin-key.pem #å¯ä»¥æŒ‡å®šè·¯å¾„ kubeconfig=/root/config.conf è¯´æ˜ï¼šç”¨æˆ·å‚æ•°ä¸»è¦è®¾ç½®ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯ï¼Œä¸»è¦æ˜¯ç”¨æˆ·è¯ä¹¦ã€‚å¦‚ä¸Šçš„ç”¨æˆ·åä¸º adminï¼Œè¯ä¹¦ä¸ºï¼š/etc/kubernetes/ssl/admin.pemï¼Œç§é’¥ä¸ºï¼š/etc/kubernetes/ssl/admin-key.pemã€‚æ³¨æ„å®¢æˆ·ç«¯çš„è¯ä¹¦é¦–å…ˆè¦ç»è¿‡é›†ç¾¤ CA çš„ç­¾ç½²ï¼Œå¦åˆ™ä¸ä¼šè¢«é›†ç¾¤è®¤å¯ã€‚æ­¤å¤„ä½¿ç”¨çš„æ˜¯ ca è®¤è¯æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ token è®¤è¯ï¼Œå¦‚ kubelet çš„ TLS Boostrap æœºåˆ¶ä¸‹çš„ bootstrapping ä½¿ç”¨çš„å°±æ˜¯ token è®¤è¯æ–¹å¼ã€‚ 4ã€è®¾ç½®ä¸Šä¸‹æ–‡å‚æ•° kubectl config set-context kubernetes â€“cluster=kubernetes â€“user=admin #å¯ä»¥æŒ‡å®šè·¯å¾„ kubeconfig=/root/config.conf è¯´æ˜ï¼šä¸Šä¸‹æ–‡å‚æ•°å°† é›†ç¾¤å‚æ•°å’Œç”¨æˆ·å‚æ•°å…³è”èµ·æ¥ã€‚å¦‚ä¸Šé¢çš„ä¸Šä¸‹æ–‡åç§°ä¸º kubenetesï¼Œé›†ç¾¤ä¸º kubenetesï¼Œç”¨æˆ·ä¸º adminï¼Œè¡¨ç¤ºä½¿ç”¨ admin çš„ç”¨æˆ·å‡­è¯æ¥è®¿é—® kubenetes é›†ç¾¤çš„ default å‘½åç©ºé—´ï¼Œä¹Ÿå¯ä»¥å¢åŠ  â€“namspace æ¥æŒ‡å®šè®¿é—®çš„å‘½åç©ºé—´ã€‚ 5ã€è®¾ç½®é»˜è®¤ä¸Šä¸‹æ–‡ kubectl config use-context kubernetes #å¯ä»¥æŒ‡å®šè·¯å¾„ kubeconfig=/root/config.conf è¯´æ˜ï¼šæœ€åä½¿ç”¨kubectl config use-context kubernetes æ¥ä½¿ç”¨åä¸º kubenetes çš„ç¯å¢ƒé¡¹æ¥ä½œä¸ºé…ç½®ã€‚å¦‚æœé…ç½®äº†å¤šä¸ªç¯å¢ƒé¡¹ï¼Œå¯é€šè¿‡åˆ‡æ¢ä¸åŒçš„ç¯å¢ƒé¡¹åå­—æ¥è®¿é—®åˆ°ä¸åŒçš„é›†ç¾¤ç¯å¢ƒã€‚ å®Œæ•´çš„ k8s çš„è®¤è¯æ–¹å¼ https://zhuanlan.zhihu.com/p/97797321 ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:6:1","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"ä¸ƒã€ ç½‘ç»œ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:7:0","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"å…«ã€ å­˜å‚¨ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:8:0","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"8.2 ConfigMap (1) æ˜¯ä»€ä¹ˆï¼Ÿ configMap å°±æ˜¯ k8s ä¸­çš„é…ç½®ï¼Œæœ¬è´¨æ˜¯é”®å€¼å¯¹ (2) ä¸ºä»€ä¹ˆç”¨ configMap ? ä¸æ˜¯ yml å—ï¼Ÿæœ‰å“ªäº›åœ°æ–¹éœ€è¦ç”¨åˆ°é…ç½®ï¼Ÿ (3) æ–¹å‘ï¼ˆconfigMap ä¸»è¦è€ƒè™‘åˆ›å»ºå’Œä½¿ç”¨ä¸¤éƒ¨åˆ†ï¼‰ åˆ›å»º ä½¿ç”¨ é…ç½®æ–‡ä»¶ï¼ˆconfigMapã€secret éƒ½å­˜å‚¨åœ¨ etcd ä¸­äº†ï¼‰ configMap å¯ä»¥ç”¨æ¥ä¿å­˜å•ä¸ªå±æ€§ï¼Œä¹Ÿå¯ä»¥ä¿å­˜é…ç½®æ–‡ä»¶ (4) configMap ä½œç”¨ è®¾ç½®ç¯å¢ƒå˜é‡çš„å€¼ è®¾ç½®å‘½ä»¤è¡Œå‚æ•° åœ¨æ•°æ®å·ä¸­åˆ›å»º config æ–‡ä»¶ (5) ä¸ secret çš„åŒºåˆ«ï¼š configMap æ˜¯ä¸éœ€è¦åŠ å¯†çš„é…ç½®ï¼Œå…¶ä»–åŸºæœ¬ç›¸åŒ (6) å…¶ä»–èµ„æ–™ é…ç½®ä¸­å¿ƒçš„æ¦‚å¿µï¼Œæ¯”å¦‚æºç¨‹çš„å¼€æºåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ Apollo ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:8:1","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"ä¹ã€ é›†ç¾¤æ‰©å±• ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:9:0","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"åã€é…ç½® ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:10:0","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"9.1 apiVersion Deployment å¯ç”¨ apps/v1 1.6ç‰ˆæœ¬ä¹‹å‰ apiVsersionï¼šextensions/v1beta1 1.6ç‰ˆæœ¬åˆ°1.9ç‰ˆæœ¬ä¹‹é—´ï¼šapps/v1beta1 1.9ç‰ˆæœ¬ä¹‹å:apps/v1 pods å¯ä»¥ç›´æ¥æ˜¯ v1 ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:10:1","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":["native cloud"],"content":"9.2 spec å¯¹äº Deploymentï¼Œspec ä¸‹çš„ selector å­—æ®µæ˜¯ required çš„ meta ç†è§£ä¸ºç±»å‹å±æ€§çš„æè¿° metav1.TypeMeta -\u003e kind/apiVersion spceï¼šå®šä¹‰ API å¯¹è±¡ç±»å‹ç§æœ‰å±æ€§ã€‚ -\u003e spec. (ä¹Ÿæ˜¯è¿™ä¸ªå­—æ®µä½¿å¾—ä¸åŒ API å¯¹è±¡å¾—ä»¥åŒºåˆ†) Status : æè¿°å¯¹è±¡çš„çŠ¶æ€ ","date":"2022-03-19","objectID":"/kubernetes%E5%9F%BA%E7%A1%80/:10:2","tags":[],"title":"KubernetesåŸºç¡€","uri":"/kubernetes%E5%9F%BA%E7%A1%80/"},{"categories":null,"content":" è­¦å‘Š Sorry, this article has not been completely translated into French. Welcome to take the time to propose a translation by Â making a PR to the theme! Â LoveIt is a clean, elegant but advanced blog theme for Hugo developed by Dillon. It is based on the original LeaveIt Theme and KeepIt Theme. Hugo Theme LoveItHugo Theme LoveIt \" Hugo Theme LoveIt ","date":"2019-08-02","objectID":"/about/:0:0","tags":null,"title":"Ã€ propos de LoveIt","uri":"/about/"},{"categories":null,"content":"Features Performance and SEO Â Optimized for performance: 99/100 on mobile and 100/100 on desktop in Google PageSpeed Insights Â Optimized SEO performance with a correct SEO SCHEMA based on JSON-LD Â Google Analytics supported Â Fathom Analytics supported Â Search engine verification supported (Google, Bind, Yandex and Baidu) Â CDN for third-party libraries supported Â Automatically converted images with Lazy Load by lazysizes Appearance and Layout / Responsive layout / Light/Dark mode Â Globally consistent design language Â Pagination supported Â Easy-to-use and self-expanding table of contents Â Multilanguage supported and i18n ready Â Beautiful CSS animation Social and Comment Systems Â Gravatar supported by Gravatar Â Local Avatar supported Â Up to 64 social links supported Â Up to 28 share sites supported Â Disqus comment system supported by Disqus Â Gitalk comment system supported by Gitalk Â Valine comment system supported by Valine Â Facebook comments system supported by Facebook Â Telegram comments system supported by Comments Â Commento comment system supported by Commento Â Utterances comment system supported by Utterances Extended Features Â Search supported by Lunr.js or algolia Â Twemoji supported Â Automatically highlighting code Â Copy code to clipboard with one click Â Images gallery supported by lightgallery.js Â Extended Markdown syntax for Font Awesome icons Â Extended Markdown syntax for ruby annotation Â Extended Markdown syntax for fraction Â Mathematical formula supported by $ \\KaTeX $ Â Diagrams shortcode supported by mermaid Â Interactive data visualization shortcode supported by ECharts Â Mapbox shortcode supported by Mapbox GL JS Â Music player shortcode supported by APlayer and MetingJS Â Bilibili player shortcode Â Kinds of admonitions shortcode Â Custom style shortcode Â Custom script shortcode Â Animated typing supported by TypeIt Â Dynamic scroll supported by Smooth Scroll Â Cookie consent banner supported by cookieconsent â€¦ ","date":"2019-08-02","objectID":"/about/:0:1","tags":null,"title":"Ã€ propos de LoveIt","uri":"/about/"},{"categories":null,"content":"License LoveIt is licensed under the MIT license. Check the LICENSE file for details. Thanks to the authors of following resources included in the theme: normalize.css Font Awesome Simple Icons Animate.css Smooth Scroll autocomplete.js Lunr.js algoliasearch lazysizes object-fit-images Twemoji lightgallery.js clipboard.js Sharer.js TypeIt $ \\KaTeX $ mermaid ECharts Mapbox GL JS APlayer MetingJS Gitalk Valine cookieconsent ","date":"2019-08-02","objectID":"/about/:0:2","tags":null,"title":"Ã€ propos de LoveIt","uri":"/about/"}]